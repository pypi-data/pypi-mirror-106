(this.webpackJsonpweb=this.webpackJsonpweb||[]).push([[0],{102:function(e,t,n){},103:function(e,t,n){},110:function(e,t,n){},111:function(e,t,n){},117:function(e,t,n){"use strict";n.r(t);var i=n(0),o=n.n(i),a=n(10),r=n.n(a),l=(n(102),n(18)),s=(n(103),n(16)),c=n(17),h=function(){function e(t,n){if(Object(s.a)(this,e),this.index=void 0,this.name=void 0,t<0||t>255)throw RangeError("index must be 0~255");this.index=t,this.name=n}return Object(c.a)(e,[{key:"getBrightRGBString",value:function(){var e=u[this.index];return"rgba(".concat(e[0]+40,", ").concat(e[1]+40,", ").concat(e[2]+40,", 0.9)")}},{key:"getAnnotationRGBString",value:function(){var e=u[this.index];return"rgba(".concat(e[0],", ").concat(e[1],", ").concat(e[2],", 1.0)")}},{key:"isBackground",value:function(){return 0===this.index}},{key:"grantLabelIndex",value:function(t){return new e(t,this.name)}}],[{key:"backgroundLabel",value:function(){return new e(0,"background")}}]),e}(),u=[[0,0,0],[128,0,0],[0,128,0],[128,128,0],[0,0,128],[128,0,128],[0,128,128],[128,128,128],[64,0,0],[192,0,0],[64,128,0],[192,128,0],[64,0,128],[192,0,128],[64,128,128],[192,128,128],[0,64,0],[128,64,0],[0,192,0],[128,192,0],[0,64,128],[128,64,128],[0,192,128],[128,192,128],[64,64,0],[192,64,0],[64,192,0],[192,192,0],[64,64,128],[192,64,128],[64,192,128],[192,192,128],[0,0,64],[128,0,64],[0,128,64],[128,128,64],[0,0,192],[128,0,192],[0,128,192],[128,128,192],[64,0,64],[192,0,64],[64,128,64],[192,128,64],[64,0,192],[192,0,192],[64,128,192],[192,128,192],[0,64,64],[128,64,64],[0,192,64],[128,192,64],[0,64,192],[128,64,192],[0,192,192],[128,192,192],[64,64,64],[192,64,64],[64,192,64],[192,192,64],[64,64,192],[192,64,192],[64,192,192],[192,192,192],[32,0,0],[160,0,0],[32,128,0],[160,128,0],[32,0,128],[160,0,128],[32,128,128],[160,128,128],[96,0,0],[224,0,0],[96,128,0],[224,128,0],[96,0,128],[224,0,128],[96,128,128],[224,128,128],[32,64,0],[160,64,0],[32,192,0],[160,192,0],[32,64,128],[160,64,128],[32,192,128],[160,192,128],[96,64,0],[224,64,0],[96,192,0],[224,192,0],[96,64,128],[224,64,128],[96,192,128],[224,192,128],[32,0,64],[160,0,64],[32,128,64],[160,128,64],[32,0,192],[160,0,192],[32,128,192],[160,128,192],[96,0,64],[224,0,64],[96,128,64],[224,128,64],[96,0,192],[224,0,192],[96,128,192],[224,128,192],[32,64,64],[160,64,64],[32,192,64],[160,192,64],[32,64,192],[160,64,192],[32,192,192],[160,192,192],[96,64,64],[224,64,64],[96,192,64],[224,192,64],[96,64,192],[224,64,192],[96,192,192],[224,192,192],[0,32,0],[128,32,0],[0,160,0],[128,160,0],[0,32,128],[128,32,128],[0,160,128],[128,160,128],[64,32,0],[192,32,0],[64,160,0],[192,160,0],[64,32,128],[192,32,128],[64,160,128],[192,160,128],[0,96,0],[128,96,0],[0,224,0],[128,224,0],[0,96,128],[128,96,128],[0,224,128],[128,224,128],[64,96,0],[192,96,0],[64,224,0],[192,224,0],[64,96,128],[192,96,128],[64,224,128],[192,224,128],[0,32,64],[128,32,64],[0,160,64],[128,160,64],[0,32,192],[128,32,192],[0,160,192],[128,160,192],[64,32,64],[192,32,64],[64,160,64],[192,160,64],[64,32,192],[192,32,192],[64,160,192],[192,160,192],[0,96,64],[128,96,64],[0,224,64],[128,224,64],[0,96,192],[128,96,192],[0,224,192],[128,224,192],[64,96,64],[192,96,64],[64,224,64],[192,224,64],[64,96,192],[192,96,192],[64,224,192],[192,224,192],[32,32,0],[160,32,0],[32,160,0],[160,160,0],[32,32,128],[160,32,128],[32,160,128],[160,160,128],[96,32,0],[224,32,0],[96,160,0],[224,160,0],[96,32,128],[224,32,128],[96,160,128],[224,160,128],[32,96,0],[160,96,0],[32,224,0],[160,224,0],[32,96,128],[160,96,128],[32,224,128],[160,224,128],[96,96,0],[224,96,0],[96,224,0],[224,224,0],[96,96,128],[224,96,128],[96,224,128],[224,224,128],[32,32,64],[160,32,64],[32,160,64],[160,160,64],[32,32,192],[160,32,192],[32,160,192],[160,160,192],[96,32,64],[224,32,64],[96,160,64],[224,160,64],[96,32,192],[224,32,192],[96,160,192],[224,160,192],[32,96,64],[160,96,64],[32,224,64],[160,224,64],[32,96,192],[160,96,192],[32,224,192],[160,224,192],[96,96,64],[224,96,64],[96,224,64],[224,224,64],[96,96,192],[224,96,192],[96,224,192],[224,224,192]],d=-1,g=o.a.createContext({}),b={loading:!1,filePathList:[],selectedFilePathIndex:d,saveAnnotationsPath:null,imagesPath:null,labelList:[h.backgroundLabel()],selectedLabelIndex:d,initialSettingFinished:!1},v=n(51),f=n(15),x="SET_FILEPATH_LIST",y="SET_SELECTED_FILE",p="ADD_LABEL",j="SET_LABEL_LIST",m="SET_SELECTED_LABEL",O="SET_INITIAL_SETTING_RESULT",C=function(e,t){switch(t.type){case x:return Object(f.a)(Object(f.a)({},e),{},{filePathList:t.payload});case y:return t.payload>e.filePathList.length?e:Object(f.a)(Object(f.a)({},e),{},{selectedFilePathIndex:t.payload});case j:return Object(f.a)(Object(f.a)({},e),{},{labelList:t.payload});case p:var n=e.labelList.length;return Object(f.a)(Object(f.a)({},e),{},{labelList:[].concat(Object(v.a)(e.labelList),[new h(n,t.payload)])});case m:return t.payload>e.labelList.length?e:Object(f.a)(Object(f.a)({},e),{},{selectedLabelIndex:t.payload});case O:return Object(f.a)(Object(f.a)({},e),{},{saveAnnotationsPath:t.payload.annotationPath,imagesPath:t.payload.imagesPath,initialSettingFinished:t.payload.initialSettingFinished});default:return e}},S=n(20),k=n.n(S),w=n(32),P=n(172),L=function(e){console.error(e)},I=n(177),M=n(175),H=n(2),B=function(e){var t=e.message,n=e.open,i=e.onClose,o=e.hideMilliSec,a=void 0===o?1500:o;return Object(H.jsx)(H.Fragment,{children:Object(H.jsx)(I.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},autoHideDuration:a,open:n,onClose:function(e,t){return i()},children:Object(H.jsx)(M.a,{severity:"info",variant:"filled",elevation:6,children:t})})})},A=n(152),E=function(e){var t=e.open,n=e.size,i=void 0===n?60:n,o=e.backgroundColor,a=void 0===o?"rgba(0,0,0,0.3)":o;return t?Object(H.jsx)("div",{style:{zIndex:100,backgroundColor:a,position:"fixed",top:0,left:0,width:"100vw",height:"100vh",textAlign:"center"},children:Object(H.jsx)(A.a,{color:"primary",size:i,style:{position:"relative",top:"45vh"}})}):Object(H.jsx)(H.Fragment,{})},T=n(178),F=n(153),z=n(155),R=n(156),D=n(154),_=function(e){var t=e.title,n=e.message,i=e.open,o=e.onClose;return Object(H.jsxs)(T.a,{"aria-labelledby":"modal-title","aria-describedby":"modal-description",open:i,onClose:function(){return o()},children:[Object(H.jsxs)(F.a,{id:"modal-title",children:[Object(H.jsx)(D.a,{fontSize:"large",color:"error",style:{verticalAlign:"middle"}}),"\xa0\xa0\xa0",t]}),Object(H.jsx)(z.a,{children:Object(H.jsx)(R.a,{id:"modal-description",children:n})})]})},U=n(52),N=function(e){var t=e.children,n=e.style;return Object(H.jsx)(U.a,{variant:"h5",component:"h5",gutterBottom:!1,style:n,children:t})},W=n(148),G=n(158),V=n(119),Y=n(157),Z=(n(110),function(e){var t=e.index,n=e.filePathWrapper,i=e.onClicked,o=e.selected;return Object(H.jsxs)(H.Fragment,{children:[Object(H.jsx)(V.a,{button:!0,onClick:function(){return i(n,t)},selected:o,children:Object(H.jsx)(Y.a,{primary:n.getFileName()})}),Object(H.jsx)(G.a,{})]})}),K=function(e){var t=e.filePathList,n=e.onClick,i=e.width,o=void 0===i?"400px":i,a=e.listHeight,r=void 0===a?"500px":a,l=e.selectedIndex,s=t.map((function(e,t){return Object(H.jsx)(Z,{index:t,filePathWrapper:e,onClicked:function(){return n(e,t)},selected:l===t},t)}));return Object(H.jsxs)(W.a,{style:{padding:"10px",width:o},children:[Object(H.jsx)(N,{children:"Files"}),Object(H.jsx)(G.a,{style:{marginTop:"10px"}}),Object(H.jsx)("div",{style:{overflowY:"scroll",height:r},children:s})]})},X=n(160),q=n(159),J=function(e){var t=e.labelInfo,n=e.selected,i=e.width,o=void 0===i?"100%":i,a=e.onClick,r=n?t.getBrightRGBString():"white",l=n?"white":t.getBrightRGBString();return Object(H.jsxs)(q.a,{size:"small",variant:n?"contained":"outlined",onClick:function(){return a(t)},style:{textTransform:"none",width:o,backgroundColor:r,color:l,borderColor:l,borderWidth:"2px"},children:[t.index,": ",t.name]})},Q=function(e){var t=e.onClick,n=e.labelList,i=e.width,o=void 0===i?"400px":i,a=e.height,r=void 0===a?"500px":a,l=e.selectedIndex,s=n.map((function(e){return Object(H.jsx)(X.a,{item:!0,xs:6,children:Object(H.jsx)(J,{labelInfo:e,onClick:t,selected:e.index===l})},e.index)}));return Object(H.jsxs)(W.a,{style:{padding:"10px",width:o},children:[Object(H.jsx)(N,{children:"Labels"}),Object(H.jsx)(G.a,{style:{marginTop:"5px",marginBottom:"5px"}}),Object(H.jsx)("div",{style:{overflowY:"scroll",height:r},children:Object(H.jsx)(X.a,{container:!0,spacing:1,children:s})})]})},$=(n(111),function(e,t){return e.imageInfo===t.imageInfo}),ee=function(e){return document.getElementById(e).getContext("2d")},te=function(e){var t=e.imageInfo,n=e.onSaveClick,o=e.width,a=void 0===o?"70%":o,r=e.viewHeight,l=void 0===r?"500px":r,s=e.annotationManager,c=function(e){s.getMode().onMouseDown(e.offsetX,e.offsetY,s.getLabel())},h=function(e){s.getMode().onMouseMove(e.offsetX,e.offsetY,s.getLabel())},u=function(e){s.getMode().onMouseUp(e.offsetX,e.offsetY)},d=function(e){s.getMode().onMouseLeave()};return Object(i.useEffect)((function(){if(null!==t.imageSrc)return s.setContextSet({imageContext:ee("image-layer"),annotationContext:ee("annotated-layer"),regionContext:ee("region-layer"),highlightContext:ee("highlight-layer")}),s.changeImage(t.imageSrc,t.annotationImgSrc,t.width,t.height),function(){var e=document.getElementById("layer-container");null!==e&&void 0!==e?(e.addEventListener("mousedown",c),e.addEventListener("mousemove",h),e.addEventListener("mouseup",u),e.addEventListener("mouseleave",d)):L("layer-container not found")}(),function(){return function(){var e=document.getElementById("layer-container");null!==e&&void 0!==e?(e.removeEventListener("mousedown",c),e.removeEventListener("mousemove",h),e.removeEventListener("mouseup",u),e.removeEventListener("mouseleave",d)):L("layer-container not found")}()}}),[t]),Object(H.jsxs)(W.a,{style:{padding:"15px",width:a},children:[Object(H.jsxs)("div",{children:[Object(H.jsx)(N,{style:{display:"inline"},children:t.fileName}),Object(H.jsx)(q.a,{variant:"contained",color:"primary",onClick:n,style:{float:"right",marginRight:"20px"},children:"Save"})]}),Object(H.jsx)("div",{style:{overflow:"scroll",height:l,clear:"both",marginTop:"20px"},children:Object(H.jsxs)("div",{id:"layer-container",className:"layer-container",children:[Object(H.jsx)("canvas",{className:"annotation-image-layer",id:"image-layer",width:t.width,height:t.height}),Object(H.jsx)("div",{id:"region-layer-wrapper",className:"layer-wrapper",children:Object(H.jsx)("canvas",{id:"region-layer",className:"annotation-image-layer",width:t.width,height:t.height})}),Object(H.jsx)("div",{id:"annotated-layer-wrapper",className:"layer-wrapper",children:Object(H.jsx)("canvas",{id:"annotated-layer",className:"annotation-image-layer",width:t.width,height:t.height})}),Object(H.jsx)("div",{id:"highlight-layer-wrapper",className:"layer-wrapper",children:Object(H.jsx)("canvas",{id:"highlight-layer",width:t.width,height:t.height})})]})})]})},ne=o.a.memo(te,$),ie=n(24),oe=n(22),ae=[{index:0,name:"Paint"},{index:1,name:"Polygon"},{index:3,name:"Oval"},{index:4,name:"Rect"},{index:5,name:"Line"}],re=function(){function e(t,n,i,o,a){Object(s.a)(this,e),this.contextSet=void 0,this.brushSize=void 0,this.width=void 0,this.height=void 0,this.imageHistoryController=void 0,this.contextSet=t,this.brushSize=n,this.width=i,this.height=o,this.imageHistoryController=a}return Object(c.a)(e,[{key:"onMouseLeave",value:function(){}},{key:"setContextSet",value:function(e){this.contextSet=e}},{key:"getContextSet",value:function(){return this.contextSet}},{key:"setImage",value:function(e,t,n,i){this.contextSet&&(this.width=n,this.height=i,this.clearHistory(),this.clearModeParams(),this.setImageToCanvas(e,n,i),this.setAnnotationImageToCanvas(t,n,i))}},{key:"setImageToCanvas",value:function(e,t,n){var i=this,o=new Image(t,n);o.src=e,o.onload=function(){i.contextSet?i.contextSet.imageContext.drawImage(o,0,0,t,n):L("contextset is null on setImageToCanvas")}}},{key:"setAnnotationImageToCanvas",value:function(e,t,n){var i=this;if(this.contextSet)if(this.contextSet.annotationContext.clearRect(0,0,t,n),null!==e){var o=new Image(t,n);o.src=e,o.onload=function(){i.contextSet?(i.contextSet.annotationContext.drawImage(o,0,0,t,n),i.imageHistoryController.pushHistory(i.contextSet.annotationContext.getImageData(0,0,t,n))):L("contextset is null on setAnnotationImageToCanvas")}}else this.imageHistoryController.pushHistory(this.contextSet.annotationContext.getImageData(0,0,t,n))}},{key:"setBrushSize",value:function(e){this.brushSize=e}},{key:"undo",value:function(){var e,t=this.imageHistoryController.undo();null!==t&&(null===(e=this.getContextSet())||void 0===e||e.annotationContext.putImageData(t,0,0))}},{key:"redo",value:function(){var e,t=this.imageHistoryController.redo();null!==t&&(null===(e=this.getContextSet())||void 0===e||e.annotationContext.putImageData(t,0,0))}},{key:"clearModeParams",value:function(){this.clearHighlight()}},{key:"clearHistory",value:function(){this.imageHistoryController.clear()}},{key:"clearHighlight",value:function(){var e;null===(e=this.contextSet)||void 0===e||e.highlightContext.clearRect(0,0,this.width,this.height)}},{key:"drawBackgroundCircle",value:function(e,t,n,i){i?(i.beginPath(),i.globalCompositeOperation="source-over",i.fillStyle="black",i.arc(e,t,n,0,360*Math.PI/180,!1),i.fill(),i.closePath()):L("Context is null on drawBackgroundHighlightCircle.")}},{key:"drawCircle",value:function(e,t,n,i,o){o?(o.beginPath(),o.arc(e,t,n,0,360*Math.PI/180,!1),o.fillStyle=i.getAnnotationRGBString(),o.globalCompositeOperation=i.isBackground()?"destination-out":"source-over",o.fill(),o.closePath(),o.globalCompositeOperation="source-over"):L("Context is null.")}}]),e}(),le=function(e){Object(ie.a)(n,e);var t=Object(oe.a)(n);function n(){var e;Object(s.a)(this,n);for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))).isMouseDowning=!1,e}return Object(c.a)(n,[{key:"onMouseDown",value:function(e,t,n){var i;this.isMouseDowning=!0,this.drawCircle(e,t,this.brushSize,n,null===(i=this.contextSet)||void 0===i?void 0:i.annotationContext)}},{key:"onMouseMove",value:function(e,t,n){var i,o,a;(this.clearHighlight(),n.isBackground())?this.drawBackgroundCircle(e,t,this.brushSize+1,null===(o=this.contextSet)||void 0===o?void 0:o.highlightContext):this.drawCircle(e,t,this.brushSize,n,null===(a=this.contextSet)||void 0===a?void 0:a.highlightContext);this.isMouseDowning&&this.drawCircle(e,t,this.brushSize,n,null===(i=this.contextSet)||void 0===i?void 0:i.annotationContext)}},{key:"onMouseUp",value:function(e,t){this.isMouseDowning&&null!==this.contextSet&&this.imageHistoryController.pushHistory(this.contextSet.annotationContext.getImageData(0,0,this.width,this.height)),this.isMouseDowning=!1}},{key:"onMouseLeave",value:function(){this.clearHighlight()}}]),n}(re),se=n(56),ce=n(31),he=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;Object(s.a)(this,e),this.historyIndex=-1,this.historyLogs=[],this.maxHistories=void 0,this.maxHistories=t}return Object(c.a)(e,[{key:"pushHistory",value:function(e){this.isAbleToRedo()&&this.removeFutureHistories(),this.historyLogs.push(e),this.historyIndex++,this.removeSurplusHistories(),this.historyLogs,this.historyIndex}},{key:"undo",value:function(){return this.isAbleToUndo()?this.historyLogs[--this.historyIndex]:null}},{key:"redo",value:function(){return this.isAbleToRedo()?this.historyLogs[++this.historyIndex]:null}},{key:"clear",value:function(){this.historyLogs=[],this.historyIndex=-1}},{key:"isAbleToUndo",value:function(){return this.historyLogs.length>1&&this.historyIndex>0}},{key:"isAbleToRedo",value:function(){return this.historyLogs.length>0&&this.historyIndex+1<this.historyLogs.length}},{key:"removeFutureHistories",value:function(){var e=this;this.historyLogs=this.historyLogs.filter((function(t,n){return e.historyIndex>=n}))}},{key:"removeSurplusHistories",value:function(){var e=this.historyLogs.length-this.maxHistories;e>0&&(this.historyLogs.splice(0,e),this.historyIndex=this.maxHistories-1)}}]),e}(),ue=function(e){Object(ie.a)(n,e);var t=Object(oe.a)(n);function n(){var e;Object(s.a)(this,n);for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))).polygonPoints=[],e.polygonHistoryController=new he(30),e}return Object(c.a)(n,[{key:"onMouseDown",value:function(e,t,n){if(this.isStartPointClicked(e,t)){if(this.applyPolygonToAnnotation(n),this.clearModeParams(),null===this.contextSet)return;this.imageHistoryController.pushHistory(this.contextSet.annotationContext.getImageData(0,0,this.width,this.height))}else 0===this.polygonPoints.length&&this.polygonHistoryController.pushHistory([]),this.polygonPoints.push({x:e,y:t}),this.drawHighLight(),this.polygonHistoryController.pushHistory(Object(v.a)(this.polygonPoints))}},{key:"onMouseMove",value:function(e,t,n){var i;this.clearHighlight(),this.drawHighLight(),this.drawPolygonPoint({x:e,y:t},!1,null===(i=this.contextSet)||void 0===i?void 0:i.highlightContext)}},{key:"onMouseUp",value:function(e,t){}},{key:"undo",value:function(){var e=this.polygonHistoryController.undo();if(null===e)return this.clearModeParams(),void Object(se.a)(Object(ce.a)(n.prototype),"undo",this).call(this);this.polygonPoints=Object(v.a)(e),this.drawHighLight()}},{key:"redo",value:function(){var e=this.polygonHistoryController.redo();null!==e?(this.polygonPoints=Object(v.a)(e),this.drawHighLight()):0===this.polygonPoints.length&&Object(se.a)(Object(ce.a)(n.prototype),"redo",this).call(this)}},{key:"clearHistory",value:function(){Object(se.a)(Object(ce.a)(n.prototype),"clearHistory",this).call(this),this.polygonHistoryController.clear()}},{key:"clearModeParams",value:function(){Object(se.a)(Object(ce.a)(n.prototype),"clearModeParams",this).call(this),this.polygonHistoryController.clear(),this.polygonPoints=[]}},{key:"isStartPointClicked",value:function(e,t){return this.polygonPoints.length>0&&this.polygonPoints[0].x+this.brushSize>e&&this.polygonPoints[0].x-this.brushSize<e&&this.polygonPoints[0].y+this.brushSize>t&&this.polygonPoints[0].y-this.brushSize<t}},{key:"applyPolygonToAnnotation",value:function(e){var t,n=null===(t=this.contextSet)||void 0===t?void 0:t.annotationContext;n?0!==this.polygonPoints.length?(n.beginPath(),n.fillStyle=e.getAnnotationRGBString(),n.globalCompositeOperation=e.isBackground()?"destination-out":"source-over",this.polygonPoints.forEach((function(e){n.lineTo(e.x,e.y)})),n.lineTo(this.polygonPoints[0].x,this.polygonPoints[0].y),n.fill(),n.closePath(),n.globalCompositeOperation="source-over"):L("polygon points length is zero"):L("annotation context is null.")}},{key:"drawHighLight",value:function(){var e,t=null===(e=this.contextSet)||void 0===e?void 0:e.highlightContext;t?(this.clearHighlight(),this.drawLineBitweenPolygonPoints(t),this.drawPolygonPoints(t)):L("highlight context is null.")}},{key:"drawLineBitweenPolygonPoints",value:function(e){e.beginPath(),e.lineWidth=this.brushSize/5+1,this.polygonPoints.forEach((function(t){e.lineTo(t.x,t.y),e.moveTo(t.x,t.y),e.stroke()})),e.closePath()}},{key:"drawPolygonPoints",value:function(e){var t=this;this.polygonPoints.forEach((function(n,i){t.drawPolygonPoint(n,0===i,e)}))}},{key:"drawPolygonPoint",value:function(e,t,n){n?(n.beginPath(),n.globalCompositeOperation="source-over",n.arc(e.x,e.y,this.brushSize/2+1,0,360*Math.PI/180,!1),n.fillStyle=t?"red":"black",n.fill(),n.beginPath(),n.arc(e.x,e.y,this.brushSize/2-this.brushSize/5+1,0,360*Math.PI/180,!1),n.fillStyle="white",n.fill()):L("Context is null on drawPolygonPoint.")}}]),n}(re),de=n(179),ge=n(173),be=n(163),ve=n(151),fe=n(164),xe=n(165),ye=n(166),pe=n(167),je=function(e){var t=e.modeValues,n=e.modeIndex,i=e.brushSize,o=e.alpha,a=e.zoomRate,r=e.width,l=void 0===r?"300px":r,s=e.onModeIndexChange,c=e.onBrushSizeChange,h=e.onAlphaChange,u=e.onZoomIn,d=e.onZoomOut,g=e.onUndo,b=e.onRedo;return Object(H.jsxs)(W.a,{style:{padding:"15px",width:l,display:"flex"},children:[Object(H.jsxs)("div",{style:{width:"75%",paddingRight:"5%"},children:[Object(H.jsxs)("p",{children:[Object(H.jsx)("span",{children:"alpha"}),Object(H.jsx)(de.a,{getAriaValueText:function(e,t){return o.toString()},"aria-labelledby":"discrete-slider-always",valueLabelDisplay:"on",min:0,max:1,step:.1,marks:[{value:0,label:"0"},{value:.5,label:"0.5"},{value:1,label:"1"}],onChange:function(e,t){Array.isArray(t)?h(t[0]):h(t)},value:o,defaultValue:o})]}),Object(H.jsxs)("p",{children:[Object(H.jsx)("span",{children:"brush size"}),Object(H.jsx)(de.a,{getAriaValueText:function(e,t){return i.toString()},valueLabelDisplay:"on",min:1,max:100,step:1,marks:[{value:1,label:"1"},{value:5,label:"5"},{value:10,label:"10"},{value:50,label:"50"},{value:100,label:"100"}],onChange:function(e,t){Array.isArray(t)?c(t[0]):c(t)},value:i,defaultValue:i})]})]}),Object(H.jsxs)("div",{style:{display:"inline-block",width:"20%",textAlign:"center"},children:[Object(H.jsx)(ge.a,{style:{width:"100%",textAlign:"left"},labelId:"demo-simple-select-filled-label",id:"demo-simple-select-filled",value:n,onChange:function(e){return s(Number(e.target.value))},children:t.map((function(e){var t=e.index,n=e.name;return Object(H.jsx)(be.a,{value:t,children:n})}))}),Object(H.jsx)("div",{style:{paddingTop:"20px"}}),Object(H.jsxs)("div",{children:[Object(H.jsx)(ve.a,{onClick:d,children:Object(H.jsx)(fe.a,{})}),Math.round(100*a),"%",Object(H.jsx)(ve.a,{onClick:u,children:Object(H.jsx)(xe.a,{})})]}),Object(H.jsx)("div",{style:{paddingTop:"20px"}}),Object(H.jsxs)("div",{children:[Object(H.jsx)(ve.a,{onClick:function(){return g()},children:Object(H.jsx)(ye.a,{})}),Object(H.jsx)(ve.a,{onClick:function(){return b()},children:Object(H.jsx)(pe.a,{})})]})]})]})},me=function(e){Object(ie.a)(n,e);var t=Object(oe.a)(n);function n(){var e;Object(s.a)(this,n);for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))).circleCenter=null,e.selectedLabel=null,e}return Object(c.a)(n,[{key:"onMouseDown",value:function(e,t,n){this.circleCenter={x:e,y:t},this.selectedLabel=n}},{key:"onMouseMove",value:function(e,t,n){var i,o,a,r;if(this.clearHighlight(),null===this.circleCenter)return n.isBackground()?void this.drawBackgroundCircle(e,t,this.brushSize,null===(a=this.contextSet)||void 0===a?void 0:a.highlightContext):void this.drawCircle(e,t,this.brushSize,n,null===(o=this.contextSet)||void 0===o?void 0:o.highlightContext);n.isBackground()?this.drawHighlightBackgroundOvalFromCenter(e,t,null===(r=this.contextSet)||void 0===r?void 0:r.highlightContext):this.drawOvalFromCenter(e,t,n,null===(i=this.contextSet)||void 0===i?void 0:i.highlightContext)}},{key:"onMouseUp",value:function(e,t){var n;null!==this.circleCenter?null!==this.selectedLabel?null!==this.contextSet?(this.drawOvalFromCenter(e,t,this.selectedLabel,null===(n=this.contextSet)||void 0===n?void 0:n.annotationContext),this.imageHistoryController.pushHistory(this.contextSet.annotationContext.getImageData(0,0,this.width,this.height)),this.selectedLabel=null,this.circleCenter=null):L("context is null onMouseUp"):L("selectedLabel is null onMouseUp"):L("Circle center is null onMouseUp")}},{key:"onMouseLeave",value:function(){null===this.circleCenter&&this.clearHighlight()}},{key:"drawOvalFromCenter",value:function(e,t,n,i){i?null!==this.circleCenter&&(i.beginPath(),i.ellipse(this.circleCenter.x,this.circleCenter.y,Math.abs(e-this.circleCenter.x),Math.abs(t-this.circleCenter.y),0,0,360*Math.PI/180,!1),i.fillStyle=n.getAnnotationRGBString(),i.globalCompositeOperation=n.isBackground()?"destination-out":"source-over",i.fill(),i.closePath(),i.globalCompositeOperation="source-over"):L("Context is null.")}},{key:"drawHighlightBackgroundOvalFromCenter",value:function(e,t,n){n?null!==this.circleCenter&&(n.beginPath(),n.ellipse(this.circleCenter.x,this.circleCenter.y,Math.abs(e-this.circleCenter.x),Math.abs(t-this.circleCenter.y),0,0,360*Math.PI/180,!1),n.globalCompositeOperation="source-over",n.fillStyle="black",n.fill(),n.closePath()):L("Context is null.")}}]),n}(re),Oe=function(e){Object(ie.a)(n,e);var t=Object(oe.a)(n);function n(){var e;Object(s.a)(this,n);for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))).rectCenter=null,e.selectedLabel=null,e}return Object(c.a)(n,[{key:"onMouseDown",value:function(e,t,n){this.rectCenter={x:e,y:t},this.selectedLabel=n}},{key:"onMouseMove",value:function(e,t,n){var i,o,a;(this.clearHighlight(),null!==this.rectCenter)?n.isBackground()?this.drawBackgroundRect(e,t,null===(o=this.contextSet)||void 0===o?void 0:o.highlightContext):this.drawRectFromCenter(e,t,n,null===(i=this.contextSet)||void 0===i?void 0:i.highlightContext):this.drawSquare(e,t,this.brushSize,n.isBackground()?"black":n.getAnnotationRGBString(),null===(a=this.contextSet)||void 0===a?void 0:a.highlightContext)}},{key:"onMouseUp",value:function(e,t){var n;null!==this.rectCenter?null!==this.selectedLabel?null!==this.contextSet?(this.drawRectFromCenter(e,t,this.selectedLabel,null===(n=this.contextSet)||void 0===n?void 0:n.annotationContext),this.imageHistoryController.pushHistory(this.contextSet.annotationContext.getImageData(0,0,this.width,this.height)),this.selectedLabel=null,this.rectCenter=null):L("Context is null."):L("selectedLabel is null onMouseUp"):L("Circle center is null onMouseUp")}},{key:"onMouseLeave",value:function(){null===this.rectCenter&&this.clearHighlight()}},{key:"drawRectFromCenter",value:function(e,t,n,i){i?null!==this.rectCenter?(i.beginPath(),i.rect(this.rectCenter.x,this.rectCenter.y,e-this.rectCenter.x,t-this.rectCenter.y),i.fillStyle=n.getAnnotationRGBString(),i.globalCompositeOperation=n.isBackground()?"destination-out":"source-over",i.fill(),i.closePath(),i.globalCompositeOperation="source-over"):L("RectCenter is null"):L("Context is null.")}},{key:"drawBackgroundRect",value:function(e,t,n){n?null!==this.rectCenter?(n.beginPath(),n.globalCompositeOperation="source-over",n.fillStyle="black",n.rect(this.rectCenter.x,this.rectCenter.y,e-this.rectCenter.x,t-this.rectCenter.y),n.fill(),n.closePath()):L("RectCenter is null"):L("Context is null.")}},{key:"drawSquare",value:function(e,t,n,i,o){o?(o.beginPath(),o.rect(e-n/2,t-n/2,n,n),o.globalCompositeOperation="source-over",o.fillStyle=i,o.fill(),o.closePath()):L("Context is null.")}}]),n}(re),Ce=function(e){Object(ie.a)(n,e);var t=Object(oe.a)(n);function n(){var e;Object(s.a)(this,n);for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))).lineStartPt=null,e.selectedLabel=null,e}return Object(c.a)(n,[{key:"onMouseDown",value:function(e,t,n){this.lineStartPt={x:e,y:t},this.selectedLabel=n}},{key:"onMouseMove",value:function(e,t,n){var i,o;(this.clearHighlight(),null!==this.lineStartPt)?n.isBackground()?this.drawBackgroundLineFromCenter(e,t,null===(o=this.contextSet)||void 0===o?void 0:o.highlightContext):this.drawLineFromCenter(e,t,n,null===(i=this.contextSet)||void 0===i?void 0:i.highlightContext):this.drawHighlightLine(e,t,n)}},{key:"onMouseUp",value:function(e,t){var n;null!==this.lineStartPt?null!==this.selectedLabel?null!==this.contextSet?(this.drawLineFromCenter(e,t,this.selectedLabel,null===(n=this.contextSet)||void 0===n?void 0:n.annotationContext),this.imageHistoryController.pushHistory(this.contextSet.annotationContext.getImageData(0,0,this.width,this.height)),this.selectedLabel=null,this.lineStartPt=null):L("context is null onMouseUp"):L("selectedLabel is null onMouseUp"):L("Circle center is null onMouseUp")}},{key:"onMouseLeave",value:function(){null===this.lineStartPt&&this.clearHighlight()}},{key:"drawHighlightLine",value:function(e,t,n){var i,o=null===(i=this.contextSet)||void 0===i?void 0:i.highlightContext;o?(o.beginPath(),o.globalCompositeOperation="source-over",o.lineWidth=2*this.brushSize,o.strokeStyle=n.isBackground()?"black":n.getAnnotationRGBString(),o.moveTo(e,t-this.brushSize),o.lineTo(e,t+this.brushSize),o.stroke(),o.closePath()):L("Context is null.")}},{key:"drawLineFromCenter",value:function(e,t,n,i){var o,a;i?null!==this.lineStartPt?(i.beginPath(),i.lineWidth=2*this.brushSize,i.strokeStyle=n.getAnnotationRGBString(),i.globalCompositeOperation=n.isBackground()?"destination-out":"source-over",i.moveTo(null===(o=this.lineStartPt)||void 0===o?void 0:o.x,null===(a=this.lineStartPt)||void 0===a?void 0:a.y),i.lineTo(e,t),i.stroke(),i.closePath(),i.globalCompositeOperation="source-over"):L("lineStartPt is null."):L("Context is null.")}},{key:"drawBackgroundLineFromCenter",value:function(e,t,n){var i,o;n?null!==this.lineStartPt?(n.beginPath(),n.globalCompositeOperation="source-over",n.lineWidth=2*this.brushSize,n.strokeStyle="black",n.moveTo(null===(i=this.lineStartPt)||void 0===i?void 0:i.x,null===(o=this.lineStartPt)||void 0===o?void 0:o.y),n.lineTo(e,t),n.stroke(),n.closePath()):L("lineStartPt is null."):L("Context is null.")}}]),n}(re),Se=function(e){var t=e.annotationManager,n=e.imageInfo,o=e.labelList,a=e.canvasWidth,r=void 0===a?"600px":a,s=e.canvasHeight,c=void 0===s?"600px":s,h=e.labelAreaWidth,u=void 0===h?"300px":h,d=e.labelListHeight,g=void 0===d?"400px":d,b=e.onSaveClick,v=Object(i.useState)(o[0]),x=Object(l.a)(v,2),y=x[0],p=x[1],j=Object(i.useState)(.5),m=Object(l.a)(j,2),O=m[0],C=m[1],S=Object(i.useState)(10),k=Object(l.a)(S,2),w=k[0],I=k[1],M=Object(i.useState)(0),B=Object(l.a)(M,2),A=B[0],E=B[1],T=Object(i.useState)(1),F=Object(l.a)(T,2),z=F[0],R=F[1],D=Object(i.useRef)(1);Object(i.useEffect)((function(){return t.changeMode(new le(t.getContextSet(),w,n.width,n.height,t.getImageHistoryController())),U(O),window.addEventListener("wheel",W,{passive:!1}),function(){return window.removeEventListener("wheel",W)}}),[]);var _={onClick:function(e){p(e),t.setLabel(e)},labelList:o,selectedIndex:y.index},U=function(e){var t=document.getElementById("annotated-layer"),n=document.getElementById("highlight-layer");null!==t?null!==n?(C(e),t.style.opacity=e.toString(),n.style.opacity=e.toString()):L("highlightLayer is null."):L("annotatedLayer is null.")},N=function(e){if(!(e>3.01||e<.099)){var t=document.getElementById("layer-container");null!==t?(t.style.transform="scale(".concat(e,")"),t.style.transformOrigin="left top",R(e),D.current=e):L("layerContainer is null.")}},W=function(e){if(e.ctrlKey){e.preventDefault();var t=e.deltaY;N(t<0?D.current+.1:D.current-.1)}};return Object(H.jsxs)(H.Fragment,{children:[Object(H.jsxs)(P.a,{p:1,css:{height:c,width:r},children:[Object(H.jsx)(ne,{onSaveClick:b,imageInfo:n,annotationManager:t,width:"auto",viewHeight:"536px"}),Object(H.jsx)("div",{style:{paddingTop:"8px"}}),Object(H.jsx)(je,{width:"auto",alpha:O,onAlphaChange:U,brushSize:w,onBrushSizeChange:function(e){I(e),t.getMode().setBrushSize(e)},onModeIndexChange:function(e){var n=t.getMode();0===e?t.changeMode(new le(n.contextSet,n.brushSize,n.width,n.height,t.getImageHistoryController())):1===e?t.changeMode(new ue(n.contextSet,n.brushSize,n.width,n.height,t.getImageHistoryController())):3===e?t.changeMode(new me(n.contextSet,n.brushSize,n.width,n.height,t.getImageHistoryController())):4===e?t.changeMode(new Oe(n.contextSet,n.brushSize,n.width,n.height,t.getImageHistoryController())):5===e&&t.changeMode(new Ce(n.contextSet,n.brushSize,n.width,n.height,t.getImageHistoryController())),E(e)},modeIndex:A,modeValues:ae,zoomRate:z,onZoomIn:function(){return N(z+.1)},onZoomOut:function(){return N(z-.1)},onRedo:function(){return t.getMode().redo()},onUndo:function(){return t.getMode().undo()}})]}),Object(H.jsx)(P.a,{p:1,css:{width:u},children:Object(H.jsx)(Q,Object(f.a)(Object(f.a)({},_),{},{width:"auto",height:g}))})]})},ke=function(e){var t=e.canvasAreaProps,n=e.filePathList,o=e.selectedFileIndex,a=e.infoToastMessage,r=void 0===a?"":a,l=e.isLoading,s=void 0!==l&&l,c=e.errorMessage,h=e.onFileClick,u=e.onSaveShortcut,d=e.onUndoShortcut,g=e.onRedoShortcut,b=e.onInfoToastClose,v=e.onErrorDialogClose,x=function(e){e.ctrlKey&&(e.preventDefault(),"s"===e.key?u():"y"===e.key?g():"z"===e.key&&d())};return Object(i.useEffect)((function(){return document.addEventListener("keydown",x,!1),function(){return document.removeEventListener("keydown",x)}}),[o]),Object(H.jsxs)("div",{style:{width:"100%",height:"900px"},children:[Object(H.jsxs)(P.a,{display:"flex",flexDirection:"column",flexWrap:"wrap",p:1,css:{width:"95%",height:"100%"},children:[Object(H.jsx)(Se,Object(f.a)(Object(f.a)({},t),{},{canvasWidth:"80%",canvasHeight:"100%",labelAreaWidth:"20%",labelListHeight:"300px"})),Object(H.jsx)(P.a,{p:1,css:{height:"400px",width:"20%"},children:Object(H.jsx)(K,{filePathList:n,onClick:h,selectedIndex:o,width:"auto",listHeight:"400px"})})]}),Object(H.jsx)(B,{message:r,open:""!==r,onClose:b}),Object(H.jsx)(E,{open:s,size:120,backgroundColor:"rgba(0,0,0,0)"}),Object(H.jsx)(_,{open:""!==c,title:"Error",message:c,onClose:v})]})},we=window.eel,Pe=function(){function e(t){Object(s.a)(this,e),this.filePath=void 0,this.filePath=t}return Object(c.a)(e,[{key:"getFileName",value:function(){return this.filePath.replace(/^.*[\\\/]/,"")}}]),e}(),Le=function(e){return{type:x,payload:e}},Ie=function(e){if(e<d)throw RangeError("File index must be > 0");return{type:y,payload:e}},Me=function(e){if(e.length<1||e.length>255)throw RangeError("Label list length must be 1 ~ 255");return{type:j,payload:e}},He=function(e){Object(ie.a)(n,e);var t=Object(oe.a)(n);function n(e){return Object(s.a)(this,n),t.call(this,null,1,0,0,e)}return Object(c.a)(n,[{key:"onMouseDown",value:function(e,t,n){"MouseDown: ".concat(e,", ").concat(t,", ").concat(n.index)}},{key:"onMouseMove",value:function(e,t,n){"MouseOver: ".concat(e,", ").concat(t,", ").concat(n.index)}},{key:"onMouseUp",value:function(e,t){"MouseUp: ".concat(e,", ").concat(t)}}]),n}(re),Be=new(function(){function e(){Object(s.a)(this,e),this.label=void 0,this.mode=void 0,this.imageHistoryController=new he(10),this.mode=new He(this.imageHistoryController),this.label=h.backgroundLabel()}return Object(c.a)(e,[{key:"setLabel",value:function(e){this.label=e}},{key:"changeMode",value:function(e){this.mode=e,this.mode.clearModeParams()}},{key:"changeImage",value:function(e,t,n,i){this.mode.setImage(e,t,n,i),this.mode.clearModeParams()}},{key:"setContextSet",value:function(e){this.mode.setContextSet(e)}},{key:"getContextSet",value:function(){return this.mode.getContextSet()}},{key:"toBase64Image",value:function(e){return null===e?"":e.toDataURL("image/png").replace(/^.*,/,"")}},{key:"getMode",value:function(){return this.mode}},{key:"getLabel",value:function(){return this.label}},{key:"getImageHistoryController",value:function(){return this.imageHistoryController}}]),e}()),Ae=function(){var e=Object(i.useContext)(g),t=e.state,n=e.dispatch,o=Object(i.useState)(""),a=Object(l.a)(o,2),r=a[0],s=a[1],c=Object(i.useState)(!1),h=Object(l.a)(c,2),u=h[0],b=h[1],v=Object(i.useState)(""),f=Object(l.a)(v,2),x=f[0],y=f[1],p=Object(i.useState)({fileName:"",imageSrc:null,annotationImgSrc:null,width:400,height:400}),j=Object(l.a)(p,2),m=j[0],O=j[1],C=function(){var e=Object(w.a)(k.a.mark((function e(){var n,i;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.filePathList[t.selectedFilePathIndex],e.next=3,we.save_annotation_result(null===(n=t.saveAnnotationsPath)||void 0===n?void 0:n.filePath,i.getFileName(),Be.toBase64Image(document.getElementById("annotated-layer")),t.labelList.length)();case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),S=function(){var e=Object(w.a)(k.a.mark((function e(t,i){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:b(!0),C().then((function(e){if(!e)return L("save annotation onFileRowClick result is false"),void y("Save annotation result is failed.")})).catch((function(e){L("Save annotation result is failed onFileRowClick. "+e.message),y("Save annotation result is failed.")})).finally((function(){n(Ie(i)),b(!1)}));case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),P=function(){b(!0),C().then((function(e){if(!e)return L("save annotation onSaveClick result is false"),void y("Save annotation result is failed. Result image is null.");s("Saved!")})).catch((function(e){L("Save annotation result is failed onSaveClick. "+e.message),y("Save annotation result is failed.")})).finally((function(){b(!1)}))},I=function(){var e=Object(w.a)(k.a.mark((function e(){var i,o,a;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,we.load_filepath_list(null===(i=t.imagesPath)||void 0===i?void 0:i.filePath)();case 2:if(null!==(o=e.sent)){e.next=7;break}return L("filepathlist null"),y("Load filepath list is failed. filepathList is null"),e.abrupt("return");case 7:a=o.map((function(e){return new Pe(e)})),n(Le(a));case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(i.useEffect)((function(){b(!0),I().then((function(){n(Ie(0))})).catch((function(e){L("loadFilePathList error. "+e.message),y("Load filepath is failed.")})).finally((function(){b(!1)}))}),[]),Object(i.useEffect)((function(){var e;if(t.selectedFilePathIndex!==d){b(!0);var n=t.filePathList[t.selectedFilePathIndex];we.load_img_and_annotation_and_width_height(n.filePath,null===(e=t.saveAnnotationsPath)||void 0===e?void 0:e.filePath)().then((function(e){if(null===e)return L("imageinfo is null"),void y("Load image is failed.");O({fileName:n.getFileName(),imageSrc:e[0],annotationImgSrc:e[1],width:e[2],height:e[3]})})).catch((function(e){L("Error on load image. "+e.message),y("Load image is failed.")})).finally((function(){b(!1)}))}else b(!1)}),[t.selectedFilePathIndex]);var M={annotationManager:Be,imageInfo:m,labelList:t.labelList,onSaveClick:P};return Object(H.jsx)(ke,{canvasAreaProps:M,filePathList:t.filePathList,selectedFileIndex:t.selectedFilePathIndex,infoToastMessage:r,isLoading:u,errorMessage:x,onFileClick:S,onSaveShortcut:P,onRedoShortcut:function(){return Be.getMode().redo()},onUndoShortcut:function(){return Be.getMode().undo()},onInfoToastClose:function(){return s("")},onErrorDialogClose:function(){return y("")}})},Ee=n(168),Te=n(83),Fe=n.n(Te),ze=n(176),Re=function(e){var t=e.textFieldWidth,n=void 0===t?"150px":t,o=e.onSubmit,a=Object(i.useState)(""),r=Object(l.a)(a,2),s=r[0],c=r[1],h=function(){""!==s&&(o(s),c(""))};return Object(H.jsxs)(H.Fragment,{children:[Object(H.jsx)(ze.a,{onKeyPress:function(e){"Enter"===e.key&&h()},value:s,type:"text",margin:"normal",onChange:function(e){return c(e.target.value)},style:{width:n}}),Object(H.jsx)(Ee.a,{onClick:h,size:"small",color:"primary",children:Object(H.jsx)(Fe.a,{})})]})},De=function(e){var t=e.label,n=void 0===t?"file path":t,i=e.fieldWidth,o=void 0===i?"200px":i,a=e.filePath,r=e.onChange,l=e.onButtonClick;return Object(H.jsxs)(H.Fragment,{children:[Object(H.jsx)(ze.a,{error:""===a,margin:"none",type:"text",label:n,defaultValue:a,onChange:function(e){r(e.target.value)},value:a,style:{verticalAlign:"top",width:o}}),Object(H.jsx)(q.a,{size:"small",variant:"contained",color:"primary",onClick:function(e){return l(a)},style:{verticalAlign:"bottom",paddingLeft:"10px",paddingRight:"10px",minWidth:"0px"},children:"...\xa0"})]})},_e=function(e){var t=e.children;return Object(H.jsxs)(H.Fragment,{children:[Object(H.jsx)(U.a,{variant:"h3",component:"h1",gutterBottom:!1,children:t}),Object(H.jsx)(G.a,{})]})},Ue=function(e){var t=e.title,n=e.message,i=e.open,o=e.onClose;return Object(H.jsxs)(T.a,{"aria-labelledby":"modal-title","aria-describedby":"modal-description",open:i,onClose:function(){return o()},children:[Object(H.jsx)(F.a,{id:"modal-title",children:t}),Object(H.jsx)(z.a,{children:Object(H.jsx)(R.a,{id:"modal-description",children:n})})]})},Ne=function(e){return{textTransform:"none",width:e}},We=function(e){var t=e.annotationPath,n=e.onAnnotationPathChooseClick,i=e.onAnnotationPathChanged,o=e.imagesPath,a=e.onImagesPathChooseClick,r=e.onImagesPathChanged,l=e.labelList,s=e.onLabelAdded,c=e.onSaveLabelClick,h=e.onLoadLabelClick,u=e.onSubmit,g=e.infoModalProps,b=e.errorModalProps,v={height:"400px",selectedIndex:d,onClick:function(e){},labelList:l},x={fieldWidth:"80%",label:"Annotation result directory",filePath:t,onChange:function(e){return i(e)},onButtonClick:n},y={fieldWidth:"80%",label:"Images directory",filePath:o,onChange:function(e){return r(e)},onButtonClick:a},p=Object(H.jsx)(q.a,{onClick:function(){return u(o,t)},variant:"contained",color:"primary",style:{paddingTop:"15px",paddingBottom:"15px",fontSize:"1.2em",width:"200px",textTransform:"none",position:"fixed",right:"50px",bottom:"50px"},children:Object(H.jsx)("span",{children:"Start annotation"})});return Object(H.jsxs)("div",{children:[Object(H.jsx)(_e,{children:"Label Setting"}),Object(H.jsxs)(X.a,{container:!0,spacing:3,style:{padding:"30px"},children:[Object(H.jsxs)(X.a,{item:!0,xs:6,children:[Object(H.jsx)(Re,{onSubmit:s,textFieldWidth:"300px"}),Object(H.jsx)(Q,Object(f.a)(Object(f.a)({},v),{},{width:"100%"})),Object(H.jsxs)(X.a,{container:!0,style:{textAlign:"center",marginTop:"40px"},children:[Object(H.jsx)(X.a,{item:!0,xs:6,children:Object(H.jsx)(q.a,{style:Ne("250px"),onClick:c,variant:"contained",color:"primary",children:"Save labels"})}),Object(H.jsx)(X.a,{item:!0,xs:6,children:Object(H.jsx)(q.a,{style:Ne("250px"),onClick:h,variant:"contained",color:"primary",children:"Load labels"})})]})]}),Object(H.jsxs)(X.a,{item:!0,xs:4,style:{marginTop:"50px",textAlign:"center"},spacing:3,justify:"center",children:[Object(H.jsx)(X.a,{item:!0,xs:12,children:Object(H.jsx)(De,Object(f.a)({},y))}),Object(H.jsx)("p",{style:{marginBottom:"150px"}}),Object(H.jsx)(X.a,{item:!0,xs:12,children:Object(H.jsx)(De,Object(f.a)({},x))})]})]}),p,Object(H.jsx)(Ue,Object(f.a)({},g)),Object(H.jsx)(_,Object(f.a)({},b))]})},Ge=function(){var e=Object(i.useContext)(g),t=e.state,n=e.dispatch,o=Object(i.useState)(""),a=Object(l.a)(o,2),r=a[0],s=a[1],c=Object(i.useState)(""),u=Object(l.a)(c,2),d=u[0],b=u[1],v=Object(i.useState)(""),f=Object(l.a)(v,2),x=f[0],y=f[1],j=Object(i.useState)(""),m=Object(l.a)(j,2),C=m[0],S=m[1],P=function(){var e=Object(w.a)(k.a.mark((function e(){var t,i;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,we.load_labels_from_file()();case 2:if(null!==(t=e.sent)&&void 0!==t){e.next=7;break}return L("no annotations filepath"),y("Error occurred on load label."),e.abrupt("return");case 7:t.splice(0,0,"background"),i=t.map((function(e,t){return new h(t,e)})),n(Me(i));case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),I=function(){var e=Object(w.a)(k.a.mark((function e(){var n,i;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.labelList.map((function(e){return e.name})),e.next=3,we.save_labels_to_file(n.slice(1))();case 3:if(null!==(i=e.sent)&&void 0!==i){e.next=8;break}return L("Save label response is null or undefined: "+i),y("Error occurred on save label."),e.abrupt("return");case 8:S("Save label is succeeded.");case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),M=function(){var e=Object(w.a)(k.a.mark((function e(t,i){var o,a;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==t&&""!==i){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,we.is_directory_path_exist(t)();case 5:return o=e.sent,e.next=8,we.is_directory_path_exist(i)();case 8:if(a=e.sent,o){e.next=12;break}return y("Images directory path is not exists."),e.abrupt("return");case 12:if(a){e.next=15;break}return y("Annotation directory path is not exists."),e.abrupt("return");case 15:n((r={initialSettingFinished:!0,annotationPath:new Pe(i),imagesPath:new Pe(t)},{type:O,payload:r}));case 16:case"end":return e.stop()}var r}),e)})));return function(t,n){return e.apply(this,arguments)}}(),B=function(){var e=Object(w.a)(k.a.mark((function e(){var t;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,we.choose_directory()();case 2:if(null!==(t=e.sent)){e.next=5;break}return e.abrupt("return");case 5:s(t);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),A=function(){var e=Object(w.a)(k.a.mark((function e(){var t;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,we.choose_directory()();case 2:if(null!==(t=e.sent)){e.next=5;break}return e.abrupt("return");case 5:b(t);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),E={title:"Result",message:C,open:""!==C,onClose:function(){S("")}},T={title:"Error",message:x,open:""!==x,onClose:function(){y("")}};return Object(H.jsx)(We,{annotationPath:d,imagesPath:r,onAnnotationPathChooseClick:A,onImagesPathChooseClick:B,onAnnotationPathChanged:function(e){return b(e)},onImagesPathChanged:function(e){return s(e)},labelList:t.labelList,onLabelAdded:function(e){return n(function(e){return{type:p,payload:e}}(e))},onLoadLabelClick:P,onSaveLabelClick:I,onSubmit:M,infoModalProps:E,errorModalProps:T})},Ve=n(170),Ye=n(84),Ze=n(68),Ke=n(169),Xe=Object(Ye.a)({palette:{primary:{main:Ze.a[500]},secondary:{main:Ke.a[500]}}});var qe=function(){var e=Object(i.useReducer)(C,b),t=Object(l.a)(e,2),n=t[0],o=t[1];return Object(H.jsx)(Ve.a,{theme:Xe,children:Object(H.jsx)(g.Provider,{value:{state:n,dispatch:o},children:n.initialSettingFinished?Object(H.jsx)("div",{className:"root-container",children:Object(H.jsx)(Ae,{})}):Object(H.jsx)("div",{className:"initial-setting-container",children:Object(H.jsx)(Ge,{})})})})},Je=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,182)).then((function(t){var n=t.getCLS,i=t.getFID,o=t.getFCP,a=t.getLCP,r=t.getTTFB;n(e),i(e),o(e),a(e),r(e)}))};r.a.render(Object(H.jsx)(o.a.StrictMode,{children:Object(H.jsx)(qe,{})}),document.getElementById("root")),Je()}},[[117,1,2]]]);
//# sourceMappingURL=main.77c88601.chunk.js.map