import{c as x}from"./common/_commonjsHelpers-4f955397.js";var $=i=>encodeURIComponent(i).replace(/[!'()*]/g,c=>`%${c.charCodeAt(0).toString(16).toUpperCase()}`),A="%[a-f0-9]{2}",C=new RegExp(A,"gi"),E=new RegExp("("+A+")+","gi");function o(i,c){try{return decodeURIComponent(i.join(""))}catch(F){}if(i.length===1)return i;c=c||1;var u=i.slice(0,c),l=i.slice(c);return Array.prototype.concat.call([],o(u),o(l))}function I(i){try{return decodeURIComponent(i)}catch(l){for(var c=i.match(C),u=1;u<c.length;u++)i=o(c,u).join(""),c=i.match(C);return i}}function D(i){for(var c={"%FE%FF":"\uFFFD\uFFFD","%FF%FE":"\uFFFD\uFFFD"},u=E.exec(i);u;){try{c[u[0]]=decodeURIComponent(u[0])}catch(m){var l=I(u[0]);l!==u[0]&&(c[u[0]]=l)}u=E.exec(i)}c["%C2"]="\uFFFD";for(var F=Object.keys(c),y=0;y<F.length;y++){var s=F[y];i=i.replace(new RegExp(s,"g"),c[s])}return i}var R=function(i){if(typeof i!="string")throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof i+"`");try{return i=i.replace(/\+/g," "),decodeURIComponent(i)}catch(c){return D(i)}},w=(i,c)=>{if(!(typeof i=="string"&&typeof c=="string"))throw new TypeError("Expected the arguments to be of type `string`");if(c==="")return[i];const u=i.indexOf(c);return u===-1?[i]:[i.slice(0,u),i.slice(u+c.length)]},q=function(i,c){for(var u={},l=Object.keys(i),F=Array.isArray(c),y=0;y<l.length;y++){var s=l[y],m=i[s];(F?c.indexOf(s)!==-1:c(s,m,i))&&(u[s]=m)}return u},M=x(function(i,c){const u=r=>r==null;function l(r){switch(r.arrayFormat){case"index":return e=>(n,t)=>{const a=n.length;return t===void 0||r.skipNull&&t===null||r.skipEmptyString&&t===""?n:t===null?[...n,[s(e,r),"[",a,"]"].join("")]:[...n,[s(e,r),"[",s(a,r),"]=",s(t,r)].join("")]};case"bracket":return e=>(n,t)=>t===void 0||r.skipNull&&t===null||r.skipEmptyString&&t===""?n:t===null?[...n,[s(e,r),"[]"].join("")]:[...n,[s(e,r),"[]=",s(t,r)].join("")];case"comma":case"separator":case"bracket-separator":{const e=r.arrayFormat==="bracket-separator"?"[]=":"=";return n=>(t,a)=>a===void 0||r.skipNull&&a===null||r.skipEmptyString&&a===""?t:(a=a===null?"":a,t.length===0?[[s(n,r),e,s(a,r)].join("")]:[[t,s(a,r)].join(r.arrayFormatSeparator)])}default:return e=>(n,t)=>t===void 0||r.skipNull&&t===null||r.skipEmptyString&&t===""?n:t===null?[...n,s(e,r)]:[...n,[s(e,r),"=",s(t,r)].join("")]}}function F(r){let e;switch(r.arrayFormat){case"index":return(n,t,a)=>{if(e=/\[(\d*)\]$/.exec(n),n=n.replace(/\[\d*\]$/,""),!e){a[n]=t;return}a[n]===void 0&&(a[n]={}),a[n][e[1]]=t};case"bracket":return(n,t,a)=>{if(e=/(\[\])$/.exec(n),n=n.replace(/\[\]$/,""),!e){a[n]=t;return}if(a[n]===void 0){a[n]=[t];return}a[n]=[].concat(a[n],t)};case"comma":case"separator":return(n,t,a)=>{const d=typeof t=="string"&&t.includes(r.arrayFormatSeparator),f=typeof t=="string"&&!d&&m(t,r).includes(r.arrayFormatSeparator);t=f?m(t,r):t;const g=d||f?t.split(r.arrayFormatSeparator).map(U=>m(U,r)):t===null?t:m(t,r);a[n]=g};case"bracket-separator":return(n,t,a)=>{const d=/(\[\])$/.test(n);if(n=n.replace(/\[\]$/,""),!d){a[n]=t&&m(t,r);return}const f=t===null?[]:t.split(r.arrayFormatSeparator).map(g=>m(g,r));if(a[n]===void 0){a[n]=f;return}a[n]=[].concat(a[n],f)};default:return(n,t,a)=>{if(a[n]===void 0){a[n]=t;return}a[n]=[].concat(a[n],t)}}}function y(r){if(typeof r!="string"||r.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function s(r,e){return e.encode?e.strict?$(r):encodeURIComponent(r):r}function m(r,e){return e.decode?R(r):r}function h(r){return Array.isArray(r)?r.sort():typeof r=="object"?h(Object.keys(r)).sort((e,n)=>Number(e)-Number(n)).map(e=>r[e]):r}function b(r){const e=r.indexOf("#");return e!==-1&&(r=r.slice(0,e)),r}function N(r){let e="";const n=r.indexOf("#");return n!==-1&&(e=r.slice(n)),e}function O(r){r=b(r);const e=r.indexOf("?");return e===-1?"":r.slice(e+1)}function j(r,e){return e.parseNumbers&&!Number.isNaN(Number(r))&&typeof r=="string"&&r.trim()!==""?r=Number(r):e.parseBooleans&&r!==null&&(r.toLowerCase()==="true"||r.toLowerCase()==="false")&&(r=r.toLowerCase()==="true"),r}function S(r,e){e=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},e),y(e.arrayFormatSeparator);const n=F(e),t=Object.create(null);if(typeof r!="string"||(r=r.trim().replace(/^[?#&]/,""),!r))return t;for(const a of r.split("&")){if(a==="")continue;let[d,f]=w(e.decode?a.replace(/\+/g," "):a,"=");f=f===void 0?null:["comma","separator","bracket-separator"].includes(e.arrayFormat)?f:m(f,e),n(m(d,e),f,t)}for(const a of Object.keys(t)){const d=t[a];if(typeof d=="object"&&d!==null)for(const f of Object.keys(d))d[f]=j(d[f],e);else t[a]=j(d,e)}return e.sort===!1?t:(e.sort===!0?Object.keys(t).sort():Object.keys(t).sort(e.sort)).reduce((a,d)=>{const f=t[d];return Boolean(f)&&typeof f=="object"&&!Array.isArray(f)?a[d]=h(f):a[d]=f,a},Object.create(null))}c.extract=O,c.parse=S,c.stringify=(r,e)=>{if(!r)return"";e=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},e),y(e.arrayFormatSeparator);const n=f=>e.skipNull&&u(r[f])||e.skipEmptyString&&r[f]==="",t=l(e),a={};for(const f of Object.keys(r))n(f)||(a[f]=r[f]);const d=Object.keys(a);return e.sort!==!1&&d.sort(e.sort),d.map(f=>{const g=r[f];return g===void 0?"":g===null?s(f,e):Array.isArray(g)?g.length===0&&e.arrayFormat==="bracket-separator"?s(f,e)+"[]":g.reduce(t(f),[]).join("&"):s(f,e)+"="+s(g,e)}).filter(f=>f.length>0).join("&")},c.parseUrl=(r,e)=>{e=Object.assign({decode:!0},e);const[n,t]=w(r,"#");return Object.assign({url:n.split("?")[0]||"",query:S(O(r),e)},e&&e.parseFragmentIdentifier&&t?{fragmentIdentifier:m(t,e)}:{})},c.stringifyUrl=(r,e)=>{e=Object.assign({encode:!0,strict:!0},e);const n=b(r.url).split("?")[0]||"",t=c.extract(r.url),a=c.parse(t,{sort:!1}),d=Object.assign(a,r.query);let f=c.stringify(d,e);f&&(f=`?${f}`);let g=N(r.url);return r.fragmentIdentifier&&(g=`#${s(r.fragmentIdentifier,e)}`),`${n}${f}${g}`},c.pick=(r,e,n)=>{n=Object.assign({parseFragmentIdentifier:!0},n);const{url:t,query:a,fragmentIdentifier:d}=c.parseUrl(r,n);return c.stringifyUrl({url:t,query:q(a,e),fragmentIdentifier:d},n)},c.exclude=(r,e,n)=>{const t=Array.isArray(e)?a=>!e.includes(a):(a,d)=>!e(a,d);return c.pick(r,t,n)}});export default M;
