function O(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,t)}return r}function u(e){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?O(Object(r),!0).forEach(function(t){I(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):O(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function I(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}import w,{Pages as o}from"../routes/index.js";import{useEffect as b,useMemo as y,useState as _}from"../../web_modules/react.js";import P from"../utils/event.js";import R from"./useRequest.js";import{useTranslation as x}from"../../web_modules/react-i18next.js";export const navMap={scalar:o.Scalar,histogram:o.Histogram,image:o.Image,audio:o.Audio,text:o.Text,graph:o.Graph,embeddings:o.HighDimensional,pr_curve:o.PRCurve,roc_curve:o.ROCCurve,hyper_parameters:o.HyperParameter};const C=()=>{const{t:e}=x("common"),[n,r]=_(15*1e3),{data:t,loading:a,error:g,mutate:c}=R("/components",{refreshInterval:n,dedupingInterval:14*1e3,errorRetryInterval:15*1e3,errorRetryCount:Number.POSITIVE_INFINITY,revalidateOnFocus:!0,revalidateOnReconnect:!0,refreshWhenHidden:!1,refreshWhenOffline:!1});b(()=>(P.on("refresh",c),()=>{P.off("refresh",c)}),[c]);const m=y(()=>{var i;return(i=t==null?void 0:t.map(f=>navMap[f]))!==null&&i!==void 0?i:[]},[t]),l=y(()=>{const i=(f,p)=>{const j=p?e(p.id)+" - ":"";return f.reduce((d,s)=>{const h=j+e(s.id);if(s.children){const v=i(s.children,s);v.length&&d.push(u(u({},s),{},{name:h,children:v}))}else s.visible!==!1&&d.push(u(u({},s),{},{inactive:!m.includes(s.id),name:h,children:void 0}));return d},[])};return i(w)},[m,e]);return b(()=>r((l.length?61:15)*1e3),[l]),[l,a,g]};export default C;
