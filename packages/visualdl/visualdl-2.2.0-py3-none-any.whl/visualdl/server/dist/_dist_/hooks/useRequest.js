function m(r,o){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(r);o&&(e=e.filter(function(n){return Object.getOwnPropertyDescriptor(r,n).enumerable})),t.push.apply(t,e)}return t}function s(r){for(var o=1;o<arguments.length;o++){var t=arguments[o]!=null?arguments[o]:{};o%2?m(Object(t),!0).forEach(function(e){I(r,e,t[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):m(Object(t)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(t,e))})}return r}function I(r,o,t){return o in r?Object.defineProperty(r,o,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[o]=t,r}function h(r,o){if(r==null)return{};var t=R(r,o),e,n;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);for(n=0;n<i.length;n++)e=i[n],!(o.indexOf(e)>=0)&&(!Object.prototype.propertyIsEnumerable.call(r,e)||(t[e]=r[e]))}return t}function R(r,o){if(r==null)return{};var t={},e=Object.keys(r),n,i;for(i=0;i<e.length;i++)n=e[i],!(o.indexOf(n)>=0)&&(t[n]=r[n]);return t}import{useEffect as O,useMemo as g}from"../../web_modules/react.js";import j from"../utils/event.js";import{toast as b}from"../../web_modules/react-toastify.js";import E from"../../web_modules/swr.js";function P(...r){const o=r[0],t=E(...r),{data:e,error:n}=t,i=h(t,["data","error"]),u=g(()=>!!o&&e===void 0&&!n,[o,e,n]);return O(()=>{n&&b(n.message,{position:b.POSITION.TOP_CENTER,type:b.TYPE.ERROR})},[n]),s({data:e,error:n,loading:u},i)}function S(...r){const[o,t,...e]=r;let n,i;e.length>1?(n=e[0],i=e[1]):e[0]!=null&&(typeof e[0]=="object"?i=e[0]:typeof e[0]=="function"&&(n=e[0]));const u=g(()=>{var l,c,a,p,v,d;return s(s({},i),{},{refreshInterval:t?(l=(c=i)===null||c===void 0?void 0:c.refreshInterval)!==null&&l!==void 0?l:15*1e3:0,dedupingInterval:(a=(p=i)===null||p===void 0?void 0:p.refreshInterval)!==null&&a!==void 0?a:15*1e3,errorRetryInterval:(v=(d=i)===null||d===void 0?void 0:d.refreshInterval)!==null&&v!==void 0?v:15*1e3})},[i,t]),_=g(()=>n===void 0?[o,u]:[o,n,u],[o,n,u]),y=P(..._),{mutate:f}=y,w=h(y,["mutate"]);return O(()=>{t&&f()},[t,f]),O(()=>(j.on("refresh",f),()=>{j.off("refresh",f)}),[f]),s({mutate:f},w)}export default P;export{S as useRunningRequest};
