import F,{AsideSection as I}from"../components/Aside.js";import e,{useCallback as T,useMemo as o,useState as g}from"../../web_modules/react.js";import{asideWidth as H,rem as D}from"../utils/style.js";import{filter as S,format as B,formatIndicators as j}from"../resource/hyper-parameter/index.js";import q from"../components/BodyLoading.js";import E from"../components/Button.js";import L from"../components/Content.js";import W from"../components/HyperParameterPage/Empty.js";import k from"../components/Field.js";import $ from"../components/HyperParameterPage/IndicatorFilter/IndicatorFilter.js";import A from"../components/HyperParameterPage/ParallelCoordinatesView/index.js";import M from"../components/HyperParameterPage/ScatterPlotMatrixView/index.js";import N from"../components/Tab.js";import R from"../components/HyperParameterPage/TableView/index.js";import U from"../components/Title.js";import z from"../../web_modules/query-string.js";import G from"../utils/saveFile.js";import u from"../../web_modules/styled-components.js";import v from"../hooks/useRequest.js";import{useTranslation as J}from"../../web_modules/react-i18next.js";H;const K=u.div.withConfig({displayName:"hyper-parameter__DownloadButtons",componentId:"sc-8txuf7-0"})(["display:flex;justify-content:space-between;align-items:center;> *{flex-grow:1;&:not(:last-child){margin-right:",";}}"],D(16)),O=u.div.withConfig({displayName:"hyper-parameter__HPWrapper",componentId:"sc-8txuf7-1"})(["width:100%;height:100%;display:flex;flex-direction:column;justify-content:stretch;align-items:stretch;"]),Q=u.div.withConfig({displayName:"hyper-parameter__ViewWrapper",componentId:"sc-8txuf7-2"})(["width:100%;flex-grow:1;position:relative;"]),X=()=>{const{t:a}=J(["hyper-parameter","common"]),{data:r,loading:f}=v("/hparams/indicators"),b=o(()=>{if(r){const{hparams:t,metrics:i}=r;return t.length===0||i.length===0}return!0},[r]),n=o(()=>{var t,i;return[...j((t=r==null?void 0:r.hparams)!==null&&t!==void 0?t:[],"hparams"),...j((i=r==null?void 0:r.metrics)!==null&&i!==void 0?i:[],"metrics")]},[r]),{data:s,loading:h}=v("/hparams/list"),[l,x]=g(n),m=o(()=>S(s!=null?s:[],l),[l,s]),w=o(()=>B(m,n),[m,n]),P=o(()=>f||h,[f,h]),y=o(()=>["table","parallel-coordinates","scatter-plot-matrix"].map(t=>({value:t,label:a(`hyper-parameter:views.${t}`)})),[a]),[d,C]=g(y[0].value),c=o(()=>({indicators:l,list:w,data:m}),[l,m,w]),V=o(()=>{switch(d){case"table":return e.createElement(R,c);case"parallel-coordinates":return e.createElement(A,c);case"scatter-plot-matrix":return e.createElement(M,c);default:return null}},[d,c]),p=T(t=>G(z.stringifyUrl({url:"/hparams/data",query:{type:t}}),`visualdl-hyper-parameters.${t}`),[]),_=o(()=>e.createElement(F,{bottom:e.createElement(e.Fragment,null,e.createElement(I,null,e.createElement(k,{label:a("common:download-data")},e.createElement(K,null,e.createElement(E,{rounded:!0,outline:!0,onClick:()=>p("csv")},a("common:download-data-format",{format:"CSV"})),e.createElement(E,{rounded:!0,outline:!0,onClick:()=>p("tsv")},a("common:download-data-format",{format:"TSV"}))))))},e.createElement($,{indicators:n,onChange:x})),[p,n,a]);return e.createElement(e.Fragment,null,e.createElement(U,null,a("common:hyper-parameter")),e.createElement(L,{aside:_},P?e.createElement(q,null):null,e.createElement(O,null,e.createElement(N,{list:y,value:d,onChange:C}),e.createElement(Q,null,b?e.createElement(W,null):V))))};export default X;
