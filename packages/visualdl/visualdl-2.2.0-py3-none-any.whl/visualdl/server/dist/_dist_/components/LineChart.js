function C(e,i){if(e==null)return{};var t=N(e,i),o,r;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)o=l[r],!(i.indexOf(o)>=0)&&(!Object.prototype.propertyIsEnumerable.call(e,o)||(t[o]=e[o]))}return t}function N(e,i){if(e==null)return{};var t={},o=Object.keys(e),r,l;for(l=0;l<o.length;l++)r=o[l],!(i.indexOf(r)>=0)&&(t[r]=e[r]);return t}import*as x from"../utils/chart.js";import u,{useEffect as S,useImperativeHandle as k}from"../../web_modules/react.js";import{primaryColor as I}from"../utils/style.js";import P,{Wrapper as T,useChartTheme as R}from"../hooks/useECharts.js";import W from"../../web_modules/react-spinners/GridLoader.js";import m from"../../web_modules/lodash/defaultsDeep.js";import{formatTime as y}from"../utils/index.js";import{useTranslation as $}from"../../web_modules/react-i18next.js";export let XAxisType;(function(e){e.value="value",e.log="log",e.time="time"})(XAxisType||(XAxisType={}));export let YAxisType;(function(e){e.value="value",e.log="log"})(YAxisType||(YAxisType={}));const D=u.forwardRef(({options:e,data:i,title:t,loading:o,zoom:r,className:l,onInit:b},j)=>{const{i18n:c}=$(),{ref:O,echart:a,wrapper:w,saveAsImage:A}=P({loading:!!o,zoom:r,autoFit:!0,onInit:b}),h=R();return k(j,()=>({restore:()=>{a==null||a.dispatchAction({type:"restore"})},saveAsImage:()=>{A(t)}})),S(()=>{var f,p;const{color:g,colorAlt:G,series:_}=x,L=C(x,["color","colorAlt","series"]);let n=m({title:{text:t!=null?t:""},xAxis:{splitLine:{show:!1},splitNumber:5},yAxis:{splitNumber:4},series:i==null?void 0:i.map((s,E)=>{var d,v;return m({showSymbol:((d=s==null||(v=s.data)===null||v===void 0?void 0:v.length)!==null&&d!==void 0?d:0)<=1,type:"line"},s,{lineStyle:{color:g[E%g.length],width:1.5}},_)})},e,h,L);((f=n)===null||f===void 0?void 0:f.xAxis).type==="time"&&(n=m({xAxis:{axisLabel:{formatter:s=>y(s,c.language,"LTS")}}},n)),((p=n)===null||p===void 0?void 0:p.yAxis).type==="time"&&(n=m({yAxis:{axisLabel:{formatter:s=>y(s,c.language,"LTS")}}},n)),a==null||a.setOption(n,{notMerge:!0})},[e,i,t,h,c.language,a]),u.createElement(T,{ref:w,className:l},!a&&u.createElement("div",{className:"loading"},u.createElement(W,{color:I,size:"10px"})),u.createElement("div",{className:"echarts",ref:O}))});export default D;
