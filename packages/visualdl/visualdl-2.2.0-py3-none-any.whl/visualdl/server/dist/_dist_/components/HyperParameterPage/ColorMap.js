import*as v from"../../../web_modules/d3.js";import{COLOR_MAP as c,getColorScale as g}from"../../resource/hyper-parameter/index.js";import t,{useEffect as E,useMemo as s,useState as b}from"../../../web_modules/react.js";import j from"./BorderLessSelect.js";import{rem as p}from"../../utils/style.js";import w from"../../../web_modules/styled-components.js";const B=w.div.withConfig({displayName:"ColorMap__Wrapper",componentId:"sc-10iveh0-0"})(["width:",";margin-left:",";display:flex;flex-direction:column;.color-by{flex:none;margin-bottom:1em;}.color-indicator{flex:auto;display:flex;color:var(--text-light-color);.indicator-image{flex:none;width:1em;background-image:linear-gradient(0deg,"," 0%,"," 50%,"," 100%);margin:0.5em 0;}.indicator-text{flex:auto;display:flex;flex-direction:column-reverse;justify-content:space-between;margin-left:0.5em;}}"],p(88),p(20),c[0],c[1],c[2]),_=({indicators:r,data:l,onChange:n})=>{var a;const d=s(()=>r.filter(e=>e.type==="continuous").map(e=>e.name),[r]),[m,u]=b((a=d[0])!==null&&a!==void 0?a:null),o=s(()=>r.find(e=>e.name===m),[m,r]),f=s(()=>o?v.extent(l.map(e=>+e[o.group][o.name])).map(e=>Math.round((e!=null?e:0)*1e3)/1e3):[0,0],[o,l]);return E(()=>{const e=g(o!=null?o:null,l),i=l.map((y,x)=>e(o?y[o.group][o.name]:x));n==null||n(i)},[o,l,n]),t.createElement(B,{className:"color-map"},t.createElement("div",{className:"color-by"},t.createElement(j,{list:d,value:m,onChange:u})),t.createElement("div",{className:"color-indicator"},t.createElement("div",{className:"indicator-image"}),t.createElement("div",{className:"indicator-text"},f.map((e,i)=>t.createElement("span",{key:i},e!=null?e:"")))))};export default _;
