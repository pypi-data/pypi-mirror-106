let m=e=>e,$,L,N,q,T;function A(e,o){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);o&&(c=c.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,c)}return r}function D(e){for(var o=1;o<arguments.length;o++){var r=arguments[o]!=null?arguments[o]:{};o%2?A(Object(r),!0).forEach(function(c){Q(e,c,r[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):A(Object(r)).forEach(function(c){Object.defineProperty(e,c,Object.getOwnPropertyDescriptor(r,c))})}return e}function Q(e,o,r){return o in e?Object.defineProperty(e,o,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[o]=r,e}import u,{useCallback as g,useEffect as U,useMemo as w,useState as z}from"../../web_modules/react.js";import{borderRadius as M,borderRadiusShortHand as S,css as h,ellipsis as B,em as x,math as X,sameBorder as Y,size as E,transitionProps as v,zIndexes as Z}from"../utils/style.js";import V from"./Checkbox.js";import ee from"./Icon.js";import b from"../../web_modules/styled-components.js";import te from"../hooks/useClickOutside.js";import{useTranslation as oe}from"../../web_modules/react-i18next.js";import re from"../../web_modules/lodash/without.js";export const padding=x(10),height=x(36);const ne=b.div.withConfig({displayName:"Select__Wrapper",componentId:"sc-1rc4rcq-0"})(["--height:",";--padding:",";height:var(--height);line-height:calc(var(--height) - 2px);max-width:100%;display:inline-block;position:relative;background-color:var(--background-color);"," "," "," &:hover{border-color:var(--border-focused-color);}"],height,padding,Y({radius:!0}),e=>e.opened?S("bottom","0"):"",v("border-color","background-color")),le=b.div.withConfig({displayName:"Select__Trigger",componentId:"sc-1rc4rcq-1"})(["padding:var(--padding);display:inline-flex;"," justify-content:space-between;align-items:center;cursor:pointer;"," ",""],E("100%"),e=>e.selected?"":"color: var(--text-lighter-color)",v("color")),ce=b(ee).withConfig({displayName:"Select__TriggerIcon",componentId:"sc-1rc4rcq-2"})([""," text-align:center;display:block;flex-shrink:0;transform:rotate(","deg) scale(",");",""],E(x(14)),e=>e.opened?"180":"0",10/14,v("transform")),ie=b.span.withConfig({displayName:"Select__Label",componentId:"sc-1rc4rcq-3"})(["flex-grow:1;padding-right:",";line-height:1;",""],x(10),B()),se=b.div.withConfig({displayName:"Select__List",componentId:"sc-1rc4rcq-4"})(["position:absolute;"," width:calc(100% + 2px);max-height:",";overflow-x:hidden;overflow-y:auto;left:-1px;padding:"," 0;border:inherit;display:",";z-index:",";line-height:1;background-color:inherit;"," ",""],e=>e.direction==="top"?D({bottom:"100%",borderBottomColor:"var(--border-color)",boxShadow:"0 -5px 6px 0 rgba(0, 0, 0, 0.05)"},S("top",M)):D({top:"100%",borderTopColor:"var(--border-color)",boxShadow:"0 5px 6px 0 rgba(0, 0, 0, 0.05)"},S("bottom",M)),X(`4.35 * ${height} + 2 * ${padding}`),padding,e=>e.opened?"block":"none",Z.component,v(["border-color","color"]),e=>e.empty?{color:"var(--text-lighter-color)",textAlign:"center"}:""),R=h($||($=m`
    display: block;
    cursor: pointer;
    padding: 0 ${0};
    ${0}
    line-height: ${0};
    ${0}
`),padding,E(height,"100%"),height,v(["color","background-color"])),W=h(L||(L=m`
    &:hover {
        background-color: var(--background-focused-color);
    }
`)),de=b.div.withConfig({displayName:"Select__ListItem",componentId:"sc-1rc4rcq-5"})([""," "," "," ",""],B(),R,e=>e.disabled?h(N||(N=m`
                cursor: not-allowed;
            `)):W,e=>{if(e.selected)return h(q||(q=m`
                color: var(--select-selected-text-color);
            `));if(e.disabled)return h(T||(T=m`
                color: var(--text-light-color);
            `))}),ae=b(V).withConfig({displayName:"Select__MultipleListItem",componentId:"sc-1rc4rcq-6"})([""," display:flex;align-items:center;",""],R,e=>e.disabled?"":W),pe=({list:e,value:o,placeholder:r,direction:c,multiple:i,className:H,onChange:d})=>{const{t:_}=oe("common"),[f,P]=z(!1),K=g(()=>P(!f),[f]),O=g(()=>P(!1),[]),[l,k]=z(i?Array.isArray(o)?o:[]:o);U(()=>k(i?Array.isArray(o)?o:[]:o),[i,o]);const F=g(({value:t,disabled:n})=>{n||(k(t),d==null||d(t),O())},[O,d]),G=g(({value:t,disabled:n},p)=>{if(n)return;let s=l;p?s.includes(t)||(s=[...s,t]):s.includes(t)&&(s=re(s,t)),k(s),d==null||d(s)},[l,d]),J=te(O),a=w(()=>{var t;return(t=e==null?void 0:e.map(n=>["string","number"].includes(typeof n)?{value:n,label:n+""}:n))!==null&&t!==void 0?t:[]},[e]),C=w(()=>a.length===0,[a]),y=w(()=>!!(i?l&&l.length!==0:!(l==null||a.findIndex(t=>t.value===l)===-1)),[a,i,l]),I=g(t=>{var n,p;return(n=(p=a.find(s=>s.value===t))===null||p===void 0?void 0:p.label)!==null&&n!==void 0?n:""},[a]),j=w(()=>y?i?l.map(I).join(" / "):I(l):r||_("common:select"),[i,l,I,y,r,_]);return u.createElement(ne,{ref:J,opened:f,className:H},u.createElement(le,{onClick:K,selected:y,title:y&&j?String(j):""},u.createElement(ie,null,j),u.createElement(ce,{opened:f,type:"chevron-down"})),u.createElement(se,{className:"list",opened:f,empty:C,direction:c},C?_("common:empty"):a.map((t,n)=>i?u.createElement(ae,{checked:l.includes(t.value),key:n,title:t.label,disabled:t.disabled,size:"small",onChange:p=>G(t,p)},t.label):u.createElement(de,{selected:t.value===l,key:n,title:t.label,disabled:t.disabled,onClick:()=>F(t)},t.label))))};export default pe;
