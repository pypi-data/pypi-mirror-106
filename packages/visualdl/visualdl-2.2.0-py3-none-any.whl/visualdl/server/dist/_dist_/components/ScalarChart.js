function C(o,n){var r=Object.keys(o);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(o);n&&(t=t.filter(function(c){return Object.getOwnPropertyDescriptor(o,c).enumerable})),r.push.apply(r,t)}return r}function f(o){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?C(Object(r),!0).forEach(function(t){E(o,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(r)):C(Object(r)).forEach(function(t){Object.defineProperty(o,t,Object.getOwnPropertyDescriptor(r,t))})}return o}function E(o,n,r){return n in o?Object.defineProperty(o,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):o[n]=r,o}function s(){return s=Object.assign||function(o){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&(o[t]=r[t])}return o},s.apply(this,arguments)}import A,{XAxisType as O,YAxisType as m}from"./LineChart.js";import a,{useCallback as x,useMemo as _,useRef as I,useState as S}from"../../web_modules/react.js";import{rem as l,size as L}from"../utils/style.js";import D from"./Chart.js";import M from"./ChartToolbox.js";import N from"./TooltipTable.js";import{format as Y}from"../../web_modules/d3-format.js";import{renderToStaticMarkup as W}from"../../web_modules/react-dom/server.js";import h from"../../web_modules/styled-components.js";import{useTranslation as $}from"../../web_modules/react-i18next.js";const F=Y(".8"),K=h.div.withConfig({displayName:"ScalarChart__Wrapper",componentId:"ptv4kv-0"})([""," display:flex;flex-direction:column;align-items:stretch;justify-content:space-between;"],L("100%","100%")),R=h(A).withConfig({displayName:"ScalarChart__StyledLineChart",componentId:"ptv4kv-1"})(["flex-grow:1;"]),X=h(M).withConfig({displayName:"ScalarChart__Toolbox",componentId:"ptv4kv-2"})(["margin-left:",";margin-right:",";margin-bottom:",";"],l(20),l(20),l(18));export const chartSize={width:430,height:337},chartSizeInRem={width:l(chartSize.width),height:l(chartSize.height)},DownloadDataTypes={csv:"csv",tsv:"tsv"};const q=({title:o,data:n,loading:r,xAxisType:t,xRange:c,yRange:g,getTooltipTableData:b,downloadData:p})=>{const{t:i}=$("common"),u=I(null),[z,P]=S(!1),[v,y]=S(m.value),w=x(()=>{y(e=>e===m.log?m.value:m.log)},[y]),j=x(e=>{const d=Array.isArray(e)?e[0].data:e.data;return W(a.createElement(N,s({run:i("common:runs")},b(d))))},[b,i]),T=_(()=>({legend:{data:[]},tooltip:{position:["10%","100%"],formatter:j,hideDelay:300,enterable:!0},xAxis:f(f({type:t!=null?t:O.value},c),{},{axisPointer:{label:{formatter:t===O.time?void 0:({value:e})=>F(e)}}}),yAxis:f({type:v},g)}),[j,t,c,v,g]),k=_(()=>[{icon:"maximize",activeIcon:"minimize",tooltip:i("common:maximize"),activeTooltip:i("common:minimize"),toggle:!0,onClick:()=>P(e=>!e)},{icon:"restore-size",tooltip:i("common:restore"),onClick:()=>{var e;return(e=u.current)===null||e===void 0?void 0:e.restore()}},{icon:"log-axis",tooltip:i("common:toggle-log-axis"),toggle:!0,onClick:w},{icon:"download",menuList:[{label:i("common:download-image"),onClick:()=>{var e;return(e=u.current)===null||e===void 0?void 0:e.saveAsImage()}},...p?[{label:i("common:download-data"),children:Object.keys(DownloadDataTypes).sort((e,d)=>e.localeCompare(d)).map(e=>({label:i("common:download-data-format",{format:e}),onClick:()=>p(e)}))}]:[]]}],[p,i,w]);return a.createElement(D,s({maximized:z},chartSizeInRem),a.createElement(K,null,a.createElement(R,{ref:u,title:o,options:T,data:n,loading:r,zoom:!0}),a.createElement(X,{items:k})))};export default q;
