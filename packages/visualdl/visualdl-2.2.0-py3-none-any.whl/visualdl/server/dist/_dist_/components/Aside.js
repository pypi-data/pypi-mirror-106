import d,{useCallback as b,useLayoutEffect as u,useRef as w,useState as j}from"../../web_modules/react.js";import{asideWidth as k,rem as i,transitionProps as B}from"../utils/style.js";import E from"../../web_modules/styled-components.js";export const AsideSection=E.section.withConfig({displayName:"Aside__AsideSection",componentId:"o7q9kq-0"})(["margin:",";&:not(:last-child){border-bottom:1px solid var(--border-color);padding-bottom:",";margin-bottom:0;","}& > &{margin-left:0;margin-right:0;}"],i(20),i(20),B("border-color"));const I=E.div.attrs(({width:e})=>({style:{width:typeof e=="number"?`${e}px`:e}})).withConfig({displayName:"Aside__Wrapper",componentId:"o7q9kq-1"})(["height:100%;overflow:hidden;display:flex;flex-direction:column;position:relative;> .aside-top{flex:auto;display:flex;flex-direction:column;height:100%;overflow:auto;overflow-x:hidden;overflow-y:auto;> ","{flex:none;}}> .aside-bottom{flex:none;box-shadow:0 -"," "," 0 rgba(0,0,0,0.03);padding:",";> ","{margin-left:0;margin-right:0;&:first-child{margin-top:0;}&:last-child{margin-bottom:0;}}}> .aside-resize-bar-left,> .aside-resize-bar-right{position:absolute;width:",";height:100%;top:0;cursor:col-resize;touch-action:none;&.aside-resize-bar-left{left:0;}&.aside-resize-bar-right{right:0;}}"],AsideSection,i(5),i(16),i(20),AsideSection,i(8)),R=({width:e,bottom:y,resizable:l,minWidth:t,maxWidth:o,onResized:c,className:C,children:N})=>{const[A,L]=j(e!=null?e:k),n=w(null),a=w(!1),r=w({min:t!=null?t:null,max:o!=null?o:null});u(()=>{r.current.min=t!=null?t:null},[t]),u(()=>{r.current.max=o!=null?o:null},[o]),u(()=>{if(r.current.min==null&&n.current){const{width:v}=n.current.getBoundingClientRect();r.current.min=v}},[]);const q=b(()=>{a.current=!0},[]),m=b(v=>{if(n.current&&a.current){var p;const x=v.clientX,{left:M,right:S}=n.current.getBoundingClientRect();let s=0;if(l==="left"){var g;s=Math.max((g=r.current.min)!==null&&g!==void 0?g:0,S-x)}else if(l==="right"){var h;s=Math.max((h=r.current.min)!==null&&h!==void 0?h:0,x-M)}s=Math.min((p=r.current.max)!==null&&p!==void 0?p:document.body.clientWidth/2,s),L(s)}},[l]),f=b(()=>{a.current=!1,n.current&&(c==null||c(n.current.getBoundingClientRect().width))},[c]);return u(()=>(document.addEventListener("mousemove",m),()=>document.removeEventListener("mousemove",m)),[m]),u(()=>(document.addEventListener("mouseup",f),()=>document.removeEventListener("mouseup",f)),[f]),d.createElement(I,{width:A,className:C,ref:n},l?d.createElement("div",{className:`aside-resize-bar-${l}`,onMouseDown:q}):null,d.createElement("div",{className:"aside-top"},N),y&&d.createElement("div",{className:"aside-bottom"},y))};export default R;
