import n,{useCallback as h,useMemo as s}from"../../../web_modules/react.js";import{calculateRelativeTime as f,chartData as b}from"../../resource/hyper-parameter/index.js";import{formatTime as g,humanizeDuration as w}from"../../utils/index.js";import y from"../ScalarChart.js";import{format as j}from"../../../web_modules/d3-format.js";import v from"../../../web_modules/query-string.js";import T from"../../../web_modules/styled-components.js";import _ from"../../hooks/useRequest.js";import{useTranslation as C}from"../../../web_modules/react-i18next.js";const q=j(".5"),x=T.div.withConfig({displayName:"ScalarChart__Error",componentId:"sc-19pbo24-0"})(["width:100%;height:100%;display:flex;justify-content:center;align-items:center;"]),R=({metric:m,run:t})=>{const{t:e,i18n:l}=C(["hyper-parameter","common"]),{data:o,error:c,loading:u}=_(v.stringifyUrl({url:"/hparams/metric",query:{run:t.label,metric:m}})),i=s(()=>f(o!=null?o:[]),[o]),d=s(()=>b(i,t),[i,t]),p=h(a=>{var r;return{runs:[t],columns:[{label:e("common:scalar-value"),width:"4.285714286em"},{label:e("common:time-mode.step"),width:"2.857142857em"},{label:e("common:time-mode.wall"),width:"10.714285714em"},{label:e("common:time-mode.relative"),width:"4.285714286em"}],data:[[q((r=a[2])!==null&&r!==void 0?r:Number.NaN),a[1],g(a[0],l.language),w(a[3])]]}},[l.language,t,e]);return!o&&c?n.createElement(x,null,e("common:error")):n.createElement(y,{title:m,data:d,loading:u,getTooltipTableData:p})};export default R;
