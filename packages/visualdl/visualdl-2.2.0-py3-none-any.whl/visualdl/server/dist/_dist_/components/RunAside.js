import N,{AsideSection as b}from"./Aside.js";import o,{useCallback as h,useMemo as s,useState as L}from"../../web_modules/react.js";import{asideWidth as I,ellipsis as T,em as n,rem as f,size as W}from"../utils/style.js";import g from"./Checkbox.js";import q from"./Field.js";import z from"./Loader/RunList.js";import B from"./RunningToggle.js";import D from"./SearchInput.js";import F from"../../web_modules/styled-components.js";import O from"../../web_modules/lodash/uniqBy.js";import C from"../hooks/useLocalStorage.js";import{useTranslation as G}from"../../web_modules/react-i18next.js";const H="run_aside_width",K=F(N).withConfig({displayName:"RunAside__StyledAside",componentId:"sc-1k1mq1t-0"})(["",".run-section{flex:auto;overflow-x:hidden;overflow-y:auto;display:flex;flex-direction:column;margin-bottom:0;.run-select{flex:auto;overflow-x:hidden;overflow-y:auto;display:flex;flex-direction:column;> *{flex:none;}.search-input{margin-bottom:",";}.run-list{flex:auto;overflow-x:hidden;overflow-y:auto;margin-top:",";> div{margin-top:",";> *{width:100%;}.run-item{display:flex;align-items:center;"," > i{display:inline-block;",";border-radius:",";margin-right:",";}}}}}}"],b,f(15),f(5),f(11),T(),W(n(12),n(12)),n(6),n(8)),M=({runs:l,selectedRuns:t,onChangeRuns:a,running:u,onToggleRunning:p,loading:x,children:y})=>{const{t:c}=G("common"),[d,w]=L(""),E=s(()=>(l==null?void 0:l.length)===(t==null?void 0:t.length),[l,t]),S=h(e=>{a==null||a(e?l!=null?l:[]:[])},[a,l]),_=s(()=>{var e;return(e=d?l==null?void 0:l.filter(m=>m.label.indexOf(d)>=0):l)!==null&&e!==void 0?e:[]},[l,d]),j=h((e,m)=>{let i=t!=null?t:[];m?i=O([...i,e],r=>r.label):i=i.filter(r=>r.label!==e.label),a==null||a(i)},[a,t]),k=s(()=>o.createElement(B,{className:"running-toggle",running:u,onToggle:p}),[u,p]),[v,A]=C(H);return o.createElement(K,{bottom:k,resizable:"left",width:v==null?I:+v,minWidth:260,onResized:e=>A(e+"")},y,o.createElement(b,{className:"run-section"},o.createElement(q,{className:"run-select",label:c("common:select-runs")},o.createElement(D,{className:"search-input",value:d,onChange:w,placeholder:c("common:search-runs"),rounded:!0}),o.createElement(g,{checked:E,onChange:S},c("common:select-all")),o.createElement("div",{className:"run-list"},x?o.createElement(z,null):_.map((e,m)=>{var i;return o.createElement("div",{key:m},o.createElement(g,{checked:t==null||(i=t.map(r=>r.label))===null||i===void 0?void 0:i.includes(e.label),title:e.label,onChange:r=>j(e,r)},o.createElement("span",{className:"run-item"},o.createElement("i",{style:{backgroundColor:e.colors[0]}}),e.label)))})))))};export default M;
