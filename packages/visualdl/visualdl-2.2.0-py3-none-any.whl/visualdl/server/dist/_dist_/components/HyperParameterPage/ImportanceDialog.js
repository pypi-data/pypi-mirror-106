import*as _ from"../../../web_modules/d3.js";import a,{useEffect as w,useMemo as i}from"../../../web_modules/react.js";import{borderRadius as x,rem as o,tint as j,transitionProps as I}from"../../utils/style.js";import D from"../BarChart.js";import E from"../Icon.js";import{colors as c}from"../../utils/theme.js";import d from"../../../web_modules/styled-components.js";import R from"../../hooks/useRequest.js";import{useTranslation as N}from"../../../web_modules/react-i18next.js";const B=[j(.6,c.primary.default),c.primary.default],C=d.div.withConfig({displayName:"ImportanceDialog__Dialog",componentId:"rlxi4d-0"})(["width:",";height:",";background-color:var(--background-color);border-radius:",";box-shadow:0 "," "," 0 rgba(0,0,0,0.16);display:",";position:relative;padding:",";z-index:1;> .close{position:absolute;top:",";right:",";font-size:",";cursor:pointer;color:var(--text-lighter-color);"," &:hover{color:var(--text-light-color);}&:active{color:var(--text-color);}}"],o(450),o(370),x,o(4),o(12),t=>t.visible?"inline-block":"none",o(20),o(20),o(20),o(12),I("color")),k=d(D).withConfig({displayName:"ImportanceDialog__ImportanceBarChart",componentId:"rlxi4d-1"})(["width:100%;height:100%;"]),z=({visible:t,onClickClose:s,className:p})=>{const{t:u}=N(["hyper-parameter","common"]),{data:n,mutate:m,isValidating:h}=R("/hparams/importance",{revalidateOnMount:!1});w(()=>{t&&m()},[m,t]);const r=i(()=>{if(!n)return[];const e=[...n];return e.reverse(),e},[n]),g=i(()=>({animation:!1,tooltip:{show:!1}}),[]),f=i(()=>{var e;return(e=r.map(l=>l.name))!==null&&e!==void 0?e:[]},[r]),v=i(()=>{var e;const l=_.scaleLinear().domain([0,r.length]).range(B);return[{barMaxWidth:14,data:(e=r.map((b,y)=>({value:b.value,itemStyle:{color:l(y)}})))!==null&&e!==void 0?e:[],type:"bar"}]},[r]);return a.createElement(C,{visible:!!t,className:p},a.createElement(k,{title:u("hyper-parameter:parameter-importance"),direction:"horizontal",options:g,categories:f,data:v,loading:h}),a.createElement("a",{className:"close",onClick:()=>s==null?void 0:s()},a.createElement(E,{type:"close"})))};export default z;
