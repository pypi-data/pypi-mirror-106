function I(t,n){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);n&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),o.push.apply(o,a)}return o}function j(t){for(var n=1;n<arguments.length;n++){var o=arguments[n]!=null?arguments[n]:{};n%2?I(Object(o),!0).forEach(function(a){B(t,a,o[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):I(Object(o)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(o,a))})}return t}function B(t,n,o){return n in t?Object.defineProperty(t,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[n]=o,t}import p,{useCallback as P,useEffect as c,useMemo as A,useRef as M,useState as g}from"../../../../../web_modules/react.js";import $ from"./ParallelCoordinatesGraph.js";import{ScaleMethod as K}from"../../../../resource/hyper-parameter/index.js";import L from"../../ScaleMethodSelect.js";import C from"../../../../../web_modules/styled-components.js";const T=C.div.withConfig({displayName:"Component__Container",componentId:"platdk-0"})(["width:100%;overflow:auto;.interpolates{display:flex;margin-left:","px;margin-top:1em;}svg{.line{fill:none;}.hover-trigger{cursor:pointer;}.select-indicator{fill:var(--background-color);stroke-width:2px;}.disabled{.line{stroke:var(--hyper-parameter-graph-disabled-data-color);}.stroke-width{stroke:var(--hyper-parameter-graph-disabled-data-color);}.hover-trigger{cursor:unset;}}.grid{.indicator{fill:var(--text-color);dominant-baseline:text-before-edge;&.metrics{font-weight:bold;}.dragger{opacity:0;cursor:grab;}&:hover .dragger{opacity:1;}}.axis{color:var(--hyper-parameter-graph-axis-color);text{color:var(--text-light-color);pointer-events:none;}.grid-brush .selection{fill:var(--hyper-parameter-graph-brush-color);fill-opacity:0.4;}}&.dragging{.indicator{fill:var(--primary-color);}.dragger{opacity:1;cursor:grabbing;filter:invert(16%) sepia(99%) saturate(5980%) hue-rotate(243deg) brightness(89%) contrast(98%);}}}}"],$.GRID_BRUSH_WIDTH/2),U=C(L).withConfig({displayName:"Component__StyledScaleMethodSelect",componentId:"platdk-1"})(["position:relative;"]),y=(t,n)=>n?t.sort(({name:o},{name:a})=>n.indexOf(o)-n.indexOf(a)):t,q=({indicators:t,data:n,colors:o,order:a,onHover:s,onSelect:f,onChangeOrder:u,className:E})=>{const m=M(null),l=M(),[D,O]=g(0),[w,v]=g(y(t,a).map(({name:e})=>e));c(()=>{v(y(t,a).map(({name:e})=>e))},[t,a]);const k=A(()=>w.filter(e=>t.findIndex(r=>r.name===e)>=0).map(e=>t.find(r=>r.name===e)),[w,t]),[S,R]=g(t.reduce((e,r)=>(r.type==="continuous"&&(e[r.name]=K.LINEAR),e),{})),[N,_]=g(null),[W,x]=g(0),G=P((e,r)=>{var i;R(d=>j(j({},d),{},{[e.name]:r})),(i=l.current)===null||i===void 0||i.setScaleMethod(e.name,r)},[]);c(()=>{if(!!m.current)return l.current=new $(m.current),l.current.on("dragging",(e,r,i)=>{_(e),x(r),v(i)}),l.current.on("dragged",e=>{_(null),x(0),v(e)}),()=>{var e;return(e=l.current)===null||e===void 0?void 0:e.dispose()}},[u]);const h=P(e=>u==null?void 0:u(e),[u]);return c(()=>{const e=l.current;if(e)return e.on("dragged",h),()=>{e.off("dragged",h)}},[h]),c(()=>{const e=m.current;if(e){const r=new ResizeObserver(()=>{var i,d,b;const z=e.getBoundingClientRect();(i=l.current)===null||i===void 0||i.resize(z.width),O((d=(b=l.current)===null||b===void 0?void 0:b.columnWidth)!==null&&d!==void 0?d:0)});return r.observe(e),()=>{r.unobserve(e)}}},[]),c(()=>{if(s){var e;return(e=l.current)===null||e===void 0||e.on("hover",s),()=>{var r;(r=l.current)===null||r===void 0||r.off("hover",s)}}},[s]),c(()=>{if(f){var e;return(e=l.current)===null||e===void 0||e.on("select",f),()=>{var r;(r=l.current)===null||r===void 0||r.off("select",f)}}},[f]),c(()=>{var e;(e=l.current)===null||e===void 0||e.setColors(o)},[o]),c(()=>{var e,r,i;const d=y(t,a);(e=l.current)===null||e===void 0||e.render(d,n),O((r=(i=l.current)===null||i===void 0?void 0:i.columnWidth)!==null&&r!==void 0?r:0)},[t,n,a]),p.createElement(T,{className:E},p.createElement("div",{ref:m}),p.createElement("div",{className:"interpolates"},k.map(e=>p.createElement("div",{key:e.name,style:{width:`${D}px`,position:"relative",left:`${N===e.name?W:0}px`}},S[e.name]!=null?p.createElement(U,{direction:"top",scaleMethod:S[e.name],onChange:r=>G(e,r)}):null))))};export default q;
