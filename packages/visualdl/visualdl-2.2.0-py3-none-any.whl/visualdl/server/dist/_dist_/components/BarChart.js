function C(r,s){if(r==null)return{};var a=_(r,s),t,e;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(r);for(e=0;e<o.length;e++)t=o[e],!(s.indexOf(t)>=0)&&(!Object.prototype.propertyIsEnumerable.call(r,t)||(a[t]=r[t]))}return a}function _(r,s){if(r==null)return{};var a={},t=Object.keys(r),e,o;for(o=0;o<t.length;o++)e=t[o],!(s.indexOf(e)>=0)&&(a[e]=r[e]);return a}import*as p from"../utils/chart.js";import i,{useEffect as k,useImperativeHandle as I}from"../../web_modules/react.js";import{primaryColor as L}from"../utils/style.js";import P,{Wrapper as z,useChartTheme as N}from"../hooks/useECharts.js";import R from"../../web_modules/react-spinners/GridLoader.js";import d from"../../web_modules/lodash/defaultsDeep.js";const W=i.forwardRef(({options:r,categories:s,direction:a,data:t,title:e,loading:o,className:h,onInit:v},y)=>{const{ref:g,echart:l,wrapper:b,saveAsImage:j}=P({loading:!!o,autoFit:!0,onInit:v}),n=N();return I(y,()=>({saveAsImage:()=>{j(e)}})),k(()=>{const{color:c,colorAlt:D,series:x}=p,O=C(p,["color","colorAlt","series"]),m=a==="horizontal",f={type:"value"},u={type:"category",data:s,axisLabel:{formatter:null}},A=d({title:{text:e!=null?e:""},xAxis:m?f:u,yAxis:m?u:f,series:t==null?void 0:t.map((E,w)=>d(E,{itemStyle:{color:c[w%c.length]}},x))},r,n,O);l==null||l.setOption(A,{notMerge:!0})},[r,t,e,n,l,a,s]),i.createElement(z,{ref:b,className:h},!l&&i.createElement("div",{className:"loading"},i.createElement(R,{color:L,size:"10px"})),i.createElement("div",{className:"echarts",ref:g}))});export default W;
