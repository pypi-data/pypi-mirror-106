(self.webpackChunk=self.webpackChunk||[]).push([["app_views_performance_transactionSummary_transactionTags_index_tsx","app_components_sentryDocumentTitle_tsx"],{"./app/components/events/searchBar.tsx":(e,t,r)=>{"use strict";r.d(t,{Z:()=>R}),r("../node_modules/core-js/modules/es.reflect.construct.js"),r("../node_modules/core-js/modules/es.symbol.js"),r("../node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),r("../node_modules/core-js/modules/es.array.for-each.js"),r("../node_modules/core-js/modules/web.dom-collections.for-each.js"),r("../node_modules/core-js/modules/es.object.get-own-property-descriptors.js"),r("../node_modules/core-js/modules/es.object.define-properties.js"),r("../node_modules/core-js/modules/es.object.define-property.js");var o,n=r("../node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js"),s=r("../node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),a=r("../node_modules/@babel/runtime/helpers/esm/createClass.js"),i=r("../node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js"),c=r("../node_modules/@babel/runtime/helpers/esm/inherits.js"),l=r("../node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),u=r("../node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),d=r("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),p=(r("../node_modules/core-js/modules/es.regexp.constructor.js"),r("../node_modules/core-js/modules/es.regexp.exec.js"),r("../node_modules/core-js/modules/es.regexp.to-string.js"),r("../node_modules/core-js/modules/es.array.concat.js"),r("../node_modules/core-js/modules/es.array.map.js"),r("../node_modules/core-js/modules/es.object.to-string.js"),r("../node_modules/core-js/modules/es.promise.js"),r("../node_modules/core-js/modules/es.array.filter.js"),r("../node_modules/core-js/modules/es.function.name.js"),r("../node_modules/core-js/modules/es.string.replace.js"),r("../node_modules/core-js/modules/es.array.iterator.js"),r("../node_modules/core-js/modules/es.object.from-entries.js"),r("../node_modules/core-js/modules/es.array.includes.js"),r("../node_modules/core-js/modules/es.string.includes.js"),r("../node_modules/core-js/modules/es.object.keys.js"),r("../node_modules/core-js/modules/es.object.assign.js"),r("../node_modules/react/index.js")),m=r("../node_modules/@emotion/react/dist/emotion-react.browser.esm.js"),f=r("../node_modules/lodash/assign.js"),g=r.n(f),j=r("../node_modules/lodash/flatten.js"),y=r.n(j),h=r("../node_modules/lodash/isEqual.js"),b=r.n(h),v=r("../node_modules/lodash/memoize.js"),O=r.n(v),Z=r("../node_modules/lodash/omit.js"),w=r.n(Z),_=r("./app/actionCreators/tags.tsx"),x=r("./app/components/smartSearchBar/index.tsx"),P=r("./app/constants/index.tsx"),k=r("./app/types/index.tsx"),S=r("./app/utils.tsx"),D=r("./app/utils/discover/fields.tsx"),T=r("./app/utils/measurements/measurements.tsx"),C=r("./app/utils/withApi.tsx"),E=r("./app/utils/withTags.tsx"),B=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function q(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function A(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?q(Object(r),!0).forEach((function(t){(0,d.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):q(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var V=new RegExp("^".concat(P.c$,"|\\").concat(P.ir),"g"),N=function(e){(0,c.Z)(f,e);var t,r,p=(t=f,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,o=(0,u.Z)(t);if(r){var n=(0,u.Z)(this).constructor;e=Reflect.construct(o,arguments,n)}else e=o.apply(this,arguments);return(0,l.Z)(this,e)});function f(){var e;(0,s.Z)(this,f);for(var t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return e=p.call.apply(p,[this].concat(r)),(0,d.Z)((0,i.Z)(e),"getEventFieldValues",O()((function(t,r,o){var n=e.props,s=n.api,a=n.organization,i=n.projectIds,c=null==i?void 0:i.map(String);return(0,D.h1)(t.key)||(0,D.Xr)(t.key)?Promise.resolve([]):(0,_.Fo)(s,a.slug,t.key,r,c,o,!0).then((function(e){return y()(e.filter((function(e){var t=e.name;return(0,S.ri)(t)})).map((function(e){return e.name})))}),(function(){throw new Error("Unable to fetch event field values")}))}),(function(e,t){var r=e.key;return"".concat(r,"-").concat(t)}))),(0,d.Z)((0,i.Z)(e),"prepareQuery",(function(e){return e.replace(V,"")})),e}return(0,a.Z)(f,[{key:"componentDidMount",value:function(){var e,t;null===(e=(t=this.getEventFieldValues.cache).clear)||void 0===e||e.call(t)}},{key:"componentDidUpdate",value:function(e){var t,r;b()(this.props.projectIds,e.projectIds)||null===(t=(r=this.getEventFieldValues.cache).clear)||void 0===t||t.call(r)}},{key:"getTagList",value:function(e){var t=this.props,r=t.fields,o=t.organization,n=t.tags,s=t.omitTags,a=r?Object.fromEntries(r.filter((function(e){return!Object.keys(D.wZ).includes(e.field)})).map((function(e){return[e.field,{key:e.field,name:e.field}]}))):{},i=o.features.includes("performance-view")?Object.assign({},e,D.wZ,a):w()(D.wZ,D.J8),c=g()({},n,i);return c.has={key:"has",name:"Has property",values:Object.keys(c),predefined:!0},w()(c,null!=s?s:[])}},{key:"render",value:function(){var e=this;return(0,B.tZ)(T.Z,{children:function(t){var r=t.measurements,s=e.getTagList(r);return(0,B.tZ)(m.ms,{children:function(t){var r=t.css;return(0,B.tZ)(x.Z,A(A({},e.props),{},{hasRecentSearches:!0,savedSearchType:k.L4.EVENT,onGetTagValues:e.getEventFieldValues,supportedTags:s,prepareQuery:e.prepareQuery,excludeEnvironment:!0,dropdownClassName:r(o||(o=(0,n.Z)(["\n                    max-height: 300px;\n                    overflow-y: auto;\n                  "])))}))}})}})}}]),f}(p.PureComponent);N.displayName="SearchBar";const R=(0,C.Z)((0,E.Z)(N))},"./app/components/sentryDocumentTitle.tsx":(e,t,r)=>{"use strict";r.d(t,{Z:()=>i}),r("../node_modules/core-js/modules/es.array.concat.js"),r("../node_modules/react/index.js");var o=r("../node_modules/react-document-title/index.js"),n=r.n(o),s=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function a(e){var t=e.title,r=e.orgSlug,o=e.projectSlug,a=e.children,i=r||o?r&&o?"".concat(t," - ").concat(r," - ").concat(o):r?"".concat(t," - ").concat(r):"".concat(t," - ").concat(o):t;return(0,s.tZ)(n(),{title:"".concat(i," - Sentry"),children:a})}a.displayName="SentryDocumentTitle";const i=a},"./app/utils/measurements/measurements.tsx":(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var o=r("../node_modules/@babel/runtime/helpers/esm/slicedToArray.js"),n=(r("../node_modules/core-js/modules/es.array.iterator.js"),r("../node_modules/core-js/modules/es.object.from-entries.js"),r("../node_modules/core-js/modules/es.array.map.js"),r("../node_modules/core-js/modules/es.object.entries.js"),r("../node_modules/core-js/modules/es.function.name.js"),r("../node_modules/react/index.js")),s=r("./app/utils/performance/vitals/constants.tsx"),a=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js"),i=Object.fromEntries(Object.entries(s.r).map((function(e){var t=(0,o.Z)(e,2),r=t[0];return[r,{name:t[1].name,key:r}]})));function c(e){return(0,a.tZ)(n.Fragment,{children:e.children({measurements:i})})}c.displayName="Measurements";const l=c},"./app/utils/withTags.tsx":(e,t,r)=>{"use strict";r.d(t,{Z:()=>f}),r("../node_modules/core-js/modules/es.object.keys.js"),r("../node_modules/core-js/modules/es.symbol.js"),r("../node_modules/core-js/modules/es.array.filter.js"),r("../node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),r("../node_modules/core-js/modules/es.array.for-each.js"),r("../node_modules/core-js/modules/web.dom-collections.for-each.js"),r("../node_modules/core-js/modules/es.object.get-own-property-descriptors.js"),r("../node_modules/core-js/modules/es.object.define-properties.js"),r("../node_modules/core-js/modules/es.object.define-property.js");var o=r("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),n=r("../node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js"),s=(r("../node_modules/react/index.js"),r("../node_modules/create-react-class/index.js")),a=r.n(s),i=r("../node_modules/reflux/src/index.js"),c=r.n(i),l=r("./app/stores/tagStore.tsx"),u=r("./app/utils/getDisplayName.tsx"),d=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function m(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?p(Object(r),!0).forEach((function(t){(0,o.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const f=function(e){return a()({displayName:"withTags(".concat((0,u.Z)(e),")"),mixins:[c().listenTo(l.Z,"onTagsUpdate")],getInitialState:function(){return{tags:l.Z.getAllTags()}},onTagsUpdate:function(e){this.setState({tags:e})},render:function(){var t=this.props,r=t.tags,o=(0,n.Z)(t,["tags"]);return(0,d.tZ)(e,m({},m({tags:null!=r?r:this.state.tags},o)))}})}},"./app/views/performance/transactionSummary/transactionTags/index.tsx":(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>Ke}),r("../node_modules/core-js/modules/es.reflect.construct.js"),r("../node_modules/core-js/modules/es.object.keys.js"),r("../node_modules/core-js/modules/es.symbol.js"),r("../node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),r("../node_modules/core-js/modules/es.array.for-each.js"),r("../node_modules/core-js/modules/web.dom-collections.for-each.js"),r("../node_modules/core-js/modules/es.object.get-own-property-descriptors.js"),r("../node_modules/core-js/modules/es.object.define-properties.js"),r("../node_modules/core-js/modules/es.object.define-property.js");var o=r("../node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),n=r("../node_modules/@babel/runtime/helpers/esm/createClass.js"),s=r("../node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js"),a=r("../node_modules/@babel/runtime/helpers/esm/inherits.js"),i=r("../node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),c=r("../node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),l=r("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),u=r("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),d=(r("../node_modules/core-js/modules/es.array.concat.js"),r("../node_modules/core-js/modules/es.string.trim.js"),r("../node_modules/core-js/modules/es.array.join.js"),r("../node_modules/core-js/modules/es.regexp.exec.js"),r("../node_modules/core-js/modules/es.string.replace.js"),r("../node_modules/core-js/modules/es.array.find.js"),r("../node_modules/core-js/modules/es.parse-int.js"),r("../node_modules/core-js/modules/es.array.map.js"),r("../node_modules/core-js/modules/es.array.filter.js"),r("../node_modules/react/index.js")),p=r("../node_modules/react-router/es/index.js"),m=r("./app/components/acl/feature.tsx"),f=r("./app/components/alert.tsx"),g=r("./app/components/lightWeightNoProjectMessage.tsx"),j=r("./app/components/organizations/globalSelectionHeader/index.tsx"),y=r("./app/components/sentryDocumentTitle.tsx"),h=r("./app/locale.tsx"),b=r("./app/styles/organization.tsx"),v=r("./app/utils/discover/eventView.tsx"),O=r("./app/utils/queryString.tsx"),Z=r("./app/utils/tokenizeSearch.tsx"),w=r("./app/utils/withGlobalSelection.tsx"),_=r("./app/utils/withOrganization.tsx"),x=r("./app/utils/withProjects.tsx"),P=r("./app/views/performance/utils.tsx"),k=r("../node_modules/@babel/runtime/helpers/esm/slicedToArray.js"),S=r("./app/components/charts/styles.tsx"),D=r("./app/components/events/searchBar.tsx"),T=r("./app/components/organizations/globalSelectionHeader/getParams.tsx"),C=r("./app/components/questionTooltip.tsx"),E=r("./app/components/radio.tsx"),B=r("./app/styles/space.tsx"),q=r("./app/utils/performance/segmentExplorer/segmentExplorerQuery.tsx"),A=r("./app/views/performance/transactionSummary/utils.tsx"),V=r("./app/views/performance/landing/utils.tsx"),N=r("./app/views/performance/transactionSummary/filter.tsx"),R=r("./app/views/performance/transactionSummary/header.tsx"),z=r("./app/views/performance/transactionSummary/tagExplorer.tsx"),L=r("../node_modules/@emotion/react/dist/emotion-element-4fbd89c5.browser.esm.js"),X=(r("../node_modules/core-js/modules/es.array.sort.js"),r("./app/utils/discover/genericDiscoverQuery.tsx")),F=r("./app/utils/withApi.tsx"),H=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function M(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function I(e,t){return e.aggregateColumn!==t.aggregateColumn||e.sort!==t.sort||e.tagKey!==t.tagKey}function K(e){return(0,H.tZ)(X.Z,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?M(Object(r),!0).forEach((function(t){(0,l.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):M(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({route:"events-facets-performance-histogram",getRequestPayload:(t=e,r=t.aggregateColumn,function(e){var o=e.eventView.getEventsAPIPayload(e.location);return o.aggregateColumn=r,o.sort=t.sort?t.sort:"-sumdelta",o.tagKey=t.tagKey,o}),shouldRefetchData:I},e));var t,r}K.displayName="TagKeyHistogramQuery";const Q=(0,F.Z)(K);r("../node_modules/core-js/modules/es.array.includes.js"),r("../node_modules/core-js/modules/es.string.includes.js"),r("../node_modules/core-js/modules/es.array.iterator.js"),r("../node_modules/core-js/modules/es.object.to-string.js"),r("../node_modules/core-js/modules/es.set.js"),r("../node_modules/core-js/modules/es.string.iterator.js"),r("../node_modules/core-js/modules/web.dom-collections.iterator.js"),r("../node_modules/core-js/modules/es.array.from.js");var W=r("../node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js");function J(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function Y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?J(Object(r),!0).forEach((function(t){(0,l.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):J(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}r("../node_modules/core-js/modules/es.function.name.js"),r("../node_modules/echarts/lib/chart/heatmap.js"),r("../node_modules/echarts/lib/component/visualMap.js");var U=r("./app/components/charts/baseChart.tsx");function G(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function $(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?G(Object(r),!0).forEach((function(t){(0,l.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):G(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var ee=function(e){(0,a.Z)(l,e);var t,r,s=(t=l,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,o=(0,c.Z)(t);if(r){var n=(0,c.Z)(this).constructor;e=Reflect.construct(o,arguments,n)}else e=o.apply(this,arguments);return(0,i.Z)(this,e)});function l(){return(0,o.Z)(this,l),s.apply(this,arguments)}return(0,n.Z)(l,[{key:"render",value:function(){var e=this.props,t=e.series,r=e.seriesOptions,o=(0,W.Z)(e,["series","seriesOptions"]);return(0,H.tZ)(U.Z,$($({},o),{},{series:t.map((function(e){var t=e.seriesName,o=e.data,n=e.dataArray,s=(0,W.Z)(e,["seriesName","data","dataArray"]);return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.data,r=(0,W.Z)(e,["data"]);return Y(Y({data:t},r),{},{type:"heatmap"})}($($($({},r),s),{},{name:t,data:n||o.map((function(e){var t=e.value;return[e.name,t]}))}))}))}))}}]),l}(d.Component);ee.displayName="HeatMapChart";var te=r("./app/components/charts/transitionChart.tsx"),re=r("./app/components/charts/transparentLoadingMask.tsx"),oe=r("./app/components/panels/index.tsx"),ne=r("./app/utils/discover/charts.tsx");function se(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function ae(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?se(Object(r),!0).forEach((function(t){(0,l.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):se(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var ie=function(e){var t=e.tableData,r=e.isLoading;if(!t||!t.data||!t.data.length)return null;var o,n=["#D1BAFC","#9282F3","#6056BA","#313087","#021156"],s=(o=t.data[0],Object.keys(o).find((function(e){return e.includes("histogram")})));if(!s)return null;var a=new Set,i=new Set,c=0,l=t.data.map((function(e){var t=(0,ne.b4)(e[s]),r=e.tags_value;return a.add(r),i.add(t),c=Math.max(c,e.count),[t,r,e.count]}));l.sort((function(e,t){return e[0]===t[0]?t[1]-e[1]:t[0]-e[0]}));var u={height:290,animation:!1,colors:n,tooltip:{},yAxis:{type:"category",data:Array.from(a),splitArea:{show:!0}},xAxis:{boundaryGap:!0,type:"category",splitArea:{show:!0},data:Array.from(i),axisLabel:{show:!0,showMinLabel:!0,showMaxLabel:!0,formatter:function(e){return(0,ne.gu)(e,"Count")}},axisLine:{},axisPointer:{show:!1},axisTick:{show:!0,interval:0,alignWithLabel:!0}},visualMap:{min:0,max:c,show:!1,orient:"horizontal",calculable:!0,inRange:{color:n}},grid:{left:(0,B.Z)(3),right:(0,B.Z)(3),top:(0,B.Z)(3),bottom:(0,B.Z)(4)}},d=[];d.push({seriesName:"Count",dataArray:l,label:{show:!0},emphasis:{itemStyle:{shadowBlur:10,shadowColor:"rgba(0, 0, 0, 0.5)"}}});var p=r,m=r;return(0,H.BX)(ce,{children:[(0,H.BX)(le,{children:[(0,h.t)("Heat Map"),(0,H.tZ)(C.Z,{size:"sm",position:"top",title:(0,h.t)("This heatmap shows the frequency for each duration across the most common tag values")})]}),(0,H.BX)(te.Z,{loading:m,reloading:p,children:[(0,H.tZ)(re.Z,{visible:p}),(0,H.tZ)(ee,ae({series:d},u))]})]})};ie.displayName="TagsHeatMap";var ce=(0,u.Z)(oe.s_,{target:"eoy5kj71"})("padding:",(0,B.Z)(3),";margin-bottom:0;border-bottom:0;border-bottom-left-radius:0;border-bottom-right-radius:0;"),le=(0,u.Z)(S.ws,{target:"eoy5kj70"})("");const ue=(0,L.b)(ie);var de=r("../node_modules/@babel/runtime/helpers/esm/toConsumableArray.js"),pe=(r("../node_modules/core-js/modules/es.number.constructor.js"),r("./app/components/gridEditable/index.tsx")),me=r("./app/components/gridEditable/sortLink.tsx"),fe=r("./app/components/links/link.tsx"),ge=r("./app/icons/iconAdd.tsx"),je=r("./app/utils/formatters.tsx"),ye=r("./app/views/eventsV2/table/cellAction.tsx");function he(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function be(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?he(Object(r),!0).forEach((function(t){(0,l.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):he(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var ve="tags_cursor",Oe=[{key:"tagValue",field:"tagValue",name:"Tag Values",width:-1,column:{kind:"field"}},{key:"frequency",field:"frequency",name:"Frequency",width:-1,column:{kind:"field"},canSort:!0},{key:"count",field:"count",name:"Events",width:-1,column:{kind:"field"},canSort:!0},{key:"aggregate",field:"aggregate",name:"Avg Duration",width:-1,column:{kind:"field"},canSort:!0},{key:"action",field:"action",name:"",width:-1,column:{kind:"field"}}],Ze=function(e){(0,a.Z)(d,e);var t,r,u=(t=d,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,o=(0,c.Z)(t);if(r){var n=(0,c.Z)(this).constructor;e=Reflect.construct(o,arguments,n)}else e=o.apply(this,arguments);return(0,i.Z)(this,e)});function d(){var e;(0,o.Z)(this,d);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return e=u.call.apply(u,[this].concat(r)),(0,l.Z)((0,s.Z)(e),"state",{widths:[]}),(0,l.Z)((0,s.Z)(e),"renderHeadCellWithMeta",(function(t,r,o){return function(n,s){return e.renderHeadCell(t,r,n,o[s])}})),(0,l.Z)((0,s.Z)(e),"handleTagValueClick",(function(e,t,r){var o=(0,O.ro)(e.query.query),n=(0,Z.aI)(o||"");n.addTagValues(t,[r]);var s=(0,Z.gZ)(n);p.browserHistory.push({pathname:e.pathname,query:be(be({},e.query),{},{query:String(s).trim()})})})),(0,l.Z)((0,s.Z)(e),"handleCellAction",(function(t,r,o){return function(n){var s,a=e.props,i=a.eventView,c=a.location,u=(0,Z.aI)(i.query);u.removeTag("event.type"),(0,ye.rh)(u,n,be(be({},t),{},{name:o.id}),r),p.browserHistory.push({pathname:c.pathname,query:be(be({},c.query),{},(s={},(0,l.Z)(s,ve,void 0),(0,l.Z)(s,"query",(0,Z.gZ)(u)),s))})}})),(0,l.Z)((0,s.Z)(e),"renderBodyCell",(function(t,r,o){var n=o[r.key],s=t.location;if("key"===r.key)return o.tags_key;var a=[ye.eX.ADD,ye.eX.EXCLUDE];if("tagValue"===r.key){var i=be(be({},o),{},{id:o.tags_key});return(0,H.tZ)(ye.ZP,{column:r,dataRow:i,handleCellAction:e.handleCellAction(r,o.tags_value,i),allowActions:a,children:(0,H.tZ)(z.xS,{row:o})})}if("frequency"===r.key)return(0,je.rl)(o.frequency,0);if("action"===r.key)return(0,H.tZ)(fe.Z,{to:"",onClick:function(){return e.handleTagValueClick(s,o.tags_key,o.tags_value)},children:(0,H.BX)(we,{children:[(0,H.tZ)(ge.N,{isCircled:!0})," ",(0,h.t)("Add to filter")]})});if("comparison"===r.key){var c=o.comparison,l=(0,je.rl)(c-1,0);return c>1?(0,h.t)("+%s slower",l):(0,h.t)("%s faster",l)}return"aggregate"===r.key?(0,H.tZ)(P.Xr,{abbreviation:!0,milliseconds:o.aggregate}):"sumdelta"===r.key?(0,H.tZ)(P.Xr,{abbreviation:!0,milliseconds:o.sumdelta}):n})),(0,l.Z)((0,s.Z)(e),"renderBodyCellWithData",(function(t){return function(r,o){return e.renderBodyCell(t,r,o)}})),(0,l.Z)((0,s.Z)(e),"handleResizeColumn",(function(t,r){var o=(0,de.Z)(e.state.widths);o[t]=r.width?Number(r.width):pe.z7,e.setState({widths:o})})),e}return(0,n.Z)(d,[{key:"renderHeadCell",value:function(e,t,r,o){var n=this.props.location,s={field:r.key,width:r.width},a=e.sortForField(s,t),i=(0,v.M3)(s,t),c=a?a.kind:void 0;return(0,H.tZ)(me.Z,{align:"left",title:o.name,direction:c,canSort:i,generateSortLink:function(){var r;if(t){var o=e.sortOnField(s,t).generateQueryStringObject().sort;return be(be({},n),{},{query:be(be({},n.query),{},(r={},(0,l.Z)(r,ve,void 0),(0,l.Z)(r,"tagSort",o),r))})}},onClick:function(){}})}},{key:"render",value:function(){var e=this.props,t=e.eventView,r=e.tagKey,o=e.location,n=e.isLoading,s=e.tableData,a=[].concat(Oe).map((function(e){var t=be({},e);return"tagValue"===e.key&&(t.name=r),t}));return(0,H.tZ)(pe.ZP,{isLoading:n,data:s&&s.data?s.data:[],columnOrder:a,columnSortBy:[],grid:{renderHeadCell:this.renderHeadCellWithMeta(t,{},a),renderBodyCell:this.renderBodyCellWithData(this.props),onResizeColumn:this.handleResizeColumn},location:o})}}]),d}(d.Component);Ze.displayName="TagValueTable";var we=(0,u.Z)("div",{target:"e1gt1k5a0"})("display:flex;align-items:center;justify-content:center;grid-gap:",(0,B.Z)(1),";width:100px;");function _e(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function xe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_e(Object(r),!0).forEach((function(t){(0,l.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_e(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Pe=function(e){var t=e.eventView,r=e.location,o=e.organization,n=e.projects,s=e.tagKey,a=(0,z.e2)(N.f1.None,n,t);return s?(0,H.BX)(d.Fragment,{children:[(0,H.tZ)(Q,{eventView:t,orgSlug:o.slug,location:r,aggregateColumn:a,limit:10,tagKey:s,sort:"-frequency",children:function(t){var r=t.isLoading,o=t.tableData;return(0,H.tZ)(ue,xe(xe({},e),{},{tableData:o,isLoading:r}))}}),(0,H.tZ)(q.Z,{eventView:t,orgSlug:o.slug,location:r,aggregateColumn:a,tagKey:s,limit:10,sort:"-frequency",allTagKeys:!0,children:function(t){var r=t.isLoading,o=t.tableData;return(0,H.tZ)(Ze,xe(xe({},e),{},{tableData:o,isLoading:r}))}})]}):null};Pe.displayName="TagsDisplay";const ke=(0,L.b)(Pe);function Se(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function De(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Se(Object(r),!0).forEach((function(t){(0,l.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Se(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Te=function(e){var t=e.eventView,r=e.location,o=e.organization,n=e.projects,s=e.transactionName,a=(0,z.e2)(N.f1.None,n,t);return(0,H.BX)(d.Fragment,{children:[(0,H.tZ)(R.Z,{eventView:t,location:r,organization:o,projects:n,transactionName:s,currentTab:R.O.Tags,hasWebVitals:(0,V.Q_)(r,n,t).field===V.BY.FRONTEND_PAGELOAD,handleIncompatibleQuery:function(){}}),(0,H.tZ)(q.Z,{eventView:t,orgSlug:o.slug,location:r,aggregateColumn:a,limit:20,sort:"-sumdelta",allTagKeys:!0,children:function(t){var r=t.isLoading,o=t.tableData;return(0,H.tZ)(Ce,De(De({},e),{},{isLoading:r,tableData:o}))}})]})};Te.displayName="TagsPageContent";var Ce=function(e){var t=e.eventView,r=e.location,o=e.organization,n=e.tableData;if(!n)return null;var s=function(e){var t=[],r=[];return e.data.forEach((function(e){(e.comparison>1?t:r).push(e.tags_key)})),{suspectTags:t,otherTags:r}}(n),a=s.suspectTags.length?s.suspectTags[0]:s.otherTags.length?s.otherTags[0]:"",i=(0,d.useState)(a),c=(0,k.Z)(i,2),l=c[0],u=c[1];(0,d.useEffect)((function(){a&&!l&&u(a)}),[a]),l&&t.additionalConditions.setTagValues("has",[l]);var m=(0,O.ro)(r.query.query,"");return(0,H.BX)(Ae,{children:[(0,H.tZ)(Ee,{suspectTags:s.suspectTags,otherTags:s.otherTags,tagSelected:l,changeTag:function(e){return u(e)}}),(0,H.BX)(Ne,{children:[(0,H.tZ)(ze,{children:(0,H.tZ)(Re,{organization:o,projectIds:t.project,query:m,fields:t.fields,onSearch:function(e){var t=(0,T.Q)(De(De({},r.query||{}),{},{query:e}));p.browserHistory.push({pathname:r.pathname,query:t})}})}),(0,H.tZ)(ke,De(De({},e),{},{tagKey:l}))]})]})};Ce.displayName="InnerContent";var Ee=function(e){var t=e.suspectTags,r=e.otherTags,o=e.changeTag,n=e.tagSelected;return(0,H.BX)(Ve,{children:[t.length?(0,H.BX)(d.Fragment,{children:[(0,H.BX)(qe,{children:[(0,h.t)("Suspect Tags"),(0,H.tZ)(C.Z,{position:"top",title:(0,h.t)("Suspect tags are tags that often correspond to slower transaction"),size:"sm"})]}),t.map((function(e){return(0,H.BX)(Be,{children:[(0,H.tZ)(E.Z,{"aria-label":e,checked:n===e,onChange:function(){return o(e)}}),e]},e)})),(0,H.tZ)(A.uI,{})]}):null,(0,H.BX)(qe,{children:[(0,h.t)("Other Tags"),(0,H.tZ)(C.Z,{position:"top",title:(0,h.t)("Other common tags for this transaction"),size:"sm"})]}),r.map((function(e){return(0,H.BX)(Be,{children:[(0,H.tZ)(E.Z,{"aria-label":e,checked:n===e,onChange:function(){return o(e)}}),e]},e)}))]})};Ee.displayName="TagsSideBar";var Be=(0,u.Z)("label",{target:"e5m8yi86"})("cursor:pointer;margin-bottom:",(0,B.Z)(1),";font-weight:normal;display:grid;grid-auto-flow:column;grid-auto-columns:max-content;align-items:center;grid-gap:",(0,B.Z)(1),";"),qe=(0,u.Z)(S.OT,{target:"e5m8yi85"})("margin-bottom:",(0,B.Z)(2),";"),Ae=(0,u.Z)("div",{target:"e5m8yi84"})("padding:",(0,B.Z)(2),";margin:0;background-color:",(function(e){return e.theme.background}),";flex-grow:1;@media (min-width: ",(function(e){return e.theme.breakpoints[0]}),"){padding:",(0,B.Z)(3)," ",(0,B.Z)(4),";}@media (min-width: ",(function(e){return e.theme.breakpoints[1]}),"){display:grid;grid-template-columns:auto 66%;align-content:start;grid-gap:",(0,B.Z)(3),";}@media (min-width: ",(function(e){return e.theme.breakpoints[2]}),"){grid-template-columns:225px minmax(100px, auto);}"),Ve=(0,u.Z)("div",{target:"e5m8yi83"})({name:"sarfoe",styles:"grid-column:1/2"}),Ne=(0,u.Z)("div",{target:"e5m8yi82"})({name:"g99mcu",styles:"grid-column:2/4;max-width:100%"}),Re=(0,u.Z)(D.Z,{target:"e5m8yi81"})({name:"1ff36h2",styles:"flex-grow:1"}),ze=(0,u.Z)("div",{target:"e5m8yi80"})("margin-top:",(0,B.Z)(1),";margin-bottom:",(0,B.Z)(3),";");const Le=Te;function Xe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function Fe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Xe(Object(r),!0).forEach((function(t){(0,l.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Xe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var He=function(e){(0,a.Z)(d,e);var t,r,u=(t=d,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,o=(0,c.Z)(t);if(r){var n=(0,c.Z)(this).constructor;e=Reflect.construct(o,arguments,n)}else e=o.apply(this,arguments);return(0,i.Z)(this,e)});function d(){var e;(0,o.Z)(this,d);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return e=u.call.apply(u,[this].concat(r)),(0,l.Z)((0,s.Z)(e),"state",{eventView:Ie(e.props.location,(0,P.JY)(e.props.location))}),(0,l.Z)((0,s.Z)(e),"renderNoAccess",(function(){return(0,H.tZ)(f.Z,{type:"warning",children:(0,h.t)("You don't have access to this feature")})})),e}return(0,n.Z)(d,[{key:"getDocumentTitle",value:function(){var e=(0,P.JY)(this.props.location);return"string"==typeof e&&String(e).trim().length>0?[String(e).trim(),(0,h.t)("Tags")].join(" — "):[(0,h.t)("Summary"),(0,h.t)("Tags")].join(" — ")}},{key:"render",value:function(){var e=this.props,t=e.organization,r=e.projects,o=e.location,n=this.state.eventView,s=(0,P.JY)(o);if(!n||void 0===s)return p.browserHistory.replace({pathname:"/organizations/".concat(t.slug,"/performance/"),query:Fe({},o.query)}),null;var a=1===n.project.length,i=a?r.find((function(e){return parseInt(e.id,10)===n.project[0]})):void 0,c=n.project.map((function(e){return r.find((function(t){return parseInt(t.id,10)===e}))})).filter((function(e){return void 0!==e})).map((function(e){return e.slug}));return(0,H.tZ)(y.Z,{title:this.getDocumentTitle(),orgSlug:t.slug,projectSlug:null==i?void 0:i.slug,children:(0,H.tZ)(m.Z,{features:["performance-tag-page"],organization:t,renderDisabled:this.renderNoAccess,children:(0,H.tZ)(j.Z,{lockedMessageSubject:(0,h.t)("transaction"),shouldForceProject:a,forceProject:i,specificProjectSlugs:c,disableMultipleProjectSelection:!0,showProjectSettingsLink:!0,children:(0,H.tZ)(Me,{children:(0,H.tZ)(g.Z,{organization:t,children:(0,H.tZ)(Le,{location:o,eventView:n,transactionName:s,organization:t,projects:r})})})})})})}}],[{key:"getDerivedStateFromProps",value:function(e,t){return Fe(Fe({},t),{},{eventView:Ie(e.location,(0,P.JY)(e.location))})}}]),d}(d.Component);He.displayName="TransactionTags";var Me=(0,u.Z)(b.JH,{target:"evcjml0"})({name:"1hcx8jb",styles:"padding:0"});function Ie(e,t){if(void 0!==t){var r=(0,O.ro)(e.query.query,""),o=(0,Z.aI)(r);return v.ZP.fromNewQueryWithLocation({id:void 0,version:2,name:t,fields:["transaction.duration"],query:(0,Z.gZ)(o),projects:[]},e)}}const Ke=(0,w.Z)((0,x.Z)((0,_.Z)(He)))}}]);
//# sourceMappingURL=app_views_performance_transactionSummary_transactionTags_index_tsx.js.map