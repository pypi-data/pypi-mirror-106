(self.webpackChunk=self.webpackChunk||[]).push([["app_views_settings_projectAlerts_create_tsx"],{"./app/views/settings/projectAlerts/create.tsx":(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>Y}),r("../node_modules/core-js/modules/es.reflect.construct.js"),r("../node_modules/core-js/modules/es.object.keys.js"),r("../node_modules/core-js/modules/es.symbol.js"),r("../node_modules/core-js/modules/es.array.filter.js"),r("../node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),r("../node_modules/core-js/modules/es.array.for-each.js"),r("../node_modules/core-js/modules/web.dom-collections.for-each.js"),r("../node_modules/core-js/modules/es.object.get-own-property-descriptors.js"),r("../node_modules/core-js/modules/es.object.define-properties.js"),r("../node_modules/core-js/modules/es.object.define-property.js");var s=r("../node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),o=r("../node_modules/@babel/runtime/helpers/esm/createClass.js"),n=r("../node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js"),i=r("../node_modules/@babel/runtime/helpers/esm/inherits.js"),a=r("../node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),l=r("../node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),c=r("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),u=r("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),d=(r("../node_modules/core-js/modules/es.array.concat.js"),r("../node_modules/core-js/modules/es.array.includes.js"),r("../node_modules/core-js/modules/es.string.includes.js"),r("../node_modules/core-js/modules/es.regexp.exec.js"),r("../node_modules/core-js/modules/es.string.replace.js"),r("../node_modules/react/index.js")),p=r("../node_modules/react-router/es/index.js"),m=r("./app/components/layouts/thirds.tsx"),h=r("./app/components/sentryDocumentTitle.tsx"),f=r("./app/locale.tsx"),j=r("./app/styles/space.tsx"),y=r("./app/utils/analytics.tsx"),g=r("./app/utils/discover/eventView.tsx"),b=r("./app/utils/guid.tsx"),Z=r("./app/views/alerts/builder/builderBreadCrumbs.tsx"),v=r("./app/views/alerts/wizard/options.tsx"),w=r("./app/views/alerts/wizard/utils.tsx"),_=r("../node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js"),x=(r("../node_modules/core-js/modules/es.array.map.js"),r("../node_modules/core-js/modules/es.array.iterator.js"),r("../node_modules/core-js/modules/es.object.to-string.js"),r("../node_modules/core-js/modules/es.set.js"),r("../node_modules/core-js/modules/es.string.iterator.js"),r("../node_modules/core-js/modules/web.dom-collections.iterator.js"),r("../node_modules/core-js/modules/es.array.find.js"),r("./app/utils/withTeams.tsx")),O=r("./app/views/settings/incidentRules/constants.tsx"),S=r("./app/views/settings/incidentRules/ruleForm/index.tsx"),T=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function z(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,s)}return r}function C(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?z(Object(r),!0).forEach((function(t){(0,c.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):z(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var P=function(e){(0,i.Z)(d,e);var t,r,u=(t=d,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,s=(0,l.Z)(t);if(r){var o=(0,l.Z)(this).constructor;e=Reflect.construct(s,arguments,o)}else e=s.apply(this,arguments);return(0,a.Z)(this,e)});function d(){var e;(0,s.Z)(this,d);for(var t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return e=u.call.apply(u,[this].concat(r)),(0,c.Z)((0,n.Z)(e),"handleSubmitSuccess",(function(){var t=e.props.router,r=e.props.params.orgId;y.oF.endTransaction({name:"saveAlertRule"}),t.push("/organizations/".concat(r,"/alerts/rules/"))})),e}return(0,o.Z)(d,[{key:"render",value:function(){var e=this.props,t=e.project,r=e.eventView,s=e.wizardTemplate,o=e.sessionId,n=e.teams,i=(0,_.Z)(e,["project","eventView","wizardTemplate","sessionId","teams"]),a=r?(0,O.H9)(r):s?(0,O.Q6)(s):(0,O.ep)(),l=n.filter((function(e){return e.isMember})).map((function(e){return e.id})),c=new Set(l);if(i.organization.features.includes("team-alerts-ownership")){var u,d=new Set(t.teams.map((function(e){return e.id}))),p=null!==(u=l.find((function(e){return d.has(e)})))&&void 0!==u?u:null;a.owner=p&&"team:".concat(p)}return(0,T.tZ)(S.Z,C({onSubmitSuccess:this.handleSubmitSuccess,rule:C(C({},a),{},{projects:[t.slug]}),sessionId:o,project:t,userTeamIds:c},i))}}]),d}(d.Component);P.displayName="IncidentRulesCreate";const B=(0,x.Z)(P);var k=r("./app/views/settings/projectAlerts/issueRuleEditor/index.tsx"),I=r("./app/components/acl/feature.tsx"),A=r("./app/components/card.tsx"),N=r("./app/components/list/index.tsx"),R=r("./app/components/list/listItem.tsx"),F=r("./app/components/radio.tsx"),X=r("./app/components/tooltip.tsx"),D=r("./app/styles/text.tsx"),E=function(e){var t=e.children;return(0,T.tZ)(X.Z,{title:(0,f.t)("A metric is the value of an aggregate function like count() or avg()\n       applied to your events over time"),children:(0,T.tZ)("abbr",{children:t})})};E.displayName="MetricsTooltip";var V=function(e){var t=e.children;return(0,T.tZ)(X.Z,{title:(0,f.t)("Sentry groups similar events into an Issue based on their stack trace\n       and other factors."),children:(0,T.tZ)("abbr",{children:t})})};V.displayName="IssuesTooltip";var q=function(e){var t=e.onChange,r=e.organization,s=e.selected,o=function(e){(0,y.ec)({eventKey:"alert_chooser_cards.select",eventName:"Alert Chooser Cards: Select",organization_id:r.id,type:e}),t(e)};return(0,T.BX)(H,{children:[(0,T.BX)(K,{interactive:!0,onClick:function(){return o("metric")},children:[(0,T.BX)(M,{children:[(0,T.tZ)(F.Z,{"aria-label":"metric",checked:"metric"===s,onChange:function(){return o("metric")}}),(0,f.t)("Metric Alert")]}),(0,T.tZ)(I.Z,{requireAll:!0,features:["organizations:performance-view"],children:function(e){return e.hasFeature?(0,T.BX)(d.Fragment,{children:[(0,T.tZ)("p",{children:(0,f._N)("Notifies you when a [tooltip:metric] crosses a threshold.",{tooltip:(0,T.tZ)(E,{})})}),!s&&(0,T.BX)(d.Fragment,{children:[(0,T.tZ)(W,{children:(0,f.t)("For Example:")}),(0,T.BX)(N.Z,{symbol:"bullet",children:[(0,T.tZ)(R.Z,{children:(0,f.t)("Performance metrics like latency and apdex")}),(0,T.tZ)(R.Z,{children:(0,f.t)("Frequency of error events or users affected in the project")})]})]})]}):(0,T.BX)(d.Fragment,{children:[(0,T.tZ)("p",{children:(0,f._N)("Notifies you when a [tooltip:metric] like frequency of events or users affected in\n                   the project crosses a threshold.",{tooltip:(0,T.tZ)(E,{})})}),!s&&(0,T.BX)(d.Fragment,{children:[(0,T.tZ)(W,{children:(0,f.t)("For Example:")}),(0,T.BX)(N.Z,{symbol:"bullet",children:[(0,T.tZ)(R.Z,{children:(0,f.t)("Total events in the project exceed 1000/minute")}),(0,T.tZ)(R.Z,{children:(0,f._N)('Events with tag [code:database] and "API" in the title exceed 100/minute',{code:(0,T.tZ)("code",{})})})]})]})]})}})]}),(0,T.BX)(K,{interactive:!0,onClick:function(){return o("issue")},children:[(0,T.BX)(M,{children:[(0,T.tZ)(F.Z,{"aria-label":"issue",checked:"issue"===s,onChange:function(){return o("issue")}}),(0,f.t)("Issue Alert")]}),(0,T.tZ)("p",{children:(0,f._N)("Notifies you when individual [tooltip:Sentry Issues] trigger your\n           alerting criteria.",{tooltip:(0,T.tZ)(V,{})})}),!s&&(0,T.BX)(d.Fragment,{children:[(0,T.tZ)(W,{children:(0,f.t)("For Example:")}),(0,T.BX)(N.Z,{symbol:"bullet",children:[(0,T.tZ)(R.Z,{children:(0,f.t)("New Issues or regressions")}),(0,T.tZ)(R.Z,{children:(0,f.t)("Frequency of individual Issues exceeds 100/minute")})]})]})]})]})};q.displayName="TypeChooser";var M=(0,u.Z)("label",{target:"e1y238533"})("cursor:pointer;margin-bottom:",(0,j.Z)(3),";display:grid;grid-auto-flow:column;grid-auto-columns:max-content;align-items:center;grid-gap:",(0,j.Z)(2),";"),W=(0,u.Z)("div",{target:"e1y238532"})("text-transform:uppercase;font-size:",(function(e){return e.theme.fontSizeSmall}),";font-weight:bold;color:",(function(e){return e.theme.subText}),";margin-bottom:",(0,j.Z)(2),";"),H=(0,u.Z)("div",{target:"e1y238531"})("display:grid;grid-template-columns:1fr 1fr;grid-gap:",(0,j.Z)(3),";"),K=(0,u.Z)(A.Z,{target:"e1y238530"})("cursor:pointer;padding:",(0,j.Z)(4),";margin-bottom:",(0,j.Z)(3),";",D.Z,";");const L=q;function Q(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,s)}return r}function G(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Q(Object(r),!0).forEach((function(t){(0,c.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Q(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var J=function(e){(0,i.Z)(j,e);var t,r,u=(t=j,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,s=(0,l.Z)(t);if(r){var o=(0,l.Z)(this).constructor;e=Reflect.construct(s,arguments,o)}else e=s.apply(this,arguments);return(0,a.Z)(this,e)});function j(){var e;(0,s.Z)(this,j);for(var t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return e=u.call.apply(u,[this].concat(r)),(0,c.Z)((0,n.Z)(e),"state",{eventView:void 0,alertType:e.props.location.pathname.includes("/alerts/rules/")?"issue":e.props.location.pathname.includes("/alerts/metric-rules/")?"metric":null}),(0,c.Z)((0,n.Z)(e),"sessionId",(0,b.E)()),(0,c.Z)((0,n.Z)(e),"handleChangeAlertType",(function(t){e.setState({alertType:t})})),e}return(0,o.Z)(j,[{key:"componentDidMount",value:function(){var e=this.props,t=e.organization,r=e.location,s=e.project,o=t.features.includes("alert-wizard");if((0,y.ec)({eventKey:"new_alert_rule.viewed",eventName:"New Alert Rule: Viewed",organization_id:t.id,project_id:s.id,session_id:this.sessionId}),null!=r&&r.query){var n=r.query,i=n.createFromDiscover,a=n.createFromWizard;if(i){var l=g.ZP.fromLocation(r);this.setState({alertType:"metric",eventView:l})}else if(a){var c=n.aggregate,u=n.dataset,d=n.eventTypes;c&&u&&d?this.setState({alertType:"metric",wizardTemplate:{aggregate:c,dataset:u,eventTypes:d}}):this.setState({alertType:"issue"})}else o&&p.browserHistory.replace("/organizations/".concat(t.slug,"/alerts/").concat(s.id,"/wizard"))}}},{key:"render",value:function(){var e,t,r=this.props,s=r.hasMetricAlerts,o=r.organization,n=r.project,i=r.params.projectId,a=r.location,l=this.state,c=l.alertType,u=l.eventView,p=l.wizardTemplate,j=o.features.includes("alert-wizard"),y=s&&!j;null!=a&&null!==(e=a.query)&&void 0!==e&&e.createFromWizard&&(t=p?(0,w.k)(p):"issues");var g=(0,f.t)("New Alert Rule");return(0,T.BX)(d.Fragment,{children:[(0,T.tZ)(h.Z,{title:g,projectSlug:i}),(0,T.tZ)(m.h4,{children:(0,T.BX)(m.oB,{children:[(0,T.tZ)(Z.Z,{hasMetricAlerts:s,orgSlug:o.slug,alertName:(0,f.t)("Set Conditions"),title:t?(0,f.t)("Select Alert"):g,projectSlug:i}),(0,T.tZ)(m.Dx,{children:t?"".concat((0,f.t)("Set Conditions for")," ").concat(v.gb[t]):g})]})}),(0,T.tZ)(U,{children:(0,T.BX)(m.or,{fullWidth:!0,children:[y&&(0,T.tZ)(L,{organization:o,selected:c,onChange:this.handleChangeAlertType}),(!s||"issue"===c)&&(0,T.tZ)(k.Z,G(G({},this.props),{},{project:n})),s&&"metric"===c&&(0,T.tZ)(B,G(G({},this.props),{},{eventView:u,wizardTemplate:p,sessionId:this.sessionId,project:n,isCustomMetric:"custom"===t}))]})})]})}}]),j}(d.Component);J.displayName="Create";var U=(0,u.Z)(m.uT,{target:"es9d0800"})("margin-bottom:-",(0,j.Z)(3),";*:not(img){max-width:1000px;}");const Y=J}}]);
//# sourceMappingURL=app_views_settings_projectAlerts_create_tsx.js.map