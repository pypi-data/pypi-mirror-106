(self.webpackChunk=self.webpackChunk||[]).push([["app_views_settings_organizationMembers_organizationMemberDetail_tsx"],{"./app/utils/recreateRoute.tsx":(e,t,r)=>{"use strict";r.d(t,{Z:()=>a}),r("../node_modules/core-js/modules/es.array.map.js"),r("../node_modules/core-js/modules/es.array.index-of.js"),r("../node_modules/core-js/modules/es.array.slice.js"),r("../node_modules/core-js/modules/es.regexp.exec.js"),r("../node_modules/core-js/modules/es.string.search.js"),r("../node_modules/core-js/modules/es.array.concat.js"),r("../node_modules/core-js/modules/es.array.join.js");var n=r("../node_modules/lodash/findLastIndex.js"),s=r.n(n),o=r("./app/utils/replaceRouterParams.tsx");function a(e,t){var r,n,a,i,l=t.routes,c=t.params,d=t.location,u=t.stepBack,m=l.map((function(e){return e.path||""}));"string"!=typeof e?(i=l.indexOf(e)+1,a=s()(m.slice(0,i),(function(e){return"/"===e[0]}))):a=s()(m,(function(e){return"/"===e[0]}));var p=m.slice(a,i);void 0!==u&&(p=p.slice(0,u));var h=null!==(r=null==d?void 0:d.search)&&void 0!==r?r:"",f=null!==(n=null==d?void 0:d.hash)&&void 0!==n?n:"",b="".concat(p.join("")).concat("string"!=typeof e?"":e).concat(h).concat(f);return(0,o.Z)(b,c)}},"./app/views/settings/organizationMembers/organizationMemberDetail.tsx":(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>U}),r("../node_modules/core-js/modules/es.reflect.construct.js"),r("../node_modules/core-js/modules/es.object.keys.js"),r("../node_modules/core-js/modules/es.symbol.js"),r("../node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),r("../node_modules/core-js/modules/es.array.for-each.js"),r("../node_modules/core-js/modules/web.dom-collections.for-each.js"),r("../node_modules/core-js/modules/es.object.get-own-property-descriptors.js"),r("../node_modules/core-js/modules/es.object.define-properties.js"),r("../node_modules/core-js/modules/es.object.define-property.js");var n=r("../node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js"),s=r("../node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),o=r("../node_modules/@babel/runtime/helpers/esm/createClass.js"),a=r("../node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js"),i=r("../node_modules/@babel/runtime/helpers/esm/get.js"),l=r("../node_modules/@babel/runtime/helpers/esm/inherits.js"),c=r("../node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),d=r("../node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),u=r("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),m=r("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),p=r("../node_modules/@babel/runtime/regenerator/index.js"),h=r.n(p),f=(r("../node_modules/core-js/modules/es.array.concat.js"),r("../node_modules/core-js/modules/es.array.includes.js"),r("../node_modules/core-js/modules/es.string.includes.js"),r("../node_modules/core-js/modules/es.array.filter.js"),r("../node_modules/core-js/modules/es.array.map.js"),r("../node_modules/core-js/modules/es.array.iterator.js"),r("../node_modules/core-js/modules/es.object.to-string.js"),r("../node_modules/core-js/modules/es.promise.js"),r("../node_modules/core-js/modules/es.string.iterator.js"),r("../node_modules/core-js/modules/web.dom-collections.iterator.js"),r("../node_modules/core-js/modules/es.function.name.js"),r("../node_modules/react/index.js")),b=r("../node_modules/react-router/es/index.js"),v=r("../node_modules/@sentry/minimal/esm/index.js"),g=r("./app/actionCreators/account.tsx"),Z=r("./app/actionCreators/indicator.tsx"),j=r("./app/actionCreators/members.tsx"),y=r("./app/components/autoSelectText.tsx"),x=r("./app/components/button.tsx"),w=r("./app/components/confirm.tsx"),_=r("./app/components/dateTime.tsx"),R=r("./app/components/errors/notFound.tsx"),k=r("./app/components/links/externalLink.tsx"),S=r("./app/components/panels/index.tsx"),B=r("./app/components/tooltip.tsx"),O=r("./app/locale.tsx"),C=r("./app/styles/input.tsx"),P=r("./app/styles/space.tsx"),z=r("./app/utils/recreateRoute.tsx"),I=r("./app/utils/withOrganization.tsx"),T=r("./app/views/asyncView.tsx"),X=r("./app/views/settings/components/forms/field/index.tsx"),A=r("./app/views/settings/components/settingsPageHeader.tsx"),N=r("./app/views/settings/components/teamSelect.tsx"),L=r("./app/components/radio.tsx"),M=r("./app/views/settings/components/text/textBlock.tsx"),D=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");var E=(0,m.Z)("label",{target:"eh6xwcb0"})({name:"ddvan8",styles:"display:flex;flex:1;align-items:center;margin-bottom:0"}),F=function(e){(0,l.Z)(a,e);var t,r,n=(t=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,d.Z)(t);if(r){var s=(0,d.Z)(this).constructor;e=Reflect.construct(n,arguments,s)}else e=n.apply(this,arguments);return(0,c.Z)(this,e)});function a(){return(0,s.Z)(this,a),n.apply(this,arguments)}return(0,o.Z)(a,[{key:"render",value:function(){var e=this,t=this.props,r=t.disabled,n=t.enforceAllowed,s=t.roleList,o=t.selectedRole;return(0,D.BX)(S.s_,{children:[(0,D.tZ)(S.V9,{children:(0,O.t)("Role")}),(0,D.tZ)(S.N,{children:s.map((function(t){var s=t.desc,a=t.name,i=t.id,l=t.allowed,c=r||n&&!l;return(0,D.tZ)(S.Lv,{onClick:function(){return!c&&e.props.setRole(i)},css:c?{color:"grey",cursor:"default"}:{},children:(0,D.BX)(E,{children:[(0,D.tZ)(L.Z,{id:i,value:a,checked:i===o,readOnly:!0}),(0,D.BX)("div",{style:{flex:1,padding:"0 16px"},children:[a,(0,D.tZ)(M.Z,{noMargin:!0,children:(0,D.tZ)("div",{className:"help-block",children:s})})]})]})},i)}))})]})}}]),a}(f.Component);F.displayName="RoleSelect";const q=F;function V(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function H(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?V(Object(r),!0).forEach((function(t){(0,u.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):V(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var G=(0,O.t)("Cannot be reset since user is in more than one organization"),J=(0,O.t)("Not enrolled in two-factor authentication"),Y=(0,O.t)("You do not have permission to perform this action"),K=(0,O.t)("Cannot be reset since two-factor is required for this organization"),Q=function(e){(0,l.Z)(p,e);var t,r,m=(t=p,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,d.Z)(t);if(r){var s=(0,d.Z)(this).constructor;e=Reflect.construct(n,arguments,s)}else e=n.apply(this,arguments);return(0,c.Z)(this,e)});function p(){var e;(0,s.Z)(this,p);for(var t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return e=m.call.apply(m,[this].concat(r)),(0,u.Z)((0,a.Z)(e),"handleSave",(0,n.Z)(h().mark((function t(){var r,n,s,o;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.props,n=r.organization,s=r.params,(0,Z.E3)((0,O.t)("Saving...")),e.setState({busy:!0}),t.prev=3,t.next=6,(0,j.hS)(e.api,{orgId:n.slug,memberId:s.memberId,data:e.state.member});case 6:(0,Z.S9)((0,O.t)("Saved")),e.redirectToMemberPage(),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(3),o=t.t0&&t.t0.responseJSON&&t.t0.responseJSON.detail||(0,O.t)("Could not save..."),(0,Z.Iw)(o);case 14:e.setState({busy:!1});case 15:case"end":return t.stop()}}),t,null,[[3,10]])})))),(0,u.Z)((0,a.Z)(e),"handleInvite",function(){var t=(0,n.Z)(h().mark((function t(r){var n,s,o,a;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props,s=n.organization,o=n.params,(0,Z.E3)((0,O.t)("Sending invite...")),e.setState({busy:!0}),t.prev=3,t.next=6,(0,j.R_)(e.api,{orgId:s.slug,memberId:o.memberId,regenerate:r});case 6:a=t.sent,(0,Z.S9)((0,O.t)("Sent invite!")),r&&e.setState((function(e){return{member:H(H({},e.member),a)}})),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(3),(0,Z.Iw)((0,O.t)("Could not send invite"));case 14:e.setState({busy:!1});case 15:case"end":return t.stop()}}),t,null,[[3,11]])})));return function(e){return t.apply(this,arguments)}}()),(0,u.Z)((0,a.Z)(e),"handleAddTeam",(function(t){var r=e.state.member;r.teams.includes(t.slug)||r.teams.push(t.slug),e.setState({member:r})})),(0,u.Z)((0,a.Z)(e),"handleRemoveTeam",(function(t){var r=e.state.member;e.setState({member:H(H({},r),{},{teams:r.teams.filter((function(e){return e!==t}))})})})),(0,u.Z)((0,a.Z)(e),"handle2faReset",(0,n.Z)(h().mark((function t(){var r,n,s,o,a,i;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.props,n=r.organization,s=r.router,o=e.state.member,a=o.user,i=a.authenticators.map((function(t){return(0,g.Hb)(e.api,a.id,t.id)})),t.prev=3,t.next=6,Promise.all(i);case 6:s.push("/settings/".concat(n.slug,"/members/")),(0,Z.S9)((0,O.t)("All authenticators have been removed")),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(3),(0,Z.Iw)((0,O.t)("Error removing authenticators")),v.Tb(t.t0);case 14:case"end":return t.stop()}}),t,null,[[3,10]])})))),(0,u.Z)((0,a.Z)(e),"showResetButton",(function(){var t=e.props.organization,r=e.state.member.user;return!(!r||!r.authenticators||t.require2FA)&&r.authenticators.length>=1&&r.canReset2fa})),(0,u.Z)((0,a.Z)(e),"getTooltip",(function(){var t=e.props.organization,r=e.state.member.user;return r?r.authenticators?r.authenticators.length?r.canReset2fa?t.require2FA?K:"":G:J:Y:""})),e}return(0,o.Z)(p,[{key:"getDefaultState",value:function(){return H(H({},(0,i.Z)((0,d.Z)(p.prototype),"getDefaultState",this).call(this)),{},{roleList:[],selectedRole:"",member:null})}},{key:"getEndpoints",value:function(){var e=this.props,t=e.organization,r=e.params;return[["member","/organizations/".concat(t.slug,"/members/").concat(r.memberId,"/")]]}},{key:"redirectToMemberPage",value:function(){var e=this.props,t=e.location,r=e.params,n=e.routes,s=(0,z.Z)("members/",{location:t,routes:n,params:r,stepBack:-2});b.browserHistory.push(s)}},{key:"renderBody",value:function(){var e=this,t=this.props.organization,r=this.state.member;if(!r)return(0,D.tZ)(R.Z,{});var n=t.access,s=r.invite_link,o=n.includes("org:write"),a=r.email,i=!r.expired,l=!r.pending;return(0,D.BX)(f.Fragment,{children:[(0,D.tZ)(A.Z,{title:(0,D.BX)(f.Fragment,{children:[(0,D.tZ)("div",{children:r.name}),(0,D.tZ)(W,{children:(0,O.t)("Member Settings")})]})}),(0,D.BX)(S.s_,{children:[(0,D.tZ)(S.V9,{children:(0,O.t)("Basics")}),(0,D.tZ)(S.N,{children:(0,D.tZ)(S.Lv,{children:(0,D.BX)(te,{children:[(0,D.BX)($,{children:[(0,D.BX)("div",{children:[(0,D.tZ)(ee,{children:(0,O.t)("Email")}),(0,D.tZ)("div",{children:(0,D.tZ)(k.Z,{href:"mailto:".concat(a),children:a})})]}),(0,D.BX)("div",{children:[(0,D.tZ)(ee,{children:(0,O.t)("Status")}),(0,D.tZ)("div",{"data-test-id":"member-status",children:r.expired?(0,D.tZ)("em",{children:(0,O.t)("Invitation Expired")}):r.pending?(0,D.tZ)("em",{children:(0,O.t)("Invitation Pending")}):(0,O.t)("Active")})]}),(0,D.BX)("div",{children:[(0,D.tZ)(ee,{children:(0,O.t)("Added")}),(0,D.tZ)("div",{children:(0,D.tZ)(_.Z,{dateOnly:!0,date:r.dateCreated})})]})]}),s&&(0,D.BX)(re,{children:[(0,D.BX)("div",{children:[(0,D.tZ)(ee,{children:(0,O.t)("Invite Link")}),(0,D.tZ)(y.Z,{children:(0,D.tZ)(ne,{children:s})}),(0,D.tZ)("p",{className:"help-block",children:(0,O.t)("This unique invite link may only be used by this member.")})]}),(0,D.BX)(se,{children:[(0,D.tZ)(x.ZP,{onClick:function(){return e.handleInvite(!0)},children:(0,O.t)("Generate New Invite")}),i&&(0,D.tZ)(x.ZP,{"data-test-id":"resend-invite",onClick:function(){return e.handleInvite(!1)},children:(0,O.t)("Resend Invite")})]})]})]})})})]}),l&&(0,D.BX)(S.s_,{children:[(0,D.tZ)(S.V9,{children:(0,O.t)("Authentication")}),(0,D.tZ)(S.N,{children:(0,D.tZ)(X.Z,{alignRight:!0,flexibleControlStateSize:!0,label:(0,O.t)("Reset two-factor authentication"),help:(0,O.t)("Resetting two-factor authentication will remove all two-factor authentication methods for this member."),children:(0,D.tZ)(B.Z,{"data-test-id":"reset-2fa-tooltip",disabled:this.showResetButton(),title:this.getTooltip(),children:(0,D.tZ)(w.Z,{disabled:!this.showResetButton(),message:(0,O._N)("Are you sure you want to disable all two-factor authentication methods for [name]?",{name:r.name?r.name:"this member"}),onConfirm:this.handle2faReset,"data-test-id":"reset-2fa-confirm",children:(0,D.tZ)(x.ZP,{"data-test-id":"reset-2fa",priority:"danger",children:(0,O.t)("Reset two-factor authentication")})})})})})]}),(0,D.tZ)(q,{enforceAllowed:!1,disabled:!o,roleList:r.roles,selectedRole:r.role,setRole:function(t){return e.setState({member:H(H({},r),{},{role:t})})}}),(0,D.tZ)(N.Z,{organization:t,selectedTeams:r.teams,disabled:!o,onAddTeam:this.handleAddTeam,onRemoveTeam:this.handleRemoveTeam}),(0,D.tZ)(oe,{children:(0,D.tZ)(x.ZP,{priority:"primary",busy:this.state.busy,onClick:this.handleSave,disabled:!o,children:(0,O.t)("Save Member")})})]})}}]),p}(T.Z);const U=(0,I.Z)(Q);var W=(0,m.Z)("div",{target:"euxp5937"})("color:",(function(e){return e.theme.gray300}),";font-weight:normal;font-size:",(function(e){return e.theme.fontSizeLarge}),";"),$=(0,m.Z)("div",{target:"euxp5936"})("display:grid;grid-auto-flow:column;grid-template-columns:2fr 1fr 1fr;grid-gap:",(0,P.Z)(2),";width:100%;@media (max-width: ",(function(e){return e.theme.breakpoints[0]}),"){grid-auto-flow:row;grid-template-columns:auto;}"),ee=(0,m.Z)("div",{target:"euxp5935"})("font-weight:bold;margin-bottom:",(0,P.Z)(.5),";color:",(function(e){return e.theme.textColor}),";"),te=(0,m.Z)("div",{target:"euxp5934"})({name:"8za49e",styles:"overflow:hidden;flex:1"}),re=(0,m.Z)("div",{target:"euxp5933"})("border-top:1px solid ",(function(e){return e.theme.border}),";margin-top:",(0,P.Z)(2),";padding-top:",(0,P.Z)(2),";"),ne=(0,m.Z)("code",{target:"euxp5932"})((function(e){return(0,C.T)(e)}),";"),se=(0,m.Z)("div",{target:"euxp5931"})("display:grid;grid-gap:",(0,P.Z)(1),";grid-auto-flow:column;justify-content:flex-end;margin-top:",(0,P.Z)(2),";"),oe=(0,m.Z)("div",{target:"euxp5930"})({name:"skgbeu",styles:"display:flex;justify-content:flex-end"})}}]);
//# sourceMappingURL=app_views_settings_organizationMembers_organizationMemberDetail_tsx.js.map