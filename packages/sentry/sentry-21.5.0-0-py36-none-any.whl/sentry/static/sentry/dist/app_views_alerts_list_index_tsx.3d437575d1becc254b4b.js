(self.webpackChunk=self.webpackChunk||[]).push([["app_views_alerts_list_index_tsx"],{"./app/components/onboardingPanel.tsx":(e,t,r)=>{"use strict";r.d(t,{Z:()=>u});var n=r("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),s=(r("../node_modules/react/index.js"),r("./app/components/panels/index.tsx")),o=r("./app/styles/space.tsx"),i=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function a(e){var t=e.className,r=e.image,n=e.children;return(0,i.tZ)(s.s_,{className:t,children:(0,i.BX)(l,{children:[(0,i.tZ)(c,{children:r}),(0,i.tZ)(d,{children:n})]})})}a.displayName="OnboardingPanel";var l=(0,n.Z)("div",{target:"e19tujos2"})("padding:",(0,o.Z)(3),";position:relative;@media (min-width: ",(function(e){return e.theme.breakpoints[0]}),"){display:flex;align-items:center;flex-direction:row;justify-content:center;flex-wrap:wrap;min-height:300px;max-width:1000px;margin:0 auto;}@media (min-width: ",(function(e){return e.theme.breakpoints[1]}),"){min-height:350px;}"),d=(0,n.Z)("div",{target:"e19tujos1"})("z-index:1;@media (min-width: ",(function(e){return e.theme.breakpoints[0]}),"){flex:2;}"),c=(0,n.Z)(d,{target:"e19tujos0"})("position:relative;min-height:100px;max-width:300px;margin:",(0,o.Z)(2)," auto;@media (min-width: ",(function(e){return e.theme.breakpoints[0]}),"){flex:1;margin:",(0,o.Z)(3),";max-width:auto;}");const u=a},"./app/views/alerts/list/header.tsx":(e,t,r)=>{"use strict";r.d(t,{Z:()=>Z});var n=r("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),s=r("../node_modules/react/index.js"),o=r("./app/actionCreators/navigation.tsx"),i=r("./app/components/acl/feature.tsx"),a=r("./app/components/button.tsx"),l=r("./app/components/buttonBar.tsx"),d=r("./app/components/createAlertButton.tsx"),c=r("./app/components/globalSelectionLink.tsx"),u=r("./app/components/layouts/thirds.tsx"),p=r("./app/icons/index.tsx"),m=r("./app/locale.tsx"),h=r("./app/styles/space.tsx"),g=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js"),f=function(e){var t=e.router,r=e.organization,n=e.activeTab,l=(0,g.tZ)("li",{className:"rules"===n?"active":"",children:(0,g.tZ)(c.Z,{to:"/organizations/".concat(r.slug,"/alerts/rules/"),children:(0,m.t)("Alert Rules")})});return(0,g.BX)(s.Fragment,{children:[(0,g.BX)(y,{children:[(0,g.tZ)(v,{children:(0,g.tZ)(b,{children:(0,m.t)("Alerts")})}),(0,g.tZ)(u.kP,{children:(0,g.BX)(x,{gap:1,children:[(0,g.tZ)(d.Z,{organization:r,iconProps:{size:"sm"},priority:"primary",referrer:"alert_stream",showPermissionGuide:!0,children:(0,m.t)("Create Alert Rule")}),(0,g.tZ)(a.ZP,{onClick:function(e){e.preventDefault(),(0,o.T)("/settings/".concat(r.slug,"/projects/:projectId/alerts/"),t)},href:"#",icon:(0,g.tZ)(p.iC,{size:"sm"}),"aria-label":"Settings"})]})})]}),(0,g.tZ)(j,{children:(0,g.tZ)(u.mL,{underlined:!0,children:(0,g.tZ)(i.Z,{features:["alert-details-redesign"],organization:r,children:function(e){return e.hasFeature?(0,g.BX)(s.Fragment,{children:[l,(0,g.tZ)("li",{className:"stream"===n?"active":"",children:(0,g.tZ)(c.Z,{to:"/organizations/".concat(r.slug,"/alerts/"),children:(0,m.t)("History")})})]}):(0,g.BX)(s.Fragment,{children:[(0,g.tZ)(i.Z,{features:["incidents"],organization:r,children:(0,g.tZ)("li",{className:"stream"===n?"active":"",children:(0,g.tZ)(c.Z,{to:"/organizations/".concat(r.slug,"/alerts/"),children:(0,m.t)("Metric Alerts")})})}),l]})}})})})]})};f.displayName="AlertHeader";const Z=f;var y=(0,n.Z)(u.h4,{target:"e59niir4"})("border-bottom:0;@media (min-width: ",(function(e){return e.theme.breakpoints[0]}),"){grid-template-columns:1fr auto;}"),v=(0,n.Z)(u.oB,{target:"e59niir3"})("margin-bottom:0;margin-right:",(0,h.Z)(2),";"),b=(0,n.Z)(u.Dx,{target:"e59niir2"})("margin-top:",(0,h.Z)(.5),";"),j=(0,n.Z)(u.h4,{target:"e59niir1"})("padding-top:",(0,h.Z)(1),";@media (max-width: ",(function(e){return e.theme.breakpoints[1]}),"){padding-top:",(0,h.Z)(1),";}"),x=(0,n.Z)(l.Z,{target:"e59niir0"})({name:"s0vnfv",styles:"height:32px"})},"./app/views/alerts/list/index.tsx":(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>ie}),r("../node_modules/core-js/modules/es.reflect.construct.js"),r("../node_modules/core-js/modules/es.object.keys.js"),r("../node_modules/core-js/modules/es.symbol.js"),r("../node_modules/core-js/modules/es.array.filter.js"),r("../node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),r("../node_modules/core-js/modules/es.array.for-each.js"),r("../node_modules/core-js/modules/web.dom-collections.for-each.js"),r("../node_modules/core-js/modules/es.object.get-own-property-descriptors.js"),r("../node_modules/core-js/modules/es.object.define-properties.js"),r("../node_modules/core-js/modules/es.object.define-property.js");var n=r("../node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js"),s=r("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),o=r("../node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),i=r("../node_modules/@babel/runtime/helpers/esm/createClass.js"),a=r("../node_modules/@babel/runtime/helpers/esm/inherits.js"),l=r("../node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),d=r("../node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),c=r("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),u=r("../node_modules/@babel/runtime/regenerator/index.js"),p=r.n(u),m=(r("../node_modules/core-js/modules/es.array.includes.js"),r("../node_modules/core-js/modules/es.string.includes.js"),r("../node_modules/core-js/modules/es.array.iterator.js"),r("../node_modules/core-js/modules/es.object.to-string.js"),r("../node_modules/core-js/modules/es.set.js"),r("../node_modules/core-js/modules/es.string.iterator.js"),r("../node_modules/core-js/modules/web.dom-collections.iterator.js"),r("../node_modules/core-js/modules/es.array.map.js"),r("../node_modules/core-js/modules/es.array.from.js"),r("../node_modules/react/index.js")),h=r("../node_modules/lodash/flatten.js"),g=r.n(h),f=r("../node_modules/lodash/omit.js"),Z=r.n(f),y=r("./app/actionCreators/prompts.tsx"),v=r("./app/components/acl/feature.tsx"),b=r("./app/components/alert.tsx"),j=r("./app/components/asyncComponent.tsx"),x=r("./app/components/button.tsx"),w=r("./app/components/buttonBar.tsx"),_=r("./app/components/createAlertButton.tsx"),k=r("./app/components/layouts/thirds.tsx"),z=r("./app/components/links/externalLink.tsx"),O=r("./app/components/loadingIndicator.tsx"),B=r("./app/components/organizations/globalSelectionHeader/index.tsx"),P=r("./app/components/pagination.tsx"),A=r("./app/components/panels/index.tsx"),R=r("./app/components/sentryDocumentTitle.tsx"),S=r("./app/icons/index.tsx"),X=r("./app/locale.tsx"),L=r("./app/styles/space.tsx"),N=r("./app/utils/analytics.tsx"),C=r("./app/utils/projects.tsx"),q=r("./app/utils/withOrganization.tsx"),D=r("./app/views/settings/components/emptyMessage.tsx"),I=r("./app/views/alerts/list/header.tsx"),T=r("./images/spot/alerts-empty-state.svg"),V=r.n(T),F=r("./app/components/onboardingPanel.tsx"),E=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function M(e){var t=e.actions;return(0,E.BX)(F.Z,{image:(0,E.tZ)(G,{src:V()}),children:[(0,E.tZ)("h3",{children:(0,X.t)("More signal, less noise")}),(0,E.tZ)("p",{children:(0,X.t)("Not every error is worth an email. Set your own rules for alerts you need, with information that helps.")}),(0,E.tZ)(H,{gap:1,children:t})]})}M.displayName="Onboarding";var G=(0,c.Z)("img",{target:"evp2sp81"})("@media (min-width: ",(function(e){return e.theme.breakpoints[0]}),"){user-select:none;position:absolute;top:0;bottom:0;width:220px;margin-top:auto;margin-bottom:auto;transform:translateX(-50%);left:50%;}@media (min-width: ",(function(e){return e.theme.breakpoints[2]}),"){transform:translateX(-60%);width:280px;}@media (min-width: ",(function(e){return e.theme.breakpoints[3]}),"){transform:translateX(-75%);width:320px;}"),H=(0,c.Z)(w.Z,{target:"evp2sp80"})({name:"vpj881",styles:"grid-template-columns:repeat(auto-fit, minmax(130px, max-content))"});const U=M;var W=r("./app/views/alerts/list/row.tsx"),K=r("./app/views/alerts/list/styles.tsx");function Y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function J(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Y(Object(r),!0).forEach((function(t){(0,s.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Y(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Q(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,d.Z)(e);if(t){var s=(0,d.Z)(this).constructor;r=Reflect.construct(n,arguments,s)}else r=n.apply(this,arguments);return(0,l.Z)(this,r)}}var $="https://docs.sentry.io/workflow/alerts-notifications/alerts/?_ga=2.21848383.580096147.1592364314-1444595810.1582160976";function ee(e){return["open","closed"].includes(e)?e:"open"}var te=function(e){(0,a.Z)(s,e);var t,r=Q(s);function s(){return(0,o.Z)(this,s),r.apply(this,arguments)}return(0,i.Z)(s,[{key:"getEndpoints",value:function(){var e=this.props,t=e.params,r=e.location,n=e.organization,s=r.query,o=ee(s.status),i=J(J(J({},s),n.features.includes("alert-details-redesign")?{expand:["original_alert_rule"]}:{}),{},{status:o});return[["incidentList","/organizations/".concat(t&&t.orgId,"/incidents/"),{query:i}]]}},{key:"onLoadAllEndpointsSuccess",value:(t=(0,n.Z)(p().mark((function e(){var t,r,n,s,o,i,a,l,d;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((t=this.state.incidentList)&&0===t.length){e.next=4;break}return this.setState({hasAlertRule:!0,firstVisitShown:!1}),e.abrupt("return");case 4:return this.setState({loading:!0}),r=this.props,n=r.params,s=r.location,o=r.organization,e.next=8,this.api.requestPromise("/organizations/".concat(null==n?void 0:n.orgId,"/alert-rules/"),{method:"GET",query:s.query});case 8:if(i=e.sent,!(a=i.length>0)){e.next=13;break}return this.setState({hasAlertRule:a,firstVisitShown:!1,loading:!1}),e.abrupt("return");case 13:return e.next=15,(0,y.v)(this.api,{organizationId:o.id,feature:"alert_stream"});case 15:l=e.sent,(d=!(null!=l&&l.dismissedTime))&&(0,y.X)(this.api,{feature:"alert_stream",organizationId:o.id,status:"dismissed"}),this.setState({hasAlertRule:a,firstVisitShown:d,loading:!1});case 19:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"tryRenderOnboarding",value:function(){var e=this.state.firstVisitShown,t=this.props.organization;if(!e)return null;var r=(0,E.BX)(m.Fragment,{children:[(0,E.tZ)(x.ZP,{size:"small",external:!0,href:$,children:(0,X.t)("View Features")}),(0,E.tZ)(_.Z,{organization:t,iconProps:{size:"xs"},size:"small",priority:"primary",referrer:"alert_stream",children:(0,X.t)("Create Alert Rule")})]});return(0,E.tZ)(U,{actions:r})}},{key:"tryRenderEmpty",value:function(){var e=this.state,t=e.hasAlertRule,r=e.incidentList,n=ee(this.props.location.query.status);return!r||r.length>0?null:(0,E.tZ)(D.Z,{size:"medium",icon:(0,E.tZ)(S.DL,{isCircled:!0,size:"48"}),title:t?"open"===n?(0,X.t)("No unresolved metric alerts in the selected projects."):(0,X.t)("No resolved metric alerts in the selected projects."):(0,X.t)("No metric alert rules exist for the selected projects."),description:(0,X._N)("Learn more about [link:Metric Alerts]",{link:(0,E.tZ)(z.Z,{href:$})})})}},{key:"renderLoading",value:function(){return this.renderBody()}},{key:"renderList",value:function(){var e,t,r=this.state,n=r.loading,s=r.incidentList,o=r.incidentListPageLinks,i=r.hasAlertRule,a=this.props,l=a.params.orgId,d=a.organization,c=new Set(g()(null==s?void 0:s.map((function(e){return e.projects})))),u=!(!s||0!==s.length||void 0!==i),p=n||u,h=ee(this.props.location.query.status);return(0,E.BX)(m.Fragment,{children:[null!==(e=this.tryRenderOnboarding())&&void 0!==e?e:(0,E.BX)(A.s_,{children:[!n&&(0,E.tZ)(oe,{children:(0,E.BX)(K.d,{status:h,children:[(0,E.BX)(se,{status:h,children:[(0,E.tZ)("div",{children:(0,X.t)("Alert")}),"open"===h&&(0,E.tZ)("div",{children:(0,X.t)("Graph")})]}),(0,E.tZ)("div",{children:(0,X.t)("Project")}),(0,E.tZ)("div",{children:(0,X.t)("Triggered")}),"closed"===h&&(0,E.tZ)("div",{children:(0,X.t)("Duration")}),"closed"===h&&(0,E.tZ)("div",{children:(0,X.t)("Resolved")})]})}),p?(0,E.tZ)(O.Z,{}):null!==(t=this.tryRenderEmpty())&&void 0!==t?t:(0,E.tZ)(A.N,{children:(0,E.tZ)(C.Z,{orgId:l,slugs:Array.from(c),children:function(e){var t=e.initiallyLoaded,r=e.projects;return s.map((function(e){return(0,E.tZ)(W.Z,{projectsLoaded:t,projects:r,incident:e,orgId:l,filteredStatus:h,organization:d},e.id)}))}})})]}),(0,E.tZ)(P.Z,{pageLinks:o})]})}},{key:"renderBody",value:function(){var e=this.props,t=e.params,r=e.location,n=e.organization,s=e.router,o=r.pathname,i=r.query,a=t.orgId,l=Z()(J(J({},i),{},{status:"open"}),"cursor"),d=Z()(J(J({},i),{},{status:"closed"}),"cursor"),c=ee(i.status);return(0,E.tZ)(R.Z,{title:(0,X.t)("Alerts"),orgSlug:a,children:(0,E.BX)(B.Z,{organization:n,showDateSelector:!1,children:[(0,E.tZ)(I.Z,{organization:n,router:s,activeTab:"stream"}),(0,E.tZ)(k.uT,{children:(0,E.BX)(k.or,{fullWidth:!0,children:[!this.tryRenderOnboarding()&&(0,E.BX)(m.Fragment,{children:[(0,E.tZ)(v.Z,{features:["alert-details-redesign"],organization:n,children:(0,E.tZ)(b.Z,{icon:(0,E.tZ)(S.aU,{}),children:(0,X.t)("This page only shows metric alerts that have been triggered.")})}),(0,E.BX)(ne,{merged:!0,active:c,children:[(0,E.tZ)(x.ZP,{to:{pathname:o,query:l},barId:"open",size:"small",children:(0,X.t)("Unresolved")}),(0,E.tZ)(x.ZP,{to:{pathname:o,query:d},barId:"closed",size:"small",children:(0,X.t)("Resolved")})]})]}),this.renderList()]})})]})})}}]),s}(j.Z),re=function(e){(0,a.Z)(r,e);var t=Q(r);function r(){return(0,o.Z)(this,r),t.apply(this,arguments)}return(0,i.Z)(r,[{key:"componentDidMount",value:function(){this.trackView()}},{key:"componentDidUpdate",value:function(e){var t,r;(null===(t=e.location.query)||void 0===t?void 0:t.status)!==(null===(r=this.props.location.query)||void 0===r?void 0:r.status)&&this.trackView()}},{key:"trackView",value:function(){var e=this.props,t=e.location,r=e.organization,n=ee(t.query.status);(0,N.ec)({eventKey:"alert_stream.viewed",eventName:"Alert Stream: Viewed",organization_id:r.id,status:n})}},{key:"renderNoAccess",value:function(){return(0,E.tZ)(k.uT,{children:(0,E.tZ)(k.or,{fullWidth:!0,children:(0,E.tZ)(b.Z,{type:"warning",children:(0,X.t)("You don't have access to this feature")})})})}},{key:"render",value:function(){var e=this.props.organization;return(0,E.tZ)(v.Z,{features:["organizations:incidents"],organization:e,hookName:"feature-disabled:alerts-page",renderDisabled:this.renderNoAccess,children:(0,E.tZ)(te,J({},this.props))})}}]),r}(m.Component);re.displayName="IncidentsListContainer";var ne=(0,c.Z)(w.Z,{target:"e12ryirh2"})("width:100px;margin-bottom:",(0,L.Z)(1),";"),se=(0,c.Z)(K.O,{target:"e12ryirh1"})("padding-left:",(0,L.Z)(2),";"),oe=(0,c.Z)(A.V9,{target:"e12ryirh0"})("padding:",(0,L.Z)(1.5)," ",(0,L.Z)(2)," ",(0,L.Z)(1.5)," 0;");const ie=(0,q.Z)(re)},"./images/spot/alerts-empty-state.svg":(e,t,r)=>{e.exports=r.p+"spot/alerts-empty-state.4d03bc.svg"}}]);
//# sourceMappingURL=app_views_alerts_list_index_tsx.js.map