(self.webpackChunk=self.webpackChunk||[]).push([["app_views_settings_project_projectSettingsLayout_tsx"],{"./app/actionCreators/teams.tsx":(e,t,o)=>{"use strict";o.d(t,{eM:()=>u,z_:()=>d,fs:()=>l,um:()=>p,s:()=>m,Cm:()=>j,tT:()=>h}),o("../node_modules/core-js/modules/es.array.concat.js");var r=o("./app/actionCreators/indicator.tsx"),s=o("./app/actions/teamActions.tsx"),n=o("./app/locale.tsx"),a=o("./app/utils/callIfFunction.tsx"),i=o("./app/utils/guid.tsx"),c=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,o=arguments.length,r=new Array(o>2?o-2:0),s=2;s<o;s++)r[s-2]=arguments[s];a.g.apply(void 0,[e[t]].concat(r))};function u(e,t,o){return s.Z.fetchDetails(t.teamId),e.request("/teams/".concat(t.orgId,"/").concat(t.teamId,"/"),{success:function(e){s.Z.fetchDetailsSuccess(t.teamId,e),c(o,"success",e)},error:function(e){s.Z.fetchDetailsError(t.teamId,e),c(o,"error",e)}})}function d(e,t){s.Z.updateSuccess(e,t)}function l(e,t,o){var r="/teams/".concat(t.orgId,"/").concat(t.teamId,"/");return s.Z.update(t.teamId,t.data),e.request(r,{method:"PUT",data:t.data,success:function(e){d(t.teamId,e),c(o,"success",e)},error:function(e){s.Z.updateError(t.teamId,e),c(o,"error",e)}})}function p(e,t,o){var r,n="/organizations/".concat(t.orgId,"/members/").concat(null!==(r=t.memberId)&&void 0!==r?r:"me","/teams/").concat(t.teamId,"/"),a=(0,i.E)();return s.Z.update(a,t.teamId),e.request(n,{method:"POST",success:function(e){s.Z.updateSuccess(t.teamId,e),c(o,"success",e)},error:function(e){s.Z.updateError(a,t.teamId,e),c(o,"error",e)}})}function m(e,t,o){var r="/organizations/".concat(t.orgId,"/members/").concat(t.memberId||"me","/teams/").concat(t.teamId,"/"),n=(0,i.E)();return s.Z.update(n,t.teamId),e.request(r,{method:"DELETE",success:function(e){s.Z.updateSuccess(t.teamId,e),c(o,"success",e)},error:function(e){s.Z.updateError(n,t.teamId,e),c(o,"error",e)}})}function j(e,t,o){return s.Z.createTeam(t),e.requestPromise("/organizations/".concat(o.orgId,"/teams/"),{method:"POST",data:t}).then((function(e){return s.Z.createTeamSuccess(e),(0,r.S9)((0,n._N)("[team] has been added to the [organization] organization",{team:"#".concat(e.slug),organization:o.orgId})),e}),(function(e){throw s.Z.createTeamError(t.slug,e),(0,r.Iw)((0,n._N)("Unable to create [team] in the [organization] organization",{team:"#".concat(t.slug),organization:o.orgId})),e}))}function h(e,t){return s.Z.removeTeam(t.teamId),e.requestPromise("/teams/".concat(t.orgId,"/").concat(t.teamId,"/"),{method:"DELETE"}).then((function(e){return s.Z.removeTeamSuccess(t.teamId,e),(0,r.S9)((0,n._N)("[team] has been removed from the [organization] organization",{team:"#".concat(t.teamId),organization:t.orgId})),e}),(function(e){throw s.Z.removeTeamError(t.teamId,e),(0,r.Iw)((0,n._N)("Unable to remove [team] from the [organization] organization",{team:"#".concat(t.teamId),organization:t.orgId})),e}))}},"./app/components/projects/missingProjectMembership.tsx":(e,t,o)=>{"use strict";o.d(t,{Z:()=>T}),o("../node_modules/core-js/modules/es.reflect.construct.js");var r=o("../node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),s=o("../node_modules/@babel/runtime/helpers/esm/createClass.js"),n=o("../node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js"),a=o("../node_modules/@babel/runtime/helpers/esm/inherits.js"),i=o("../node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),c=o("../node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),u=o("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),d=o("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),l=(o("../node_modules/core-js/modules/es.array.find.js"),o("../node_modules/core-js/modules/es.function.bind.js"),o("../node_modules/core-js/modules/es.array.for-each.js"),o("../node_modules/core-js/modules/web.dom-collections.for-each.js"),o("../node_modules/core-js/modules/es.array.iterator.js"),o("../node_modules/core-js/modules/es.object.to-string.js"),o("../node_modules/core-js/modules/es.set.js"),o("../node_modules/core-js/modules/es.string.iterator.js"),o("../node_modules/core-js/modules/web.dom-collections.iterator.js"),o("../node_modules/core-js/modules/es.array.map.js"),o("../node_modules/react/index.js")),p=o("./app/actionCreators/indicator.tsx"),m=o("./app/actionCreators/teams.tsx"),j=o("./app/components/button.tsx"),h=o("./app/components/forms/selectControl.tsx"),f=o("./app/components/panels/index.tsx"),g=o("./app/icons/index.tsx"),b=o("./app/locale.tsx"),y=o("./app/stores/teamStore.tsx"),v=o("./app/styles/space.tsx"),Z=o("./app/utils/withApi.tsx"),x=o("./app/views/settings/components/emptyMessage.tsx"),_=o("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");var I=function(e){(0,a.Z)(l,e);var t,o,d=(t=l,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,c.Z)(t);if(o){var s=(0,c.Z)(this).constructor;e=Reflect.construct(r,arguments,s)}else e=r.apply(this,arguments);return(0,i.Z)(this,e)});function l(e){var t,o;(0,r.Z)(this,l),o=d.call(this,e),(0,u.Z)((0,n.Z)(o),"handleChangeTeam",(function(e){var t=e?e.value:null;o.setState({team:t})})),(0,u.Z)((0,n.Z)(o),"getPendingTeamOption",(function(e){return{value:e,label:(0,_.tZ)(O,{children:(0,b.t)("#".concat(e))})}}));var s=o.props,a=s.organization,i=s.projectSlug,c=null===(t=a.projects)||void 0===t?void 0:t.find((function(e){return e.slug===i}));return o.state={loading:!1,error:!1,project:c,team:""},o}return(0,s.Z)(l,[{key:"joinTeam",value:function(e){var t=this;this.setState({loading:!0}),(0,m.um)(this.props.api,{orgId:this.props.organization.slug,teamId:e},{success:function(){t.setState({loading:!1,error:!1}),(0,p.S9)((0,b.t)("Request to join team sent."))},error:function(){t.setState({loading:!1,error:!0}),(0,p.Iw)((0,b.t)("There was an error while trying to request access."))}})}},{key:"renderJoinTeam",value:function(e,t){var o=y.Z.getBySlug(e);return o?this.state.loading?t.has("open-membership")?(0,_.tZ)(j.ZP,{busy:!0,children:(0,b.t)("Join Team")}):(0,_.tZ)(j.ZP,{busy:!0,children:(0,b.t)("Request Access")}):null!=o&&o.isPending?(0,_.tZ)(j.ZP,{disabled:!0,children:(0,b.t)("Request Pending")}):t.has("open-membership")?(0,_.tZ)(j.ZP,{priority:"primary",type:"button",onClick:this.joinTeam.bind(this,e),children:(0,b.t)("Join Team")}):(0,_.tZ)(j.ZP,{priority:"primary",type:"button",onClick:this.joinTeam.bind(this,e),children:(0,b.t)("Request Access")}):null}},{key:"getTeamsForAccess",value:function(){var e,t,o=[],r=[];return(null!==(e=null===(t=this.state.project)||void 0===t?void 0:t.teams)&&void 0!==e?e:[]).forEach((function(e){var t=e.slug,s=y.Z.getBySlug(t);s&&(s.isPending?r.push(s.slug):o.push(s.slug))})),[o,r]}},{key:"render",value:function(){var e,t,o=this,r=this.props.organization,s=this.state.team,n=null!==(e=null===(t=this.state.project)||void 0===t?void 0:t.teams)&&void 0!==e?e:[],a=new Set(r.features),i=[{label:(0,b.t)("Request Access"),options:this.getTeamsForAccess()[0].map((function(e){return{value:e,label:(0,b.t)("#".concat(e))}}))},{label:(0,b.t)("Pending Requests"),options:this.getTeamsForAccess()[1].map((function(e){return o.getPendingTeamOption(e)}))}];return(0,_.tZ)(P,{children:n.length?(0,_.tZ)(x.Z,{icon:(0,_.tZ)(g.Gy,{size:"xl"}),title:(0,b.t)("You're not a member of this project."),description:(0,b.t)("You'll need to join a team with access before you can view this data."),action:(0,_.BX)(S,{children:[(0,_.tZ)(w,{name:"select",placeholder:(0,b.t)("Select a Team"),options:i,onChange:this.handleChangeTeam}),s?this.renderJoinTeam(s,a):(0,_.tZ)(j.ZP,{disabled:!0,children:(0,b.t)("Select a Team")})]})}):(0,_.tZ)(x.Z,{icon:(0,_.tZ)(g.Gy,{size:"xl"}),children:(0,b.t)("No teams have access to this project yet. Ask an admin to add your team to this project.")})})}}]),l}(l.Component);I.displayName="MissingProjectMembership";var P=(0,d.Z)(f.s_,{target:"e1cfryqt3"})("margin:",(0,v.Z)(2)," 0;"),S=(0,d.Z)("div",{target:"e1cfryqt2"})("display:grid;grid-auto-flow:column;gap:",(0,v.Z)(2),";text-align:left;"),w=(0,d.Z)(h.Z,{target:"e1cfryqt1"})({name:"xu0q36",styles:"width:250px"}),O=(0,d.Z)("div",{target:"e1cfryqt0"})({name:"v6ye5b",styles:"display:flex;opacity:0.5;overflow:hidden"});const T=(0,Z.Z)(I)},"./app/views/settings/project/appStoreConnectContext.tsx":(e,t,o)=>{"use strict";o.d(t,{zt:()=>p,ZP:()=>m});var r=o("../node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js"),s=o("../node_modules/@babel/runtime/helpers/esm/slicedToArray.js"),n=o("../node_modules/@babel/runtime/regenerator/index.js"),a=o.n(n),i=(o("../node_modules/core-js/modules/es.array.find.js"),o("../node_modules/core-js/modules/es.array.concat.js"),o("../node_modules/react/index.js")),c=o("./app/utils/withApi.tsx"),u=o("./app/utils/withProject.tsx"),d=o("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js"),l=(0,i.createContext)(void 0),p=(0,c.Z)((0,u.Z)((function(e){var t=e.api,o=e.children,n=e.project,c=e.orgSlug,u=(0,i.useState)(),p=(0,s.Z)(u,2),m=p[0],j=p[1];function h(){var e;return null===(e=(n.symbolSources?JSON.parse(n.symbolSources):[]).find((function(e){return"appStoreConnect"===e.type})))||void 0===e?void 0:e.id}function f(){return(f=(0,r.Z)(a().mark((function e(){var o,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=h()){e.next=3;break}return e.abrupt("return");case 3:return e.prev=3,e.next=6,t.requestPromise("/projects/".concat(c,"/").concat(n.slug,"/appstoreconnect/validate/").concat(o,"/"));case 6:r=e.sent,j(r),e.next=12;break;case 10:e.prev=10,e.t0=e.catch(3);case 12:case"end":return e.stop()}}),e,null,[[3,10]])})))).apply(this,arguments)}return(0,i.useEffect)((function(){!function(){f.apply(this,arguments)}()}),[n]),(0,d.tZ)(l.Provider,{value:m,children:o})})));l.Consumer;const m=l},"./app/views/settings/project/projectSettingsLayout.tsx":(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>W}),o("../node_modules/core-js/modules/es.object.keys.js"),o("../node_modules/core-js/modules/es.symbol.js"),o("../node_modules/core-js/modules/es.array.filter.js"),o("../node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),o("../node_modules/core-js/modules/es.array.for-each.js"),o("../node_modules/core-js/modules/web.dom-collections.for-each.js"),o("../node_modules/core-js/modules/es.object.get-own-property-descriptors.js"),o("../node_modules/core-js/modules/es.object.define-properties.js"),o("../node_modules/core-js/modules/es.object.define-property.js");var r,s=o("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),n=o("../node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js"),a=o("../node_modules/react/index.js"),i=o("./app/utils/withOrganization.tsx"),c=o("../node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js"),u=o("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),d=o("../node_modules/@babel/runtime/regenerator/index.js"),l=o.n(d),p=(o("../node_modules/core-js/modules/es.array.find.js"),o("../node_modules/core-js/modules/es.array.concat.js"),o("../node_modules/react-document-title/index.js")),m=o.n(p),j=o("../node_modules/create-react-class/index.js"),h=o.n(j),f=o("../node_modules/reflux/src/index.js"),g=o.n(f),b=o("./app/actionCreators/members.tsx"),y=o("./app/actionCreators/projects.tsx"),v=o("./app/components/loadingError.tsx"),Z=o("./app/components/loadingIndicator.tsx"),x=o("./app/components/projects/missingProjectMembership.tsx"),_=o("./app/locale.tsx"),I=o("./app/sentryTypes.tsx"),P=o("./app/stores/memberListStore.tsx"),S=o("./app/stores/projectsStore.tsx"),w=o("./app/styles/space.tsx"),O=o("./app/utils/withApi.tsx"),T=o("./app/utils/withProjects.tsx"),C=o("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function N(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,r)}return o}function E(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?N(Object(o),!0).forEach((function(t){(0,s.Z)(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):N(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}!function(e){e.MISSING_MEMBERSHIP="MISSING_MEMBERSHIP",e.PROJECT_NOT_FOUND="PROJECT_NOT_FOUND",e.UNKNOWN="UNKNOWN"}(r||(r={}));var z=h()({displayName:"ProjectContext",childContextTypes:{project:I.Z.Project},mixins:[g().connect(P.Z,"memberList"),g().listenTo(S.Z,"onProjectChange")],getInitialState:function(){return{loading:!0,error:!1,errorType:null,memberList:[],project:null}},getChildContext:function(){return{project:this.state.project}},componentWillMount:function(){this.fetchData()},componentWillReceiveProps:function(e){e.projectId!==this.props.projectId&&(e.skipReload||this.remountComponent())},componentDidUpdate:function(e,t){if(e.projectId!==this.props.projectId&&this.fetchData(),e.projects.length!==this.props.projects.length&&this.fetchData(),t.project!==this.state.project){if(!this.docTitle)return;var o=this.docTitleRef.docTitle;o&&o.forceUpdate()}},remountComponent:function(){this.setState(this.getInitialState())},getTitle:function(){var e,t;return null!==(e=null===(t=this.state.project)||void 0===t?void 0:t.slug)&&void 0!==e?e:"Sentry"},onProjectChange:function(e){this.state.project&&e.has(this.state.project.id)&&this.setState({project:E({},S.Z.getById(this.state.project.id))})},identifyProject:function(){var e=this.props,t=e.projects,o=e.projectId;return t.find((function(e){return e.slug===o}))||null},fetchData:function(){var e=this;return(0,c.Z)(l().mark((function t(){var o,s,n,a,i,c,u,d;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o=e.props,s=o.orgId,n=o.projectId,a=o.skipReload,i=e.identifyProject(),c=i&&i.hasAccess,e.setState((function(e){return{loading:!a||e.loading,project:i}})),!i||!c){t.next=20;break}return(0,y.pK)(null),u=e.props.api.requestPromise("/projects/".concat(s,"/").concat(n,"/")),t.prev=7,t.next=10,u;case 10:d=t.sent,e.setState({loading:!1,project:d,error:!1,errorType:null}),(0,y.pK)(d),t.next=18;break;case 15:t.prev=15,t.t0=t.catch(7),e.setState({loading:!1,error:!1,errorType:r.UNKNOWN});case 18:return(0,b.MA)(e.props.api,s,i.id),t.abrupt("return");case 20:if(!i||i.isMember){t.next=23;break}return e.setState({loading:!1,error:!0,errorType:r.MISSING_MEMBERSHIP}),t.abrupt("return");case 23:return t.prev=23,t.next=26,e.props.api.requestPromise("/projects/".concat(s,"/").concat(n,"/"));case 26:t.next=31;break;case 28:t.prev=28,t.t1=t.catch(23),e.setState({loading:!1,error:!0,errorType:r.PROJECT_NOT_FOUND});case 31:case"end":return t.stop()}}),t,null,[[7,15],[23,28]])})))()},renderBody:function(){if(this.state.loading)return(0,C.tZ)("div",{className:"loading-full-layout",children:(0,C.tZ)(Z.Z,{})});if(!this.state.error)return this.props.children;switch(this.state.errorType){case r.PROJECT_NOT_FOUND:return(0,C.tZ)("div",{className:"container",children:(0,C.tZ)("div",{className:"alert alert-block",style:{margin:"30px 0 10px"},children:(0,_.t)("The project you were looking for was not found.")})});case r.MISSING_MEMBERSHIP:return(0,C.tZ)(R,{children:(0,C.tZ)(x.Z,{organization:this.props.organization,projectSlug:this.state.project.slug})});default:return(0,C.tZ)(v.Z,{onRetry:this.remountComponent})}},render:function(){var e=this;return(0,C.tZ)(m(),{ref:function(t){return e.docTitleRef=t},title:this.getTitle(),children:this.renderBody()})}});const k=(0,O.Z)((0,i.Z)((0,T.Z)(z)));var R=(0,u.Z)("div",{target:"e1ekcf660"})("width:100%;margin:",(0,w.Z)(2)," ",(0,w.Z)(4),";"),D=o("./app/views/settings/components/settingsLayout.tsx"),q=(o("../node_modules/core-js/modules/es.array.some.js"),o("../node_modules/core-js/modules/es.array.iterator.js"),o("../node_modules/core-js/modules/es.object.to-string.js"),o("../node_modules/core-js/modules/es.set.js"),o("../node_modules/core-js/modules/es.string.iterator.js"),o("../node_modules/core-js/modules/web.dom-collections.iterator.js"),o("./app/utils/withProject.tsx")),M=o("./app/views/settings/components/settingsNavigation.tsx"),A=o("./app/views/settings/project/navigationConfiguration.tsx"),B=o("./app/views/settings/project/appStoreConnectContext.tsx"),U=function(e){var t=e.organization,o=e.project,r=(0,a.useContext)(B.ZP),s=!!r&&Object.keys(null!=r?r:{}).some((function(e){return!r[e]}));return(0,C.tZ)(M.Z,{navigationObjects:(0,A.Z)({project:o,organization:t,debugFilesNeedsReview:s}),access:new Set(t.access),features:new Set(t.features),organization:t,project:o})};U.displayName="ProjectSettingsNavigation";const F=(0,q.Z)(U);function J(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,r)}return o}function L(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?J(Object(o),!0).forEach((function(t){(0,s.Z)(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):J(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function G(e){var t=e.params,o=e.organization,r=e.children,s=e.routes,i=(0,n.Z)(e,["params","organization","children","routes"]),c=t.orgId,u=t.projectId;return(0,C.tZ)(k,{orgId:c,projectId:u,children:(0,C.tZ)(B.zt,{orgSlug:c,children:(0,C.tZ)(D.Z,L(L({params:t,routes:s},i),{},{renderNavigation:function(){return(0,C.tZ)(F,{organization:o})},children:r&&a.isValidElement(r)?a.cloneElement(r,{organization:o}):r}))})})}G.displayName="ProjectSettingsLayout";const W=(0,i.Z)(G)}}]);
//# sourceMappingURL=app_views_settings_project_projectSettingsLayout_tsx.js.map