{"version":3,"sources":["webpack:///./app/stores/pluginsStore.tsx","webpack:///./app/utils/withPlugins.tsx","webpack:///./app/views/asyncView.tsx","webpack:///./app/views/settings/projectPlugins/details.tsx"],"names":["defaultState","loading","plugins","error","pageLinks","PluginStoreConfig","state","updating","Map","reset","this","getInitialState","getState","Array","from","values","init","listenTo","PluginActions","onFetchAll","onFetchAllSuccess","onFetchAllError","onUpdate","onUpdateSuccess","onUpdateError","triggerState","trigger","resetLoading","data","map","plugin","id","err","updateObj","get","newPlugin","set","_updateObj","origPlugin","Reflux","WrappedComponent","withOrganization","withProject","createReactClass","displayName","getDisplayName","mixins","PluginsStore","componentDidMount","fetchPlugins","componentDidUpdate","prevProps","_prevState","prevContext","props","organization","project","prevOrg","prevProject","defined","isOrgSame","slug","isProjectSame","projectId","orgId","render","store","AsyncView","title","getTitle","renderComponent","AsyncComponent","ProjectPluginDetails","params","pluginId","addLoadingMessage","t","trackIntegrationEvent","integration","integration_type","view","api","request","method","success","pluginDetails","setState","addSuccessMessage","addErrorMessage","enablePlugin","analyticsChangeEnableStatus","disablePlugin","enabled","eventKey","recordDetailsViewed","name","value","split","find","getEnabled","enable","StyledButton","size","onClick","handleEnable","disable","priority","handleDisable","toggleEnable","className","canDisable","handleReset","action","renderActions","onDisablePlugin","author","url","href","trimSchema","version","description","resourceLinks","withPlugins","Button","space"],"mappings":"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","file":"app_views_settings_projectPlugins_details_tsx.bc94bbc928fcd316d8d8.js","sourcesContent":["import Reflux from 'reflux';\n\nimport PluginActions from 'app/actions/pluginActions';\nimport {Plugin} from 'app/types';\n\ntype PluginStoreInterface = {\n  state: {\n    loading: boolean;\n    plugins: Plugin[];\n    error: Error | null;\n    pageLinks: string | null;\n  };\n  plugins: Map<string, Plugin> | null;\n  updating: Map<string, Plugin>;\n};\n\nconst defaultState = {\n  loading: true,\n  plugins: [],\n  error: null,\n  pageLinks: null,\n};\n\nconst PluginStoreConfig: Reflux.StoreDefinition & PluginStoreInterface = {\n  plugins: null,\n  state: {...defaultState},\n  updating: new Map(),\n\n  reset() {\n    //reset our state\n    this.plugins = null;\n    this.state = {...defaultState};\n    this.updating = new Map();\n    return this.state;\n  },\n\n  getInitialState() {\n    return this.getState();\n  },\n\n  getState() {\n    const {plugins: _plugins, ...state} = this.state;\n\n    return {\n      ...state,\n      plugins: this.plugins ? Array.from(this.plugins.values()) : [],\n    };\n  },\n\n  init() {\n    this.reset();\n    this.listenTo(PluginActions.fetchAll, this.onFetchAll);\n    this.listenTo(PluginActions.fetchAllSuccess, this.onFetchAllSuccess);\n    this.listenTo(PluginActions.fetchAllError, this.onFetchAllError);\n    this.listenTo(PluginActions.update, this.onUpdate);\n    this.listenTo(PluginActions.updateSuccess, this.onUpdateSuccess);\n    this.listenTo(PluginActions.updateError, this.onUpdateError);\n  },\n\n  triggerState() {\n    this.trigger(this.getState());\n  },\n\n  onFetchAll({resetLoading}: {resetLoading?: boolean} = {}) {\n    if (resetLoading) {\n      this.state.loading = true;\n      this.state.error = null;\n      this.plugins = null;\n    }\n\n    this.triggerState();\n  },\n\n  onFetchAllSuccess(data: Plugin[], {pageLinks}: {pageLinks?: string}) {\n    this.plugins = new Map(data.map(plugin => [plugin.id, plugin]));\n    this.state.pageLinks = pageLinks || null;\n    this.state.loading = false;\n    this.triggerState();\n  },\n\n  onFetchAllError(err) {\n    this.plugins = null;\n    this.state.loading = false;\n    this.state.error = err;\n    this.triggerState();\n  },\n\n  onUpdate(id: string, updateObj: Partial<Plugin>) {\n    if (!this.plugins) {\n      return;\n    }\n\n    const plugin = this.plugins.get(id);\n    if (!plugin) {\n      return;\n    }\n    const newPlugin = {\n      ...plugin,\n      ...updateObj,\n    };\n\n    this.plugins.set(id, newPlugin);\n    this.updating.set(id, plugin);\n    this.triggerState();\n  },\n\n  onUpdateSuccess(id: string, _updateObj: Partial<Plugin>) {\n    this.updating.delete(id);\n  },\n\n  onUpdateError(id: string, _updateObj: Partial<Plugin>, err) {\n    const origPlugin = this.updating.get(id);\n    if (!origPlugin || !this.plugins) {\n      return;\n    }\n\n    this.plugins.set(id, origPlugin);\n    this.updating.delete(id);\n    this.state.error = err;\n    this.triggerState();\n  },\n};\n\ntype PluginStore = Reflux.Store & PluginStoreInterface;\n\nconst PluginStore = Reflux.createStore(PluginStoreConfig);\n\nexport default PluginStore as PluginStore;\n","import * as React from 'react';\nimport createReactClass from 'create-react-class';\nimport Reflux from 'reflux';\n\nimport {fetchPlugins} from 'app/actionCreators/plugins';\nimport PluginsStore from 'app/stores/pluginsStore';\nimport {Organization, Plugin, Project} from 'app/types';\nimport {defined} from 'app/utils';\nimport getDisplayName from 'app/utils/getDisplayName';\nimport withOrganization from 'app/utils/withOrganization';\nimport withProject from 'app/utils/withProject';\n\ntype WithPluginProps = {\n  organization: Organization;\n  project?: Project;\n};\n\ntype InjectedPluginProps = {\n  plugins: {plugins: Plugin[]; loading: boolean};\n};\n\n/**\n * Higher order component that fetches list of plugins and\n * passes PluginsStore to component as `plugins`\n */\nconst withPlugins = <P extends WithPluginProps>(\n  WrappedComponent: React.ComponentType<P>\n) =>\n  withOrganization(\n    withProject(\n      createReactClass<Omit<P, keyof InjectedPluginProps> & WithPluginProps, {}>({\n        displayName: `withPlugins(${getDisplayName(WrappedComponent)})`,\n        mixins: [Reflux.connect(PluginsStore, 'store') as any],\n\n        componentDidMount() {\n          this.fetchPlugins();\n        },\n\n        componentDidUpdate(prevProps, _prevState, prevContext) {\n          const {organization, project} = this.props;\n\n          // Only fetch plugins when a org slug or project slug has changed\n          const prevOrg =\n            prevProps.organization || (prevContext && prevContext.organization);\n          const prevProject = prevProps.project || (prevContext && prevContext.project);\n\n          // If previous org/project is undefined then it means:\n          // the HoC has mounted, `fetchPlugins` has been called (via cDM), and\n          // store was updated. We don't need to fetchPlugins again (or it will cause an infinite loop)\n          //\n          // This is for the unusual case where component is mounted and receives a new org/project prop\n          // e.g. when switching projects via breadcrumbs in settings.\n          if (!defined(prevProject) || !defined(prevOrg)) {\n            return;\n          }\n\n          const isOrgSame = prevOrg.slug === organization.slug;\n          const isProjectSame = prevProject.slug === project?.slug;\n\n          // Don't do anything if org and project are the same\n          if (isOrgSame && isProjectSame) {\n            return;\n          }\n\n          this.fetchPlugins();\n        },\n\n        fetchPlugins() {\n          const {organization, project} = this.props;\n\n          if (!project || !organization) {\n            return;\n          }\n\n          fetchPlugins({projectId: project.slug, orgId: organization.slug});\n        },\n\n        render() {\n          return (\n            <WrappedComponent\n              {...(this.props as P & WithPluginProps)}\n              plugins={this.state.store}\n            />\n          );\n        },\n      })\n    )\n  );\n\nexport default withPlugins;\n","import * as React from 'react';\nimport DocumentTitle from 'react-document-title';\n\nimport AsyncComponent from 'app/components/asyncComponent';\n\ntype AsyncViewState = AsyncComponent['state'];\ntype AsyncViewProps = AsyncComponent['props'];\n\nexport default class AsyncView<\n  P extends AsyncViewProps = AsyncViewProps,\n  S extends AsyncViewState = AsyncViewState\n> extends AsyncComponent<P, S> {\n  getTitle() {\n    return '';\n  }\n\n  render() {\n    const title = this.getTitle();\n    return (\n      <DocumentTitle title={`${title ? `${title} - ` : ''}Sentry`}>\n        {this.renderComponent() as React.ReactChild}\n      </DocumentTitle>\n    );\n  }\n}\n","import {WithRouterProps} from 'react-router';\nimport styled from '@emotion/styled';\n\nimport {\n  addErrorMessage,\n  addLoadingMessage,\n  addSuccessMessage,\n} from 'app/actionCreators/indicator';\nimport {disablePlugin, enablePlugin} from 'app/actionCreators/plugins';\nimport Button from 'app/components/button';\nimport ExternalLink from 'app/components/links/externalLink';\nimport PluginConfig from 'app/components/pluginConfig';\nimport {t} from 'app/locale';\nimport space from 'app/styles/space';\nimport {Organization, Plugin, Project} from 'app/types';\nimport {trackIntegrationEvent} from 'app/utils/integrationUtil';\nimport withPlugins from 'app/utils/withPlugins';\nimport AsyncView from 'app/views/asyncView';\nimport SettingsPageHeader from 'app/views/settings/components/settingsPageHeader';\n\ntype Props = {\n  organization: Organization;\n  project: Project;\n  plugins: {\n    plugins: Plugin[];\n  };\n} & WithRouterProps<{orgId: string; projectId: string; pluginId: string}>;\n\ntype State = {\n  pluginDetails?: Plugin;\n} & AsyncView['state'];\n\n/**\n * There are currently two sources of truths for plugin details:\n *\n * 1) PluginsStore has a list of plugins, and this is where ENABLED state lives\n * 2) We fetch \"plugin details\" via API and save it to local state as `pluginDetails`.\n *    This is because \"details\" call contains form `config` and the \"list\" endpoint does not.\n *    The more correct way would be to pass `config` to PluginConfig and use plugin from\n *    PluginsStore\n */\nclass ProjectPluginDetails extends AsyncView<Props, State> {\n  componentDidUpdate(prevProps: Props, prevContext: any) {\n    super.componentDidUpdate(prevProps, prevContext);\n    if (prevProps.params.pluginId !== this.props.params.pluginId) {\n      this.recordDetailsViewed();\n    }\n  }\n  componentDidMount() {\n    this.recordDetailsViewed();\n  }\n\n  recordDetailsViewed() {\n    const {pluginId} = this.props.params;\n\n    trackIntegrationEvent(\n      'integrations.details_viewed',\n      {\n        integration: pluginId,\n        integration_type: 'plugin',\n        view: 'plugin_details',\n      },\n      this.props.organization\n    );\n  }\n\n  getTitle() {\n    const {plugin} = this.state;\n    if (plugin && plugin.name) {\n      return plugin.name;\n    } else {\n      return 'Sentry';\n    }\n  }\n\n  getEndpoints(): ReturnType<AsyncView['getEndpoints']> {\n    const {projectId, orgId, pluginId} = this.props.params;\n    return [['pluginDetails', `/projects/${orgId}/${projectId}/plugins/${pluginId}/`]];\n  }\n\n  trimSchema(value) {\n    return value.split('//')[1];\n  }\n\n  handleReset = () => {\n    const {projectId, orgId, pluginId} = this.props.params;\n\n    addLoadingMessage(t('Saving changes\\u2026'));\n    trackIntegrationEvent(\n      'integrations.uninstall_clicked',\n      {\n        integration: pluginId,\n        integration_type: 'plugin',\n        view: 'plugin_details',\n      },\n      this.props.organization\n    );\n\n    this.api.request(`/projects/${orgId}/${projectId}/plugins/${pluginId}/`, {\n      method: 'POST',\n      data: {reset: true},\n      success: pluginDetails => {\n        this.setState({pluginDetails});\n        addSuccessMessage(t('Plugin was reset'));\n        trackIntegrationEvent(\n          'integrations.uninstall_completed',\n          {\n            integration: pluginId,\n            integration_type: 'plugin',\n            view: 'plugin_details',\n          },\n          this.props.organization\n        );\n      },\n      error: () => {\n        addErrorMessage(t('An error occurred'));\n      },\n    });\n  };\n\n  handleEnable = () => {\n    enablePlugin(this.props.params);\n    this.analyticsChangeEnableStatus(true);\n  };\n\n  handleDisable = () => {\n    disablePlugin(this.props.params);\n    this.analyticsChangeEnableStatus(false);\n  };\n\n  analyticsChangeEnableStatus = (enabled: boolean) => {\n    const {pluginId} = this.props.params;\n    const eventKey = enabled ? 'integrations.enabled' : 'integrations.disabled';\n    trackIntegrationEvent(\n      eventKey,\n      {\n        integration: pluginId,\n        integration_type: 'plugin',\n        view: 'plugin_details',\n      },\n      this.props.organization\n    );\n  };\n\n  // Enabled state is handled via PluginsStore and not via plugins detail\n  getEnabled() {\n    const {pluginDetails} = this.state;\n    const {plugins} = this.props;\n\n    const plugin =\n      plugins &&\n      plugins.plugins &&\n      plugins.plugins.find(({slug}) => slug === this.props.params.pluginId);\n\n    return plugin ? plugin.enabled : pluginDetails && pluginDetails.enabled;\n  }\n\n  renderActions() {\n    const {pluginDetails} = this.state;\n    if (!pluginDetails) {\n      return null;\n    }\n    const enabled = this.getEnabled();\n\n    const enable = (\n      <StyledButton size=\"small\" onClick={this.handleEnable}>\n        {t('Enable Plugin')}\n      </StyledButton>\n    );\n\n    const disable = (\n      <StyledButton size=\"small\" priority=\"danger\" onClick={this.handleDisable}>\n        {t('Disable Plugin')}\n      </StyledButton>\n    );\n\n    const toggleEnable = enabled ? disable : enable;\n\n    return (\n      <div className=\"pull-right\">\n        {pluginDetails.canDisable && toggleEnable}\n        <Button size=\"small\" onClick={this.handleReset}>\n          {t('Reset Configuration')}\n        </Button>\n      </div>\n    );\n  }\n\n  renderBody() {\n    const {organization, project} = this.props;\n    const {pluginDetails} = this.state;\n    if (!pluginDetails) {\n      return null;\n    }\n\n    return (\n      <div>\n        <SettingsPageHeader title={pluginDetails.name} action={this.renderActions()} />\n        <div className=\"row\">\n          <div className=\"col-md-7\">\n            <PluginConfig\n              organization={organization}\n              project={project}\n              data={pluginDetails}\n              enabled={this.getEnabled()}\n              onDisablePlugin={this.handleDisable}\n            />\n          </div>\n          <div className=\"col-md-4 col-md-offset-1\">\n            <div className=\"pluginDetails-meta\">\n              <h4>{t('Plugin Information')}</h4>\n\n              <dl className=\"flat\">\n                <dt>{t('Name')}</dt>\n                <dd>{pluginDetails.name}</dd>\n                <dt>{t('Author')}</dt>\n                <dd>{pluginDetails.author?.name}</dd>\n                {pluginDetails.author?.url && (\n                  <div>\n                    <dt>{t('URL')}</dt>\n                    <dd>\n                      <ExternalLink href={pluginDetails.author.url}>\n                        {this.trimSchema(pluginDetails.author.url)}\n                      </ExternalLink>\n                    </dd>\n                  </div>\n                )}\n                <dt>{t('Version')}</dt>\n                <dd>{pluginDetails.version}</dd>\n              </dl>\n\n              {pluginDetails.description && (\n                <div>\n                  <h4>{t('Description')}</h4>\n                  <p className=\"description\">{pluginDetails.description}</p>\n                </div>\n              )}\n\n              {pluginDetails.resourceLinks && (\n                <div>\n                  <h4>{t('Resources')}</h4>\n                  <dl className=\"flat\">\n                    {pluginDetails.resourceLinks.map(({title, url}) => (\n                      <dd key={url}>\n                        <ExternalLink href={url}>{title}</ExternalLink>\n                      </dd>\n                    ))}\n                  </dl>\n                </div>\n              )}\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport {ProjectPluginDetails};\n\nexport default withPlugins(ProjectPluginDetails);\n\nconst StyledButton = styled(Button)`\n  margin-right: ${space(0.75)};\n`;\n"],"sourceRoot":""}