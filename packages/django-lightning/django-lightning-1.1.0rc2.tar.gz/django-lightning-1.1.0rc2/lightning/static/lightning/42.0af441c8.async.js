(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[42],{"2Fcx":function(e,t,a){e.exports={container:"container___1Rq3A"}},"2fsV":function(e,t,a){e.exports={header:"header___Ak8FM",logo:"logo___dpe9p",menu:"menu___2N0Ng",trigger:"trigger___25HPG",right:"right___33ooE",action:"action___3p3Za",search:"search___PCL4c",account:"account___1q2g3",avatar:"avatar___3cBwx",dark:"dark___2_lCb",name:"name___3cny9"}},CVtM:function(e,t,a){"use strict";var n=a("q1tI"),r=a.n(n),c=a("9W6o"),i=a("Z3Gc");t["a"]=r.a.createElement(c["a"],{copyright:i["a"],links:[{key:i["f"],title:i["f"],href:i["g"],blankTarget:!0},{key:i["c"],title:i["c"],href:i["d"],blankTarget:!0}]})},DUgY:function(e,t,a){e.exports={baseView:"baseView___2eOBB",left:"left___2TKP6",right:"right___2NAtA",avatar_title:"avatar_title___pZqS8",avatar:"avatar___3Apce",button_view:"button_view___3UIP8"}},IAhd:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var n={"app.exception.back":"\u8fd4\u56de\u9996\u9875","app.exception.description.403":"\u62b1\u6b49\uff0c\u4f60\u65e0\u6743\u8bbf\u95ee\u6b64\u9875\u9762","app.exception.description.404":"\u62b1\u6b49\uff0c\u4f60\u8bbf\u95ee\u7684\u9875\u9762\u4e0d\u5b58\u5728","app.login.userName":"\u7528\u6237\u540d","app.login.password":"\u5bc6\u7801","app.login.message-invalid-credentials":"\u8d26\u6237\u6216\u5bc6\u7801\u9519\u8bef","app.login.sign-in-with":"\u5176\u4ed6\u767b\u5f55\u65b9\u5f0f","app.login.login":"\u767b\u5f55","app.login.verification-code-warning":"\u9a8c\u8bc1\u7801\u5df2\u53d1\u9001","app.login.verification-code-err":"\u83b7\u53d6\u9a8c\u8bc1\u7801\u5931\u8d25,\u8bf7\u7a0d\u540e\u518d\u8bd5","app.login.err":"\u9047\u5230\u9519\u8bef","app.login.confirm.password":"\u786e\u8ba4\u5bc6\u7801","app.register-result.msg":"\u6ce8\u518c\u6210\u529f","app.register.register":"\u6ce8\u518c","app.register.get-verification-code":"\u83b7\u53d6\u9a8c\u8bc1\u7801","app.register.sign-in":"\u4f7f\u7528\u5df2\u6709\u8d26\u6237\u767b\u5f55","validation.userName.required":"\u8bf7\u8f93\u5165\u7528\u6237\u540d!","validation.password.required":"\u8bf7\u8f93\u5165\u5bc6\u7801\uff01","validation.password.strength.strong":"\u6ce8\u518c\u6210\u529f","validation.password.strength.medium":"\u5f3a\u5ea6\uff1a\u4e2d","validation.password.strength.short":"\u5f3a\u5ea6\uff1a\u592a\u77ed","validation.password.twice":"\u4e24\u6b21\u8f93\u5165\u7684\u5bc6\u7801\u4e0d\u5339\u914d!","validation.password.strength.msg":"\u8bf7\u81f3\u5c11\u8f93\u5165 6 \u4e2a\u5b57\u7b26\u3002\u8bf7\u4e0d\u8981\u4f7f\u7528\u5bb9\u6613\u88ab\u731c\u5230\u7684\u5bc6\u7801\u3002","validation.phone-number.required":"\u8bf7\u8f93\u5165\u624b\u673a\u53f7\uff01","validation.phone-number.wrong-format":"\u624b\u673a\u53f7\u683c\u5f0f\u9519\u8bef\uff01","validation.confirm-password.required":"\u8bf7\u786e\u8ba4\u5bc6\u7801\uff01","validation.verification-code.required":"\u8bf7\u8f93\u5165\u9a8c\u8bc1\u7801\uff01","menu.account.webSettings":"\u7cfb\u7edf\u8bbe\u7f6e","menu.account.logout":"\u9000\u51fa\u767b\u5f55","menu.about":"\u5173\u4e8e","form.password.placeholder":"\u81f3\u5c116\u4f4d\u5bc6\u7801\uff0c\u533a\u5206\u5927\u5c0f\u5199","form.confirm-password.placeholder":"\u786e\u8ba4\u5bc6\u7801","form.phone-number.placeholder":"\u624b\u673a\u53f7","form.verification-code.placeholder":"\u9a8c\u8bc1\u7801","form.get-captcha":"\u83b7\u53d6\u9a8c\u8bc1\u7801","form.captcha.second":"\u79d2"},r=n,c=function(e){var t,a=e.id,n=e.defaultMessage;return null!==(t=r[a])&&void 0!==t?t:n}},K3Pb:function(e,t,a){"use strict";a.r(t),function(e){var n=a("0Owb"),r=(a("eNCU"),a("pjJH")),c=(a("0yxu"),a("/r5h")),i=a("k1fw"),o=(a("ascH"),a("GqlH")),s=a("oBTY"),l=a("tJVT"),u=a("q1tI"),d=a.n(u),m=a("55Ip"),p=a("RLxJ"),f=a("Hx5s"),h=a("vbsh"),b=a("jfUH"),g=a("CVtM"),v=a("ojbd"),w=a("hAcb"),_=a("mmaM"),j=a("Z3Gc"),O=function(e){var t="";function a(e){t||0!==e.children.length||(t=e.path),e.children.forEach((function(e){a(e)}))}return e.forEach(a),t},E=function(e,t){return e.pro_layout_parentKeys.length?d.a.createElement(d.a.Fragment,null,e.icon,e.name):t},y=function(t){var a=t.children,n=t.location.pathname,r=t.menus,c=t.breadcrumbByPath,i=Object(b["W"])(),h=i.logo,w=i.title,_=!Object(b["mb"])(),y=Object(b["lb"])(),k=Object(u["useState"])(_),C=Object(l["a"])(k,2),V=C[0],S=C[1],N=Object(u["useMemo"])((function(){return r&&O(r)}),[r]);Object(u["useEffect"])((function(){"/"===n&&N&&p["a"].replace(N)}),[n,N]);var P=n.split("/").filter((function(e){return e})),$=P.map((function(e,t){return"/".concat(P.slice(0,t+1).join("/"))})),x=$.reverse().find((function(e){return e in c})),I=x?[{breadcrumbName:"\u9996\u9875",path:"/"}].concat(Object(s["a"])(c[x])).map((function(t,a){return 0===a||a===c[x].length?t:e.omit(t,["path"])})):[],M=d.a.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%"}},d.a.createElement(o["a"],{message:"\u60a8\u6ca1\u6709\u4efb\u4f55\u83dc\u5355\u7684\u6743\u9650\uff0c\u53ef\u4ee5\u8054\u7cfb\u7ba1\u7406\u5458\u7ed9\u60a8\u914d\u7f6e\u89d2\u8272",type:"warning"})),H=function(){return y&&S(!0)};return d.a.createElement(f["b"],{logo:h?Object(b["v"])(h,{mode:"lfit"}):j["b"],title:w||j["f"],fixSiderbar:!0,siderWidth:256,onMenuHeaderClick:function(){H(),p["a"].push("/")},menuItemRender:function(e,t){return e.isUrl||!e.path?t:n===e.path?E(e,t):d.a.createElement(m["a"],{onClick:H,to:e.path},E(e,t))},subMenuItemRender:E,menuDataRender:function(){return r||[]},menu:{loading:!r},breadcrumbRender:function(){return I},rightContentRender:function(){return d.a.createElement(v["a"],null)},footerRender:function(){return g["a"]},collapsed:V,onCollapse:S},r&&0===r.length&&"/"===n?M:a)};t["default"]=Object(b["a"])((function(e){var t=Object(u["useState"])(null),a=Object(l["a"])(t,2),o=a[0],s=a[1],m=Object(u["useState"])({}),f=Object(l["a"])(m,2),g=f[0],v=f[1],j=Object(u["useCallback"])((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.force,n=void 0!==a&&a,r=Object(w["a"])(e),c=Object(w["b"])(r);n&&s(null),s(r),v(c)}),[]),O=Object(b["bb"])(),E=Object(b["ob"])(),k=Object(b["V"])("DB_TIMEZONE"),C=(null===E||void 0===E?void 0:E.includes("can_web_setting__bsm_config"))&&null===k;return Object(u["useEffect"])((function(){Promise.all([O(window.$$userinfo&&window.$$permissions?{type:"user/saveCurrentUser",payload:Object(i["a"])(Object(i["a"])({},window.$$userinfo),{},{permissions:window.$$permissions.map(b["J"])})}:{type:"user/fetchCurrent"}),O(window.$$settings?{type:"bsmSetting/changeSettings",payload:window.$$settings}:{type:"bsmSetting/getSettings"})]).then((function(){C&&c["a"].warn({duration:null,placement:"bottomRight",message:"\u7248\u672c\u517c\u5bb9\u6027\u8b66\u544a",description:"\u672a\u8bbe\u7f6e\u65f6\u533a\uff0c\u5f53\u524d\u7248\u672c\u9700\u8981\u8bbe\u7f6e\u6570\u636e\u5e93\u65f6\u533a",key:"timezone-warning",onClick:function(){p["a"].push("/account/settings"),c["a"].close("timezone-warning")},btn:d.a.createElement(r["a"],{type:"primary"},"\u524d\u5f80\u8bbe\u7f6e")})}));var e=[];window.$$schemas&&window.$$admins||e.push(O({type:"content/getConfig"}).then((function(e){var t=e.admins,a=e.schemas;window.$schemas=a,window.$admin=t}))),window.$$menus?j(window.$$menus):Promise.all([Object(_["getMenus"])()].concat(e)).then((function(e){var t=Object(l["a"])(e,1),a=t[0];return j(a)})),Object(h["c"])("bsm_config__menu",[h["b"].afterCreate,h["b"].afterUpdate,h["b"].afterDelete],(function(){O({type:"user/fetchCurrent"}),Object(_["getMenus"])().then((function(e){j(e,{force:!0})}))})),["menus","permissions","schemas","admins","userinfo","settings"].forEach((function(e){window["$".concat(e)]=window["$$".concat(e)],delete window["$$".concat(e)]}))}),[O,C,j]),d.a.createElement(y,Object(n["a"])({},e,{menus:o,breadcrumbByPath:g}))}))}.call(this,a("LvDl"))},hAcb:function(e,t,a){"use strict";(function(e){a.d(t,"a",(function(){return m})),a.d(t,"b",(function(){return p}));a("eE3J");var n=a("GSZB"),r=a("k1fw"),c=a("PpiC"),i=a("q1tI"),o=a.n(i),s=a("jfUH"),l={adminConfig:function(){return"/config/admin"},chart:function(){return"/dashboard/charts"},puzzle:function(e){var t=e.puzzle;return"/puzzle/".concat(t)},list:function(e){var t=e.model,a=e.view;return a?"/content/view/".concat(t,"/").concat(a):{path:"/content/".concat(t),name:"".concat(Object(s["o"])(t),"\u7ba1\u7406")}},detail:function(e){return"/content/".concat(e.model,"/detail/").concat(e.id||"__index__")},add:function(e){return"/content/".concat(e.model,"/add").concat(e.redirectPath?"?redirect_path=".concat(e.redirectPath):"")},auto:function(e){return e.path},iframe:function(e){return"/iframe/".concat(encodeURIComponent(e.path))},map:function(e){var t=e.model;return{path:"/content/".concat(t,"/map"),name:"".concat(Object(s["o"])(t),"\u7ba1\u7406")}}},u=0;function d(t){var a=t.icon,i=t.name,s=t.page,m=t.children,p=void 0===m?[]:m,f=t.params,h=Object(c["a"])(t,["icon","name","page","children","params"]);u+=1;var b="/".concat(u,"/");p.length||(b=l[s]?l[s](Object(r["a"])(Object(r["a"])({},h),f)):"/exception/404");for(var g=a||b.icon||null,v=["outlined","filled","twoTone"],w=0;w<v.length;w+=1){var _="__".concat(v[w]);if(g&&g.endsWith(_)){g=o.a.createElement(n["a"],{type:g.slice(0,-_.length),theme:"outlined"});break}}e.isString(g)&&(g=o.a.createElement(n["a"],{type:g}));var j={icon:g,name:i||b.name||"\u65e0\u540d\u83dc\u5355",path:b.path||b,children:p.map(d)};return j}function m(e){return u=0,e.map(d)}function p(e){var t={};function a(e,n){e.children.length||(t[e.path]=n.concat([{breadcrumbName:e.name,path:e.path}])),e.children.forEach((function(t){return a(t,n.concat({breadcrumbName:e.name,path:e.path}))}))}return e.forEach((function(e){return a(e,[])})),t}}).call(this,a("LvDl"))},ojbd:function(e,t,a){"use strict";a("52nx");var n,r,c,i=a("7bDm"),o=a("tJVT"),s=a("fWQN"),l=a("mtLc"),u=a("yKVA"),d=a("879j"),m=a("q1tI"),p=a.n(m),f=a("/MKj"),h=a("RLxJ"),b=(a("4X2C"),a("xvon")),g=(a("GPKB"),a("mFAc")),v=a("k1fw"),w=a("9og8"),_=(a("vmZS"),a("NjVP")),j=a("WmNS"),O=a.n(j),E=a("mmaM"),y=a("DUgY"),k=a.n(y),C=_["a"].Item,V=(n=Object(f["c"])((function(e){var t=e.user.currentUser;return{currentUser:t}})),r=_["a"].create(),n(c=r(c=function(e){Object(u["a"])(a,e);var t=Object(d["a"])(a);function a(){var e;Object(s["a"])(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return e=t.call.apply(t,[this].concat(r)),e.setBaseInfo=function(){var t=e.props,a=t.currentUser,n=t.form;Object.keys(n.getFieldsValue()).forEach((function(e){var t={};t[e]=a[e]||null,n.setFieldsValue(t)}))},e.getViewDom=function(t){e.view=t},e.handleCancel=function(){var t=e.props.handleCancel;t()},e.handleSubmit=Object(w["a"])(O.a.mark((function t(){var a,n,r,c,i,o,s,l;return O.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e.props,n=a.form,r=n.validateFields,c=n.getFieldsValue,i=a.currentUser.id,t.next=3,r((function(e){}));case 3:return t.next=5,Object(E["cloudFunction"])({model:"bsm_config__setting",functionName:"update_user_password",params:Object(v["a"])({id:i},c())});case 5:if(o=t.sent,"9000"!==o.error_code){t.next=9;break}return g["a"].error(o.error_data),t.abrupt("return");case 9:s=o.error_code,"0"!==s&&"403"!==s||(l=e.props.handleOk,l(),h["a"].push("/user/login"));case 11:case"end":return t.stop()}}),t)}))),e}return Object(l["a"])(a,[{key:"componentDidMount",value:function(){this.setBaseInfo()}},{key:"render",value:function(){var e=this.props,t=e.form.getFieldDecorator,a=e.visible;return p.a.createElement(i["a"],{visible:a,title:"\u5bc6\u7801\u8bbe\u7f6e",onOk:this.handleSubmit,onCancel:this.handleCancel},p.a.createElement("div",{className:k.a.baseView,ref:this.getViewDom},p.a.createElement("div",{className:k.a.left},p.a.createElement(_["a"],{layout:"vertical",onSubmit:this.handleSubmit,hideRequiredMark:!0},p.a.createElement(C,{label:"\u65e7\u5bc6\u7801"},t("oldPassWord",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u65e7\u5bc6\u7801!"}]})(p.a.createElement(b["a"].Password,{placeholder:"\u8bf7\u8f93\u5165\u65e7\u5bc6\u7801"}))),p.a.createElement(C,{label:"\u65b0\u5bc6\u7801"},t("newPassWord",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u65b0\u5bc6\u7801!"}]})(p.a.createElement(b["a"].Password,{placeholder:"\u8bf7\u8f93\u5165\u65b0\u5bc6\u7801"})))))))}}]),a}(m["Component"]))||c)||c),S=V,N="NA",P=a("Z3Gc"),$=a("jfUH"),x=(a("smr7"),a("DlTu")),I=(a("Ztx6"),a("8Ik2")),M=(a("eE3J"),a("GSZB")),H=(a("9kbU"),a("vbHR")),A={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M464 144H160c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V160c0-8.8-7.2-16-16-16zm-52 268H212V212h200v200zm452-268H560c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V160c0-8.8-7.2-16-16-16zm-52 268H612V212h200v200zm52 132H560c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V560c0-8.8-7.2-16-16-16zm-52 268H612V612h200v200zM424 712H296V584c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v128H104c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h128v128c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V776h128c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}}]},name:"appstore-add",theme:"outlined"},U=A,W=a("6VBw"),z=function(e,t){return m["createElement"](W["a"],Object.assign({},e,{ref:t,icon:U}))};z.displayName="AppstoreAddOutlined";var q,D,R,B,T,F=m["forwardRef"](z),G=a("IAhd"),J=a("fVK0"),Z=(a("qVdP"),a("jsC+")),K=a("0Owb"),L=a("PpiC"),Y=a("TSYQ"),Q=a.n(Y),X=a("2Fcx"),ee=a.n(X),te=function(e){var t=e.overlayClassName,a=Object(L["a"])(e,["overlayClassName"]);return p.a.createElement(Z["a"],Object(K["a"])({overlayClassName:Q()(ee.a.container,t)},a))},ae=te,ne=a("2fsV"),re=a.n(ne),ce=(q=Object(f["c"])((function(e){var t=e.user.currentUser;return{currentUser:t}})),q(D=function(e){Object(u["a"])(a,e);var t=Object(d["a"])(a);function a(){var e;Object(s["a"])(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return e=t.call.apply(t,[this].concat(r)),e.state={visible:!1},e}return Object(l["a"])(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.onMenuClick,n=t.currentUser,r=t.theme,c=t.a2sh,i=n.permissions,o=void 0===i?[]:i,s=this.state.visible,l=p.a.createElement(H["a"],{className:re.a.menu,selectedKeys:[],onClick:function(t){a(t),e.setState({visible:!1})}},c&&p.a.createElement(H["a"].Item,{key:"a2sh"},p.a.createElement(F,null),"\u6dfb\u52a0\u5230\u684c\u9762"),c&&p.a.createElement(H["a"].Divider,null),p.a.createElement(H["a"].Item,{key:"changePassword"},p.a.createElement(M["a"],{type:"form"}),"\u4fee\u6539\u5bc6\u7801"),p.a.createElement(H["a"].Divider,null),o.includes(J["a"].CHANGE_SETTING)&&p.a.createElement(H["a"].Item,{key:"webSettings"},p.a.createElement(M["a"],{type:"setting"}),Object(G["a"])({id:"menu.account.webSettings",defaultMessage:"webSettings"})),o.includes(J["a"].CHANGE_SETTING)&&p.a.createElement(H["a"].Divider,null),p.a.createElement(H["a"].Item,{key:"about"},p.a.createElement(M["a"],{type:"info-circle"}),Object(G["a"])({id:"menu.about",defaultMessage:"about"})),p.a.createElement(H["a"].Divider,null),p.a.createElement(H["a"].Item,{key:"logout"},p.a.createElement(M["a"],{type:"logout"}),Object(G["a"])({id:"menu.account.logout",defaultMessage:"logout"}))),u=re.a.right;return"dark"===r&&(u="".concat(re.a.right,"  ").concat(re.a.dark)),p.a.createElement("div",{className:u},n.username?p.a.createElement(ae,{overlay:l,visible:s,onVisibleChange:function(t){return e.setState({visible:t})},trigger:["hover","click"]},p.a.createElement("span",{className:"".concat(re.a.action," ").concat(re.a.account)},p.a.createElement(I["a"],{size:"small",className:re.a.avatar,src:n.avatar,alt:"avatar",icon:!n.avatar&&"user"}),p.a.createElement("span",{className:re.a.name},n.nick_name||n.name||n.username),p.a.createElement(M["a"],{type:s?"caret-up":"caret-down",style:{marginLeft:8,fontSize:16,color:"#595959"}}))):p.a.createElement(x["a"],{size:"small",style:{marginLeft:8,marginRight:24}}))}}]),a}(m["Component"]))||D),ie=ce,oe=(R=Object($["d"])((function(){return{a2sh:Object($["R"])()}})),B=Object(f["c"])((function(e){var t=e.content,a=t.release,n=t.build;return{release:a,build:n}})),R(T=B(T=function(e){Object(u["a"])(a,e);var t=Object(d["a"])(a);function a(){var e;Object(s["a"])(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return e=t.call.apply(t,[this].concat(r)),e.state={passWordVisible:!1,aboutVisible:!1},e.handleMenuClick=function(t){var a=t.key,n=e.props,r=n.dispatch,c=Object(o["a"])(n.a2sh,2),i=c[0],s=c[1];"logout"===a&&r({type:"content/logout"}),"webSettings"===a&&h["a"].push("/account/settings"),"changePassword"===a&&e.showPassWord(),"about"===a&&e.setState({aboutVisible:!0}),"a2sh"===a&&i&&(i.prompt(),i.userChoice.then((function(e){"accepted"===e.outcome&&s(null)})))},e.handleOkPassWord=function(){e.setState({passWordVisible:!1})},e.handleCancelPassWord=function(){e.setState({passWordVisible:!1})},e.showPassWord=function(){e.setState({passWordVisible:!0})},e}return Object(l["a"])(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.release,n=t.build,r=Object(o["a"])(t.a2sh,1),c=r[0],s=this.state,l=s.passWordVisible,u=s.aboutVisible;return p.a.createElement(p.a.Fragment,null,p.a.createElement(ie,{onMenuClick:this.handleMenuClick,a2sh:c}),p.a.createElement(S,{visible:l,handleCancel:this.handleCancelPassWord,handleOk:this.handleOkPassWord}),p.a.createElement(i["a"],{title:"\u5173\u4e8e",visible:u,onOk:function(){e.setState({aboutVisible:!1})},onCancel:function(){e.setState({aboutVisible:!1})}},p.a.createElement("div",null,p.a.createElement("p",null,P["f"],"\u7cfb\u7edf\u3002\u7531\u6770\u660e\u79d1\u6280\u8363\u8a89\u51fa\u54c1\u3002"),p.a.createElement("p",null,"\u53d1\u884c\u7248\u672c\u53f7\uff1a",a),p.a.createElement("p",null,"\u524d\u7aef\u6784\u5efa\u7248\u672c\uff1a",N),p.a.createElement("p",null,"\u540e\u7aef\u6784\u5efa\u7248\u672c\uff1a",n))))}}]),a}(m["Component"]))||T)||T);t["a"]=oe}}]);